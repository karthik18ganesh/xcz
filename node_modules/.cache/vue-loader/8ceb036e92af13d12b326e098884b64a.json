{"remainingRequest":"C:\\Users\\18kar\\Desktop\\FE bugs\\shan\\front_end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\18kar\\Desktop\\FE bugs\\shan\\front_end\\src\\components\\TaggingLanding.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\18kar\\Desktop\\FE bugs\\shan\\front_end\\src\\components\\TaggingLanding.vue","mtime":1634208004280},{"path":"C:\\Users\\18kar\\Desktop\\FE bugs\\shan\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\18kar\\Desktop\\FE bugs\\shan\\front_end\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\18kar\\Desktop\\FE bugs\\shan\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\18kar\\Desktop\\FE bugs\\shan\\front_end\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgc3RvcmUgZnJvbSAiLi4vc3RvcmUiOw0KaW1wb3J0IG1vbWVudCBmcm9tICJtb21lbnQiOw0KLy8gdmFyIGNvbnZlcnQgPSByZXF1aXJlKCd4bWwtanMnKTsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogIlRhZ2dpbmdIb21lIiwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdGFsbHlJbnRlZ3JhdGlvbkRpYWxvZzpmYWxzZSwNCiAgICAgIGFjdGl2ZVVwbG9hZE9wdGlvbjogIiIsDQogICAgICB1cGxvYWRPcHRpb25TZWxlY3RlZDogZmFsc2UsDQogICAgICBmcm9tUGVyaW9kOiAiIiwNCiAgICAgIHNlbGVjdGVkQ29tcGFueTogIiIsDQogICAgICB0YWdnZWRMZWRnZXJEYXRhOiBbXSwNCiAgICAgIGNvbXBhbmllczogWyJCU1kgUHJpdmF0ZSBMaW1pdGVkIl0sDQogICAgfTsNCiAgfSwNCiAgYXN5bmMgbW91bnRlZCgpIHsNCiAgICB0aGlzLmFsbFRhZ0hlYWRlcnMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLnRhZ0hlYWRlcnM7DQogICB9LA0KDQogIG1ldGhvZHM6IHsNCiAgICBhc3luYyBjaGVja1N0YXR1cyhpZCkgew0KICAgICAgdmFyIHJlcyA9IGF3YWl0IHRoaXMuJGFwaVNlcnZpY2UucG9zdCgiL3RhZ2dpbmdVcGxTdGF0dXMvZ2V0Iiwgew0KICAgICAgICB0YWdnaW5nVXBsU3RhdHVzSWQ6IGlkLmRhdGEsDQogICAgICAgIGNvbXBhbnlJZDogMjEsDQogICAgICB9KTsNCiAgICAgIC8vIGNvbnNvbGUubG9nKHJlcy5kYXRhLmRhdGEpDQogICAgICBzdG9yZS5jb21taXQoIlNFVF9JU19MT0FESU5HIiwgdHJ1ZSk7DQogICAgICBpZiAocmVzICYmIHJlcy5kYXRhLmRhdGEpIHsNCiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLm15VmFyKTsNCiAgICAgICAgc3RvcmUuY29tbWl0KCJTRVRfSVNfTE9BRElORyIsIGZhbHNlKTsNCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAiL3RhZ2dpbmdkaXNwbGF5IiB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGFzeW5jIGltcG9ydEZyb21UYWxseSgpIHsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogIi90YWdnaW5nZGlzcGxheSIgfSk7DQogICAgICAvLy0tDQogICAgICAvLyAgc3RvcmUuY29tbWl0KCdTRVRfSVNfTE9BRElORycsIHRydWUpOw0KICAgICAgLy9jcmVhdGUgZW50cnkgaW4gc3RhdHVzIHRhYmxlDQogICAgICAvLyB2YXIgc3RhdHVzUGF5bG9hZCA9eyJjb21wYW55SWQiOiAiMjEiLCJwZXJpb2RfZnJvbSI6ICIyMDIwLTA4LTA3IiwicGVyaW9kX3RvIjogIjIwMjEtMDgtMDcifTsNCiAgICAgIC8vIHZhciByZXMgPSBhd2FpdCB0aGlzLiRhcGlTZXJ2aWNlLnBvc3QoIi90YWdnaW5nVXBsU3RhdHVzIiwgc3RhdHVzUGF5bG9hZCk7DQogICAgICAvLyAgIGlmIChyZXMgJiYgcmVzLnN0YXR1cyA9PT0gMjAwKSB7DQogICAgICAvLyAgICAgc3RvcmUuY29tbWl0KCdTRVRfSVNfTE9BRElORycsIHRydWUpOw0KICAgICAgLy8gICAgIHRoaXMubXlWYXIgPSBzZXRJbnRlcnZhbCgoKT0+dGhpcy5jaGVja1N0YXR1cyhyZXMuZGF0YSksIDMwMDApOw0KICAgICAgLy8gICB9DQogICAgICAvLyBmZXRjaCgiaHR0cHM6Ly9qc29uaXAuY29tLyIpLnRoZW4odmFsPT52YWwuanNvbigpKS50aGVuKGFzeW5jIHZhbD0+ew0KICAgICAgLy8gY29uc29sZS5sb2codmFsLCJzdWMiLHsiaWQiOnZhbC5pcH0pOw0KICAgICAgLy8gICAgdmFyIHJlcyA9IGF3YWl0IHRoaXMuJGFwaVNlcnZpY2UucG9zdCgiL3RhbGx5L2dldGNvbXBhbnkiLCB7ImlwIjp2YWwuaXB9KTsNCiAgICAgIC8vICAgaWYgKHJlcyAmJiByZXMuc3RhdHVzID09PSAyMDApIHsNCiAgICAgIC8vICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YS5kYXRhLmVsZW1lbnRzWzBdLmVsZW1lbnRzWzBdLmVsZW1lbnRzWzBdLmVsZW1lbnRzLCJsaXN0IG9mIGNvbWFwbmllcyIpDQogICAgICAvLyAgIH0NCg0KICAgICAgLy8gfQ0KICAgICAgLy8gKS5jYXRjaCh2YWw9PmNvbnNvbGUubG9nKHZhbCwiZmFpbGVkIikpDQogICAgICAvLyB2YXIgcmVzID0gYXdhaXQgdGhpcy4kYXBpU2VydmljZS5wb3N0KCIvdGFsbHkvZ2V0Y29tcGFueSIsIHN0YXR1c1BheWxvYWQpOw0KICAgICAgLy8gaWYgKHJlcyAmJiByZXMuc3RhdHVzID09PSAyMDApIHsNCiAgICAgIC8vICAgc3RvcmUuY29tbWl0KCdTRVRfSVNfTE9BRElORycsIHRydWUpOw0KICAgICAgLy8gICB0aGlzLm15VmFyID0gc2V0SW50ZXJ2YWwoKCk9PnRoaXMuY2hlY2tTdGF0dXMocmVzLmRhdGEpLCAzMDAwKTsNCiAgICAgIC8vIH0NCiAgICAgIC8vLS0NCiAgICAgIC8vIHZhciBwYXJlbnRBcnJheT1bXTsNCiAgICAgIC8vICAgdHJ5ew0KICAgICAgLy8gICAgICAgdmFyIHJlcyA9IGF3YWl0IHRoaXMuJGFwaVNlcnZpY2UuZ2V0KGAvcHJvY2Vzc2luZy90YWdnZWRsZWRnZXIvJHsnMSd9YCk7DQogICAgICAvLyAgICAgICBpZihyZXMmJnJlcy5zdGF0dXMgPT09IDIwMCkgew0KDQogICAgICAvLyAgICAgICAgICAgdGhpcy50YWdnZWRMZWRnZXJEYXRhPXJlcy5kYXRhOw0KICAgICAgLy8gICAgICAgICAgIGlmKHJlcy5kYXRhLmxlbmd0aD4wKXsNCiAgICAgIC8vICAgICAgICAgICAgICBsZXQgdW5pcXVlID0gWy4uLm5ldyBTZXQocmVzLmRhdGEubWFwKGl0ZW0gPT4gaXRlbS5wYXJlbnQpKV07DQogICAgICAvLyAgICAgICAgICAgICAgdW5pcXVlLmZvckVhY2gocm93PT57DQogICAgICAvLyAgICAgICAgICAgICAgICBwYXJlbnRBcnJheS5wdXNoKHtuYW1lOnJvdyx2YWxpZGF0ZTpmYWxzZX0pDQogICAgICAvLyAgICAgICAgICAgICAgfSkNCg0KICAgICAgLy8gICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAnVGFnZ2luZ0RzaXBsYXknLCBwYXJhbXMgOiB7IGRpc3BsYXlEYXRhOiByZXMuZGF0YSxwYXJlbnQ6cGFyZW50QXJyYXl9fSk7DQoNCiAgICAgIC8vICAgICAgICAgICB9DQoNCiAgICAgIC8vICAgICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cyA9PT0gImVycm9yIikgew0KICAgICAgLy8gICBjb25zb2xlLmxvZygiZXJyb3IiKTsNCiAgICAgIC8vICAgICAgICAgfQ0KDQogICAgICAvLyAgIH0NCg0KICAgICAgLy8gICB9DQogICAgICAvLyAgIGNhdGNoKGVycm9yKSB7DQogICAgICAvLyAgICAvLyB0aGlzLnNob3dFcnJvcigiVW5hYmxlIHRvIEdldCBDb21wYW55IERldGFpbHMiKTsNCiAgICAgIC8vICAgICAgfQ0KICAgIH0sDQogICAgY2FuY2VsSW1wb3J0KCkgew0KICAgICAgdGhpcy51cGxvYWRPcHRpb25TZWxlY3RlZCA9IGZhbHNlOw0KICAgICAgdGhpcy5hY3RpdmVVcGxvYWRPcHRpb24gPSAiIjsNCiAgICB9LA0KICAgIGFzeW5jIHN0YXJ0TGlzdGVybmluZyh2YWx1ZSl7DQogICAgICBzdG9yZS5jb21taXQoJ1NFVF9JU19MT0FESU5HJywgdHJ1ZSk7IA0KICAgICAgY29uc29sZS5sb2codmFsdWUsInZhbDEiKQ0KICAgICAgdmFyIHdhdGNoID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4gew0KICAgICAgICBmZXRjaChgaHR0cDovL2xvY2FsaG9zdDo4MDgwL3RhbGx5aW50ZWdyYXRpb24vcmVnaXN0ZXIvZ2V0P3JlZ2lzdGVySWQ9JHt2YWx1ZS5kYXRhLnJlZ2lzdGVySWR9YCkudGhlbihyZXM9PnJlcy5qc29uKCkpLnRoZW4oYXN5bmMgcmVzPT57DQogICAgICBpZiAocmVzICkgew0KICAgICAgICBjb25zb2xlLmxvZyhyZXMpOw0KICAgICAgICBpZihyZXMuZGF0YSl7DQogICAgICAgICAgY2xlYXJJbnRlcnZhbCh3YXRjaCk7DQogICAgICAgIHN0b3JlLmNvbW1pdCgnU0VUX0lTX0xPQURJTkcnLCB0cnVlKTsgDQogICAgICAgIHZhciBpZGYgPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImZpbmEiKSkuaWQ7DQogICAgICAgICAgICAvL2dldCByZXBvcnRpbmcgcGVyaW9kaWQgYW5kIGNvbXBhbnkgdHlwZQ0KICAgICAgICB2YXIgcmVzUmVxdWlyZWREZXRhaWxzID0gYXdhaXQgdGhpcy4kYXBpU2VydmljZS5nZXQoJ2xlZGdlci9yZXF1aXJlZHZhbHVlcz9maW5hbmNpYWxJZD0nK2lkZik7DQogICAgICAgIGlmKHJlc1JlcXVpcmVkRGV0YWlscyYmcmVzUmVxdWlyZWREZXRhaWxzLnN0YXR1cyA9PT0gMjAwKSB7ICANCiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJyZXBvcnRJZCIscmVzUmVxdWlyZWREZXRhaWxzLmRhdGEuZGF0YS5yZXBvcnRpbmdQZXJpb2REYXRhKTsNCiAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJjb21wYW55VHlwZSIscmVzUmVxdWlyZWREZXRhaWxzLmRhdGEuZGF0YS5jb21wYW55VHlwZSk7DQogICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgidGFnZ2luZ0xldmVsIixyZXNSZXF1aXJlZERldGFpbHMuZGF0YS5kYXRhLnRhZ2dpbmdMZXZlbCk7DQogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICIvdGFnZ2luZ2Rpc3BsYXkiIH0pOw0KICAgICAgICAgIH0sIDEwMCk7ICANCiAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9ICAgIA0KICAgICAgZWxzZXsNCiAgICAgICAgY2xlYXJJbnRlcnZhbCh3YXRjaCk7DQogICAgICB9DQogICAgICAgIH0pDQoNCiAgICAgIH0sIDEwMDAwKTsNCiAgICB9LA0KICAgIGFzeW5jIGRvd25Mb2FkRmlsZSgpew0KICAgIHZhciB0aW1lID0gbW9tZW50KCkudmFsdWVPZigpOw0KICAgICAgLy8gZmV0Y2goJ2h0dHA6Ly8xMy4yMzQuMjcuNjU6ODA4MC9pbmRleD90aW1lPScrdGltZSkNCiAgICAgIGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjgwODAvdGFsbHlpbnRlZ3JhdGlvbj90aW1lPScrdGltZSkNCiAgLnRoZW4ocmVzcCA9PiByZXNwLmJsb2IoKSkNCiAgLnRoZW4oYmxvYiA9PiB7DQogICAgY29uc3QgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7DQogICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsNCiAgICBhLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQogICAgYS5ocmVmID0gdXJsOw0KICAgIC8vIHRoZSBmaWxlbmFtZSB5b3Ugd2FudA0KICAgIGEuZG93bmxvYWQgPSAndGFsbHlJbnRlZ3JhdGlvbi5odG1sJzsNCiAgICAvLyBhLnRhcmdldCA9ICJfYmxhbmsiOw0KICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7DQogICAgYS5jbGljaygpOw0KICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7DQogIH0pDQogIC5jYXRjaCgoKSA9PiBhbGVydCgndHJ5IGFnYWluLi4nKSk7DQogIHRoaXMudGFsbHlJbnRlZ3JhdGlvbkRpYWxvZyA9IGZhbHNlOw0KICBzdG9yZS5jb21taXQoJ1NFVF9JU19MT0FESU5HJywgdHJ1ZSk7IA0KICB2YXIgcmVzID0gYXdhaXQgdGhpcy4kYXBpU2VydmljZS5wb3N0KGAvdGFsbHlpbnRlZ3JhdGlvbi9yZWdpc3RlcmAse3VzZXJJZDpKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLnVzZXJEZXRhaWxzKS5kYXRhLmlkLGNvbXBhbnlJZDpKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmZpbmEpLmNvbXBhbnlfaWQsZmluYW5jaWFsSWQ6SlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5maW5hKS5pZCxvdGhlckRldGFpbHM6SlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5maW5hKX0pOw0KICAgICAgaWYgKHJlcyAmJiByZXMuc3RhdHVzID09PSAyMDApIHsNCiAgICAgICAgdGhpcy5zdGFydExpc3Rlcm5pbmcocmVzKTsNCiAgICAgIH0NCiAgICB9LA0KICAgYXN5bmMgdXNlRXhpc3RpbmdGaWxlKCl7DQogICAgIHRoaXMudGFsbHlJbnRlZ3JhdGlvbkRpYWxvZyA9IGZhbHNlOw0KICAgICAgICBzdG9yZS5jb21taXQoJ1NFVF9JU19MT0FESU5HJywgdHJ1ZSk7IA0KICB2YXIgcmVzID0gYXdhaXQgdGhpcy4kYXBpU2VydmljZS5wb3N0KGAvdGFsbHlpbnRlZ3JhdGlvbi9yZWdpc3RlcmAse3VzZXJJZDpKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLnVzZXJEZXRhaWxzKS5kYXRhLmlkLGNvbXBhbnlJZDpKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmZpbmEpLmNvbXBhbnlfaWQsZmluYW5jaWFsSWQ6SlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5maW5hKS5pZCxvdGhlckRldGFpbHM6SlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5maW5hKX0pOw0KICAgICAgaWYgKHJlcyAmJiByZXMuc3RhdHVzID09PSAyMDApIHsNCiAgICAgICAgdGhpcy5zdGFydExpc3Rlcm5pbmcocmVzKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIFVwbG9hZE9wdGlvblNlbGVjdGVkKHZhbCkgew0KICAgICAgY29uc29sZS5sb2codmFsLCJ2YWwiKQ0KICAgICAgLy8gdGhpcy51cGxvYWRPcHRpb25TZWxlY3RlZCA9IHRydWU7DQogICAgICAvLyB0aGlzLmFjdGl2ZVVwbG9hZE9wdGlvbiA9IHZhbDsNCiAgICAgIHRoaXMudGFsbHlJbnRlZ3JhdGlvbkRpYWxvZyA9IHRydWU7DQogIC8vICAgICBpZih2YWwgPT0gInRhbGx5Iil7DQogIC8vICAgICAgICAgICAgIHZhciB0aW1lID0gbW9tZW50KCkudmFsdWVPZigpOw0KICAvLyAgICAgLy8gZmV0Y2goJ2h0dHA6Ly8xMy4yMzQuMjcuNjU6ODA4MC9pbmRleD90aW1lPScrdGltZSkNCiAgLy8gICAgIGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjgwODAvaW5kZXg/dGltZT0nK3RpbWUpDQogIC8vIC50aGVuKHJlc3AgPT4gcmVzcC5ibG9iKCkpDQogIC8vIC50aGVuKGJsb2IgPT4gew0KICAvLyAgIGNvbnN0IHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOw0KICAvLyAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7DQogIC8vICAgYS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAvLyAgIGEuaHJlZiA9IHVybDsNCiAgLy8gICAvLyB0aGUgZmlsZW5hbWUgeW91IHdhbnQNCiAgLy8gICBhLmRvd25sb2FkID0gJ3RhbGx5SW50ZWdyYXRpb24uaHRtbCc7DQogIC8vICAgLy8gYS50YXJnZXQgPSAiX2JsYW5rIjsNCiAgLy8gICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpOw0KICAvLyAgIGEuY2xpY2soKTsNCiAgLy8gICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOw0KICAvLyB9KQ0KICAvLyAuY2F0Y2goKCkgPT4gYWxlcnQoJ29oIG5vIScpKTsNCiAgLy8gICAgIH0NCiAgICB9LA0KICAgIGFzeW5jIHNhdmVBbGxMZWRnZXJzKCkgew0KICAgICAgdmFyIHJlcyA9IGF3YWl0IHRoaXMuJGFwaVNlcnZpY2UucHV0KA0KICAgICAgICBgcHJvY2Vzc2luZy90YWdnaW5nL3VwZGF0ZWAsDQogICAgICAgIHRoaXMudGFnZ2VkTGVkZ2VyRGF0YQ0KICAgICAgKTsNCiAgICAgIGlmIChyZXMgJiYgcmVzLnN0YXR1cyA9PT0gMjAwKSB7DQogICAgICAgIHRoaXMuc2hvd1N1Y2Nlc3MocmVzLmRhdGEubWVzc2FnZSk7DQogICAgICAgIHRoaXMuJHJlZnMudGFibGUucmVmcmVzaCgpOw0KICAgICAgICBhd2FpdCB0aGlzLmdldEFsbExlZGdlckRhdGEodGhpcy5zZWxlY3RlZENvbXBhbnkpOw0KICAgICAgICBhd2FpdCB0aGlzLmdldFRhZ2dpbmdUcmVlRGF0YSgpOw0KICAgICAgICBjb25zb2xlLmxvZygic3VjY2VzcyIpOw0KICAgICAgfQ0KICAgICAgaWYgKHJlcy5kYXRhLnN0YXR1cyA9PT0gImVycm9yIikgew0KICAgICAgICBjb25zb2xlLmxvZygiZXJyb3IiKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGFzeW5jIG9uVGFnVHJlZVN1Ym1pdChkYXRhKSB7DQogICAgICBjb25zb2xlLmxvZyhkYXRhKTsNCiAgICAgIHRoaXMuJHJlZnMudHJlZVRhYmxlLnJlZnJlc2goKTsNCiAgICAgIHRoaXMuZmlsdGVyVGFnZ2luZ1RyZWUodGhpcy5zZWxlY3RlZFRhZyk7DQogICAgfSwNCiAgICBhc3luYyBvbkxlZGdlclN1Ym1pdChkYXRhKSB7DQogICAgICBsZXQgcHV0RGF0YSA9IFtdOw0KICAgICAgcHV0RGF0YS5wdXNoKGRhdGEpOw0KICAgICAgdmFyIHJlcyA9IGF3YWl0IHRoaXMuJGFwaVNlcnZpY2UucHV0KA0KICAgICAgICBgcHJvY2Vzc2luZy90YWdnaW5nL3VwZGF0ZWAsDQogICAgICAgIHB1dERhdGENCiAgICAgICk7DQogICAgICBpZiAocmVzICYmIHJlcy5zdGF0dXMgPT09IDIwMCkgew0KICAgICAgICB0aGlzLnNob3dTdWNjZXNzKHJlcy5kYXRhLm1lc3NhZ2UpOw0KICAgICAgICB0aGlzLiRyZWZzLnRhYmxlLnJlZnJlc2goKTsNCiAgICAgICAgYXdhaXQgdGhpcy5nZXRBbGxMZWRnZXJEYXRhKHRoaXMuc2VsZWN0ZWRDb21wYW55KTsNCiAgICAgICAgYXdhaXQgdGhpcy5nZXRUYWdnaW5nVHJlZURhdGEoKTsNCiAgICAgICAgY29uc29sZS5sb2coInN1Y2Nlc3MiKTsNCiAgICAgIH0NCiAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMgPT09ICJlcnJvciIpIHsNCiAgICAgICAgY29uc29sZS5sb2coImVycm9yIik7DQogICAgICB9DQogICAgICBjb25zb2xlLmxvZyhkYXRhKTsNCiAgICB9LA0KICAgIGxlZGdlckdyb3VwMUNoYW5nZWQodmFsdWUpIHsNCiAgICAgIGxldCBncm91cDIgPSBbXTsNCiAgICAgIHRoaXMuYWxsVGFnSGVhZGVycyA9IEpTT04ucGFyc2UoDQogICAgICAgIEpTT04uc3RyaW5naWZ5KHRoaXMuJHN0b3JlLmdldHRlcnMudGFnSGVhZGVycykNCiAgICAgICk7DQogICAgICB2YXIgdGFnRmlsdGVyID0gdGhpcy5hbGxUYWdIZWFkZXJzLmZpbHRlcigNCiAgICAgICAgKHgpID0+IHguZ3JvdXAxID09IHZhbHVlLmdyb3VwMQ0KICAgICAgKTsNCiAgICAgIGlmICh0YWdGaWx0ZXIubGVuZ3RoID09IDApIHJldHVybjsNCg0KICAgICAgaWYgKHRhZ0ZpbHRlci5sZW5ndGggIT0gMCkgew0KICAgICAgICB0YWdGaWx0ZXJbMF0uZ3JvdXAyLmZvckVhY2goKGVsZW1lbnQpID0+IHsNCiAgICAgICAgICBncm91cDIucHVzaChlbGVtZW50Lmdyb3VwMm5hbWUpOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICAgIGlmIChncm91cDIubGVuZ3RoID4gMCkgew0KICAgICAgICBpZiAoDQogICAgICAgICAgdGhpcy50ZW1wR3JvdXAyQXJyeWF5LmZpbHRlcigoeCkgPT4geC5sZWRnZXJpZCA9PSB2YWx1ZS5sZWRnZXJpZCkNCiAgICAgICAgICAgIC5sZW5ndGggPT0gMA0KICAgICAgICApIHsNCiAgICAgICAgICB0aGlzLnRlbXBHcm91cDJBcnJ5YXkucHVzaCh7DQogICAgICAgICAgICBsZWRnZXJpZDogdmFsdWUubGVkZ2VyaWQsDQogICAgICAgICAgICBncm91cDI6IGdyb3VwMiwNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLnRlbXBHcm91cDJBcnJ5YXkuZmlsdGVyKA0KICAgICAgICAgICAgKHgpID0+IHgubGVkZ2VyaWQgPT0gdmFsdWUubGVkZ2VyaWQNCiAgICAgICAgICApWzBdLmdyb3VwMiA9IGdyb3VwMjsNCiAgICAgICAgICB0aGlzLnRhZ2dlZExlZGdlckRhdGEuZmlsdGVyKA0KICAgICAgICAgICAgKHgpID0+IHgubGVkZ2VyaWQgPT0gdmFsdWUubGVkZ2VyaWQNCiAgICAgICAgICApWzBdLmdyb3VwMiA9IG51bGw7DQogICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnRhZ2dlZExlZGdlckRhdGEuZmlsdGVyKHg9PngubGVkZ2VyaWQ9PXZhbHVlLmxlZGdlcmlkKVswXSwic2h1bSIpDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHRoaXMuJHJlZnMudGFibGUucmVmcmVzaCgpOw0KICAgIH0sDQoNCiAgICBsZWRnZXJHcm91cDJDaGFuZ2VkKGl0ZW0pIHsNCiAgICAgIGRlYnVnZ2VyOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWRlYnVnZ2VyDQogICAgICBsZXQgZ3JvdXAzID0gW107DQogICAgICB0aGlzLmFsbFRhZ0hlYWRlcnMgPSBKU09OLnBhcnNlKA0KICAgICAgICBKU09OLnN0cmluZ2lmeSh0aGlzLiRzdG9yZS5nZXR0ZXJzLnRhZ0hlYWRlcnMpDQogICAgICApOw0KICAgICAgdmFyIHRhZ0ZpbHRlciA9IHRoaXMuYWxsVGFnSGVhZGVycy5maWx0ZXIoKHgpID0+IHguZ3JvdXAxID09IGl0ZW0uZ3JvdXAxKTsNCiAgICAgIGlmICh0YWdGaWx0ZXIubGVuZ3RoID09IDApIHJldHVybjsNCg0KICAgICAgdmFyIHRhZzNGaWx0ZXIgPSB0YWdGaWx0ZXJbMF0uZ3JvdXAyLmZpbHRlcigNCiAgICAgICAgKHgpID0+IHguZ3JvdXAybmFtZSA9PSBpdGVtLmdyb3VwMg0KICAgICAgKTsNCiAgICAgIGlmICh0YWczRmlsdGVyLmxlbmd0aCAhPSAwKSB7DQogICAgICAgIHRhZzNGaWx0ZXJbMF0uZ3JvdXAzLmZvckVhY2goKGVsZW1lbnQpID0+IHsNCiAgICAgICAgICBncm91cDMucHVzaChlbGVtZW50KTsNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgICBpZiAoZ3JvdXAzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIHRoaXMudGVtcEdyb3VwM0FycnlheS5maWx0ZXIoKHgpID0+IHgubGVkZ2VyaWQgPT0gaXRlbS5sZWRnZXJpZCkNCiAgICAgICAgICAgIC5sZW5ndGggPT0gMA0KICAgICAgICApIHsNCiAgICAgICAgICB0aGlzLnRlbXBHcm91cDNBcnJ5YXkucHVzaCh7DQogICAgICAgICAgICBsZWRnZXJpZDogaXRlbS5sZWRnZXJpZCwNCiAgICAgICAgICAgIGdyb3VwMzogZ3JvdXAzLA0KICAgICAgICAgIH0pOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMudGVtcEdyb3VwM0FycnlheS5maWx0ZXIoDQogICAgICAgICAgICAoeCkgPT4geC5sZWRnZXJpZCA9PSBpdGVtLmxlZGdlcmlkDQogICAgICAgICAgKVswXS5ncm91cDMgPSBncm91cDM7DQogICAgICAgICAgdGhpcy50YWdnZWRMZWRnZXJEYXRhLmZpbHRlcigNCiAgICAgICAgICAgICh4KSA9PiB4LmxlZGdlcmlkID09IGl0ZW0ubGVkZ2VyaWQNCiAgICAgICAgICApWzBdLmdyb3VwMyA9IG51bGw7DQogICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnRhZ2dlZExlZGdlckRhdGEuZmlsdGVyKHg9PngubGVkZ2VyaWQ9PXZhbHVlLmxlZGdlcmlkKVswXSwic2h1bSIpDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHRoaXMuJHJlZnMudGFibGUucmVmcmVzaCgpOw0KICAgIH0sDQogICAgbGVkZ2VyVGFnQ2hhbmdlZCh2YWx1ZSkgew0KICAgICAgY29uc29sZS5sb2codmFsdWUsICJsZWRnZXJUYWdDaGFuZ2VkIik7DQogICAgICBsZXQgZ3JvdXAxID0gW107DQogICAgICB0aGlzLmFsbFRhZ0hlYWRlcnMgPSBKU09OLnBhcnNlKA0KICAgICAgICBKU09OLnN0cmluZ2lmeSh0aGlzLiRzdG9yZS5nZXR0ZXJzLnRhZ0hlYWRlcnMpDQogICAgICApOw0KICAgICAgdmFyIHRhZ0ZpbHRlciA9IHRoaXMuYWxsVGFnSGVhZGVycy5maWx0ZXIoDQogICAgICAgICh4KSA9PiB4LnRhZ2hlYWRlciA9PSB2YWx1ZS5pdGVtLnRhZ2dpbmdoZWFkZXINCiAgICAgICk7DQogICAgICB0YWdGaWx0ZXJbMF0uZ3JvdXAxLmZvckVhY2goKGVsZW1lbnQpID0+IHsNCiAgICAgICAgZ3JvdXAxLnB1c2goZWxlbWVudC5ncm91cDFuYW1lKTsNCiAgICAgIH0pOw0KICAgICAgaWYgKGdyb3VwMS5sZW5ndGggPiAwKSB7DQogICAgICAgIGlmICgNCiAgICAgICAgICB0aGlzLnRlbXBHcm91cDFBcnJ5YXkuZmlsdGVyKCh4KSA9PiB4LmxlZGdlcmlkID09IHZhbHVlLml0ZW0ubGVkZ2VyaWQpDQogICAgICAgICAgICAubGVuZ3RoID09IDANCiAgICAgICAgKSB7DQogICAgICAgICAgdGhpcy50ZW1wR3JvdXAxQXJyeWF5LnB1c2goew0KICAgICAgICAgICAgbGVkZ2VyaWQ6IHZhbHVlLml0ZW0ubGVkZ2VyaWQsDQogICAgICAgICAgICBncm91cDE6IGdyb3VwMSwNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLnRlbXBHcm91cDFBcnJ5YXkuZmlsdGVyKA0KICAgICAgICAgICAgKHgpID0+IHgubGVkZ2VyaWQgPT0gdmFsdWUuaXRlbS5sZWRnZXJpZA0KICAgICAgICAgIClbMF0uZ3JvdXAxID0gZ3JvdXAxOw0KICAgICAgICAgIHRoaXMudGFnZ2VkTGVkZ2VyRGF0YS5maWx0ZXIoDQogICAgICAgICAgICAoeCkgPT4geC5sZWRnZXJpZCA9PSB2YWx1ZS5pdGVtLmxlZGdlcmlkDQogICAgICAgICAgKVswXS5ncm91cDEgPSBudWxsOw0KICAgICAgICAgIGNvbnNvbGUubG9nKA0KICAgICAgICAgICAgdGhpcy50YWdnZWRMZWRnZXJEYXRhLmZpbHRlcigNCiAgICAgICAgICAgICAgKHgpID0+IHgubGVkZ2VyaWQgPT0gdmFsdWUuaXRlbS5sZWRnZXJpZA0KICAgICAgICAgICAgKVswXSwNCiAgICAgICAgICAgICJzaHVtIg0KICAgICAgICAgICk7DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLiRyZWZzLnRhYmxlLnJlZnJlc2goKTsNCiAgICAgIH0NCiAgICAgIGNvbnNvbGUubG9nKA0KICAgICAgICB0aGlzLnRlbXBHcm91cDFBcnJ5YXkuZmlsdGVyKA0KICAgICAgICAgICh4KSA9PiB4LmxlZGdlcmlkID09IHZhbHVlLml0ZW0ubGVkZ2VyaWQNCiAgICAgICAgKVswXS5ncm91cDEsDQogICAgICAgICJzIg0KICAgICAgKTsNCiAgICB9LA0KICAgIHRhZ1RyZWVHcm91cDJDaGFuZ2VkKGl0ZW0pIHsNCiAgICAgIGxldCBncm91cDMgPSBbXTsNCiAgICAgIHRoaXMuYWxsVGFnSGVhZGVycyA9IEpTT04ucGFyc2UoDQogICAgICAgIEpTT04uc3RyaW5naWZ5KHRoaXMuJHN0b3JlLmdldHRlcnMudGFnSGVhZGVycykNCiAgICAgICk7DQogICAgICB2YXIgdGFnRmlsdGVyID0gdGhpcy5hbGxUYWdIZWFkZXJzLmZpbHRlcigNCiAgICAgICAgKHJvdykgPT4gcm93Lmdyb3VwMSA9PSBpdGVtLmdyb3VwMQ0KICAgICAgKTsNCiAgICAgIGlmICh0YWdGaWx0ZXIubGVuZ3RoID09IDApIHJldHVybjsNCg0KICAgICAgdmFyIHRhZzNGaWx0ZXIgPSB0YWdGaWx0ZXJbMF0uZ3JvdXAyLmZpbHRlcigNCiAgICAgICAgKHgpID0+IHguZ3JvdXAybmFtZSA9PSBpdGVtLmdyb3VwMg0KICAgICAgKTsNCiAgICAgIGlmICh0YWczRmlsdGVyLmxlbmd0aCAhPSAwKSB7DQogICAgICAgIHRhZzNGaWx0ZXJbMF0uZ3JvdXAzLmZvckVhY2goKGVsZW1lbnQpID0+IHsNCiAgICAgICAgICBncm91cDMucHVzaChlbGVtZW50KTsNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgICBpZiAoZ3JvdXAzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgaWYgKA0KICAgICAgICAgIHRoaXMudGVtcFRyZWVHcm91cDNBcnJ5YXkuZmlsdGVyKCh4KSA9PiB4LmlkID09IGl0ZW0uaWQpLmxlbmd0aCA9PSAwDQogICAgICAgICkgew0KICAgICAgICAgIHRoaXMudGVtcFRyZWVHcm91cDNBcnJ5YXkucHVzaCh7IGlkOiBpdGVtLmlkLCBncm91cDM6IGdyb3VwMyB9KTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLnRlbXBUcmVlR3JvdXAzQXJyeWF5LmZpbHRlcigoeCkgPT4geC5pZCA9PSBpdGVtLmlkKVswXS5ncm91cDMgPQ0KICAgICAgICAgICAgZ3JvdXAzOw0KICAgICAgICAgIHRoaXMudGFnZ2luZ1RyZWVEYXRhLmZpbHRlcigoeCkgPT4geC5pZCA9PSBpdGVtLmlkKVswXS5ncm91cDMgPSBudWxsOw0KICAgICAgICAgIC8vY29uc29sZS5sb2codGhpcy50YWdnZWRMZWRnZXJEYXRhLmZpbHRlcih4PT54LmxlZGdlcmlkPT12YWx1ZS5sZWRnZXJpZClbMF0sInNodW0iKQ0KICAgICAgICB9DQogICAgICB9DQogICAgICB0aGlzLiRyZWZzLnRhYmxlLnJlZnJlc2goKTsNCiAgICB9LA0KICAgIHRhZ1RyZWVHcm91cDFDaGFuZ2VkKHZhbHVlKSB7DQogICAgICBsZXQgZ3JvdXAyID0gW107DQogICAgICB0aGlzLmFsbFRhZ0hlYWRlcnMgPSBKU09OLnBhcnNlKA0KICAgICAgICBKU09OLnN0cmluZ2lmeSh0aGlzLiRzdG9yZS5nZXR0ZXJzLnRhZ0hlYWRlcnMpDQogICAgICApOw0KICAgICAgdmFyIHRhZ0ZpbHRlciA9IHRoaXMuYWxsVGFnSGVhZGVycy5maWx0ZXIoDQogICAgICAgIChyb3cpID0+IHJvdy5ncm91cDEgPT0gdmFsdWUuZ3JvdXAxDQogICAgICApOw0KICAgICAgaWYgKHRhZ0ZpbHRlci5sZW5ndGggPT0gMCkgcmV0dXJuOw0KDQogICAgICBpZiAodGFnRmlsdGVyLmxlbmd0aCAhPSAwKSB7DQogICAgICAgIHRhZ0ZpbHRlclswXS5ncm91cDIuZm9yRWFjaCgoZWxlbWVudCkgPT4gew0KICAgICAgICAgIGdyb3VwMi5wdXNoKGVsZW1lbnQuZ3JvdXAybmFtZSk7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgICAgaWYgKGdyb3VwMi5sZW5ndGggPiAwKSB7DQogICAgICAgIGlmICgNCiAgICAgICAgICB0aGlzLnRlbXBUcmVlR3JvdXAyQXJyeWF5LmZpbHRlcigoeCkgPT4geC5pZCA9PSB2YWx1ZS5pZCkubGVuZ3RoID09IDANCiAgICAgICAgKSB7DQogICAgICAgICAgdGhpcy50ZW1wVHJlZUdyb3VwMkFycnlheS5wdXNoKHsgaWQ6IHZhbHVlLmlkLCBncm91cDI6IGdyb3VwMiB9KTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLnRlbXBUcmVlR3JvdXAyQXJyeWF5LmZpbHRlcigoeCkgPT4geC5pZCA9PSB2YWx1ZS5pZClbMF0uZ3JvdXAyID0NCiAgICAgICAgICAgIGdyb3VwMjsNCiAgICAgICAgICB0aGlzLnRhZ2dpbmdUcmVlRGF0YS5maWx0ZXIoKHgpID0+IHguaWQgPT0gdmFsdWUuaWQpWzBdLmdyb3VwMiA9IG51bGw7DQogICAgICAgICAgdGhpcy50YWdnaW5nVHJlZURhdGEuZmlsdGVyKCh4KSA9PiB4LmlkID09IHZhbHVlLmlkKVswXS5ncm91cDMgPSBudWxsOw0KICAgICAgICAgIC8vY29uc29sZS5sb2codGhpcy50YWdnZWRMZWRnZXJEYXRhLmZpbHRlcih4PT54LmxlZGdlcmlkPT12YWx1ZS5sZWRnZXJpZClbMF0sInNodW0iKQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICB0YWdUcmVlVGFnQ2hhbmdlZCh2YWx1ZSkgew0KICAgICAgbGV0IGdyb3VwMSA9IFtdOw0KICAgICAgdGhpcy5hbGxUYWdIZWFkZXJzID0gSlNPTi5wYXJzZSgNCiAgICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy4kc3RvcmUuZ2V0dGVycy50YWdIZWFkZXJzKQ0KICAgICAgKTsNCiAgICAgIHZhciB0YWdGaWx0ZXIgPSB0aGlzLmFsbFRhZ0hlYWRlcnMuZmlsdGVyKA0KICAgICAgICAoeCkgPT4geC50YWdoZWFkZXIgPT0gdmFsdWUuaXRlbS50YWdoZWFkZXINCiAgICAgICk7DQogICAgICB0YWdGaWx0ZXJbMF0uZ3JvdXAxLmZvckVhY2goKGVsZW1lbnQpID0+IHsNCiAgICAgICAgZ3JvdXAxLnB1c2goZWxlbWVudC5ncm91cDFuYW1lKTsNCiAgICAgIH0pOw0KICAgICAgaWYgKGdyb3VwMS5sZW5ndGggPiAwKSB7DQogICAgICAgIGlmICgNCiAgICAgICAgICB0aGlzLnRlbXBUcmVlR3JvdXAxQXJyeWF5LmZpbHRlcigocm93KSA9PiByb3cuaWQgPT0gdmFsdWUuaXRlbS5pZCkNCiAgICAgICAgICAgIC5sZW5ndGggPT0gMA0KICAgICAgICApIHsNCiAgICAgICAgICB0aGlzLnRlbXBUcmVlR3JvdXAxQXJyeWF5LnB1c2goeyBpZDogdmFsdWUuaXRlbS5pZCwgZ3JvdXAxOiBncm91cDEgfSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy50ZW1wVHJlZUdyb3VwMUFycnlheS5maWx0ZXIoDQogICAgICAgICAgICAoeCkgPT4geC5sZWRnZXJpZCA9PSB2YWx1ZS5pdGVtLmxlZGdlcmlkDQogICAgICAgICAgKVswXS5ncm91cDEgPSBncm91cDE7DQogICAgICAgICAgdGhpcy50YWdnaW5nVHJlZURhdGEuZmlsdGVyKCh4KSA9PiB4LmlkID09IHZhbHVlLml0ZW0uaWQpWzBdLmdyb3VwMSA9DQogICAgICAgICAgICBudWxsOw0KICAgICAgICAgIHRoaXMudGFnZ2luZ1RyZWVEYXRhLmZpbHRlcigoeCkgPT4geC5pZCA9PSB2YWx1ZS5pdGVtLmlkKVswXS5ncm91cDIgPQ0KICAgICAgICAgICAgbnVsbDsNCiAgICAgICAgICB0aGlzLnRhZ2dpbmdUcmVlRGF0YS5maWx0ZXIoKHgpID0+IHguaWQgPT0gdmFsdWUuaXRlbS5pZClbMF0uZ3JvdXAzID0NCiAgICAgICAgICAgIG51bGw7DQogICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnRhZ2dlZExlZGdlckRhdGEuZmlsdGVyKHg9PngubGVkZ2VyaWQ9PXZhbHVlLml0ZW0ubGVkZ2VyaWQpWzBdLCJzaHVtIikNCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMuJHJlZnMudGFibGUucmVmcmVzaCgpOw0KICAgICAgfQ0KICAgICAgY29uc29sZS5sb2coDQogICAgICAgIHRoaXMudGVtcEdyb3VwMUFycnlheS5maWx0ZXIoDQogICAgICAgICAgKHgpID0+IHgubGVkZ2VyaWQgPT0gdmFsdWUuaXRlbS5sZWRnZXJpZA0KICAgICAgICApWzBdLmdyb3VwMSwNCiAgICAgICAgInMiDQogICAgICApOw0KICAgIH0sDQogICAgYXN5bmMgc2VuZFZhbHVlKHZhbHVlKSB7DQogICAgICBpZiAodmFsdWUgPT09ICJhbGwiKSB7DQogICAgICAgIHRoaXMudGFnU2VsZWN0ZWQgPSBmYWxzZTsNCiAgICAgICAgdGhpcy5zZWxlY3RlZFRhZyA9ICIiOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy50YWdTZWxlY3RlZCA9IHRydWU7DQogICAgICAgIGlmICh0aGlzLnRhZ2dpbmdUcmVlRGF0YS5sZW5ndGggPT0gMCkgew0KICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0VGFnZ2luZ1RyZWVEYXRhKCk7DQogICAgICAgICAgdGhpcy5maWx0ZXJUYWdnaW5nVHJlZSh2YWx1ZSk7DQogICAgICAgICAgdGhpcy5zZWxlY3RlZFRhZyA9IHZhbHVlOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuZmlsdGVyVGFnZ2luZ1RyZWUodmFsdWUpOw0KICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUYWcgPSB2YWx1ZTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgY2hlY2tpcChpcCkgew0KICAgICAgY29uc29sZS5sb2coaXAsICJjaGVja2lwIik7DQogICAgfSwNCiAgICBnZXRHcm91cDJJdGVtcyhpdGVtKSB7DQogICAgICB0aGlzLnRlbXBTZWxlY3QgPSBbXTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1kZWJ1Z2dlcg0KICAgICAgbGV0IGdyb3VwMSA9IFtdOw0KICAgICAgdGhpcy5hbGxUYWdIZWFkZXJzID0gSlNPTi5wYXJzZSgNCiAgICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy4kc3RvcmUuZ2V0dGVycy50YWdIZWFkZXJzKQ0KICAgICAgKTsNCiAgICAgIHZhciB0YWdGaWx0ZXIgPSB0aGlzLmFsbFRhZ0hlYWRlcnMuZmlsdGVyKA0KICAgICAgICAoeCkgPT4geC50YWdoZWFkZXIgPT0gaXRlbS50YWdoZWFkZXINCiAgICAgICk7DQogICAgICBpZiAodGFnRmlsdGVyLmxlbmd0aCA9PSAwKSByZXR1cm47DQogICAgICB2YXIgdGFnMkZpbHRlciA9IHRhZ0ZpbHRlclswXS5ncm91cDEuZmlsdGVyKA0KICAgICAgICAoeCkgPT4geC5ncm91cDFuYW1lID09IGl0ZW0uZ3JvdXAxDQogICAgICApOw0KICAgICAgaWYgKHRhZzJGaWx0ZXIubGVuZ3RoICE9IDApIHsNCiAgICAgICAgdGFnMkZpbHRlclswXS5ncm91cDIuZm9yRWFjaCgoZWxlbWVudCkgPT4gew0KICAgICAgICAgIGdyb3VwMS5wdXNoKGVsZW1lbnQuZ3JvdXAybmFtZSk7DQogICAgICAgIH0pOw0KICAgICAgfQ0KDQogICAgICB0aGlzLnRlbXBTZWxlY3QgPSBncm91cDE7DQogICAgfSwNCiAgICBnZXRHcm91cDNJdGVtcyhpdGVtKSB7DQogICAgICB0aGlzLnRlbXBTZWxlY3QgPSBbXTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1kZWJ1Z2dlcg0KICAgICAgbGV0IGdyb3VwMSA9IFtdOw0KICAgICAgdGhpcy5hbGxUYWdIZWFkZXJzID0gSlNPTi5wYXJzZSgNCiAgICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy4kc3RvcmUuZ2V0dGVycy50YWdIZWFkZXJzKQ0KICAgICAgKTsNCiAgICAgIHZhciB0YWdGaWx0ZXIgPSB0aGlzLmFsbFRhZ0hlYWRlcnMuZmlsdGVyKA0KICAgICAgICAoeCkgPT4geC50YWdoZWFkZXIgPT0gaXRlbS50YWdoZWFkZXINCiAgICAgICk7DQogICAgICBpZiAodGFnRmlsdGVyLmxlbmd0aCA9PSAwKSByZXR1cm47DQogICAgICB2YXIgdGFnMkZpbHRlciA9IHRhZ0ZpbHRlclswXS5ncm91cDEuZmlsdGVyKA0KICAgICAgICAoeCkgPT4geC5ncm91cDFuYW1lID09IGl0ZW0uZ3JvdXAxDQogICAgICApOw0KICAgICAgaWYgKHRhZzJGaWx0ZXIubGVuZ3RoID09IDApIHJldHVybjsNCiAgICAgIHZhciB0YWczRmlsdGVyID0gdGFnMkZpbHRlclswXS5ncm91cDIuZmlsdGVyKA0KICAgICAgICAoeCkgPT4geC5ncm91cDJuYW1lID09IGl0ZW0uZ3JvdXAyDQogICAgICApOw0KICAgICAgaWYgKHRhZzNGaWx0ZXIubGVuZ3RoICE9IDApIHsNCiAgICAgICAgdGFnM0ZpbHRlclswXS5ncm91cDMuZm9yRWFjaCgoZWxlbWVudCkgPT4gew0KICAgICAgICAgIGdyb3VwMS5wdXNoKGVsZW1lbnQpOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICAgIHRoaXMudGVtcFNlbGVjdCA9IGdyb3VwMTsNCiAgICB9LA0KICAgIGdldEdyb3VwMUl0ZW1zKGl0ZW0pIHsNCiAgICAgIGxldCBncm91cDEgPSBbXTsNCiAgICAgIHRoaXMuYWxsVGFnSGVhZGVycyA9IEpTT04ucGFyc2UoDQogICAgICAgIEpTT04uc3RyaW5naWZ5KHRoaXMuJHN0b3JlLmdldHRlcnMudGFnSGVhZGVycykNCiAgICAgICk7DQogICAgICB2YXIgdGFnRmlsdGVyID0gdGhpcy5hbGxUYWdIZWFkZXJzLmZpbHRlcigoeCkgPT4geC50YWdoZWFkZXIgPT0gaXRlbSk7DQogICAgICB0YWdGaWx0ZXJbMF0uZ3JvdXAxLmZvckVhY2goKGVsZW1lbnQpID0+IHsNCiAgICAgICAgZ3JvdXAxLnB1c2goZWxlbWVudC5ncm91cDFuYW1lKTsNCiAgICAgIH0pOw0KDQogICAgICB0aGlzLnRlbXBTZWxlY3QgPSBncm91cDE7DQogICAgfSwNCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW51c2VkLXZhcnMNCiAgICBhc3luYyBnZXRUYWdnaW5nVHJlZURhdGEoaWQpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIHZhciByZXMgPSBhd2FpdCB0aGlzLiRhcGlTZXJ2aWNlLmdldChgL3RhZ2dpbmd0cmVlL2J5Y29tcGFueS8xYCk7DQogICAgICAgIGlmIChyZXMgJiYgcmVzLnN0YXR1cyA9PT0gMjAwKSB7DQogICAgICAgICAgdGhpcy50YWdnaW5nVHJlZURhdGEgPSByZXMuZGF0YTsNCiAgICAgICAgICB0aGlzLmRhdGFJbXBvcnRlZCA9IHRydWU7DQogICAgICAgICAgYXdhaXQgdGhpcy5maWxsVGFnZ2luZ1RyZWVEYXRhKHJlcy5kYXRhKTsNCg0KICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMgPT09ICJlcnJvciIpIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciIpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgfQ0KICAgIH0sDQogICAgeG1sRmlsZUNoYW5nZWQoZmlsZSkgew0KICAgICAgdGhpcy54bWxGaWxlID0gZmlsZTsNCiAgICB9LA0KICAgIGFzeW5jIGZpbGxUYWdnaW5nVHJlZURhdGEoZGF0YSkgew0KICAgICAgY29uc3QgYWxsVGFnSGVhZGVycyA9IEpTT04ucGFyc2UoDQogICAgICAgIEpTT04uc3RyaW5naWZ5KHRoaXMuJHN0b3JlLmdldHRlcnMudGFnSGVhZGVycykNCiAgICAgICk7DQogICAgICBkYXRhLmZvckVhY2goKHgpID0+IHsNCiAgICAgICAgbGV0IGdyb3VwMSA9IFtdOw0KDQogICAgICAgIHZhciB0YWdGaWx0ZXIgPSBhbGxUYWdIZWFkZXJzLmZpbHRlcigocm93KSA9PiByb3cuZ3JvdXAxID09IHguZ3JvdXAxKTsNCiAgICAgICAgaWYgKHRhZ0ZpbHRlci5sZW5ndGggPT09IDApIHsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgZ3JvdXAxLnB1c2godGFnRmlsdGVyWzBdLmdyb3VwMSk7DQogICAgICAgIGlmIChncm91cDEubGVuZ3RoID4gMCkgew0KICAgICAgICAgIGxldCBncm91cDIgPSBbXTsNCg0KICAgICAgICAgIGlmICh0YWdGaWx0ZXIubGVuZ3RoICE9IDApIHsNCiAgICAgICAgICAgIHRhZ0ZpbHRlclswXS5ncm91cDIuZm9yRWFjaCgoZWxlbWVudCkgPT4gew0KICAgICAgICAgICAgICBncm91cDIucHVzaChlbGVtZW50Lmdyb3VwMm5hbWUpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBpZiAoZ3JvdXAyLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgbGV0IGdyb3VwMyA9IFtdOw0KICAgICAgICAgICAgICB0aGlzLnRlbXBUcmVlR3JvdXAyQXJyeWF5LnB1c2goeyBpZDogeC5pZCwgZ3JvdXAyOiBncm91cDIgfSk7DQogICAgICAgICAgICAgIHZhciB0YWczRmlsdGVyID0gdGFnRmlsdGVyWzBdLmdyb3VwMi5maWx0ZXIoDQogICAgICAgICAgICAgICAgKHJvdykgPT4gcm93Lmdyb3VwMm5hbWUgPT0geC5ncm91cDINCiAgICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICAgaWYgKHRhZzNGaWx0ZXIubGVuZ3RoICE9IDApIHsNCiAgICAgICAgICAgICAgICB0YWczRmlsdGVyWzBdLmdyb3VwMy5mb3JFYWNoKChlbGVtZW50KSA9PiB7DQogICAgICAgICAgICAgICAgICBncm91cDMucHVzaChlbGVtZW50KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICBpZiAoZ3JvdXAzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgICB0aGlzLnRlbXBUcmVlR3JvdXAzQXJyeWF5LnB1c2goeyBpZDogeC5pZCwgZ3JvdXAzOiBncm91cDMgfSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgYXN5bmMgZmlsbExlZGdlckRhdGEoZGF0YSkgew0KICAgICAgY29uc3QgYWxsVGFnSGVhZGVycyA9IEpTT04ucGFyc2UoDQogICAgICAgIEpTT04uc3RyaW5naWZ5KHRoaXMuJHN0b3JlLmdldHRlcnMudGFnSGVhZGVycykNCiAgICAgICk7DQogICAgICBkYXRhLmZvckVhY2goKHgpID0+IHsNCiAgICAgICAgaWYgKHBhcnNlSW50KHhbImNsb3NpbmdiYWwiXSkgPCAwKSB7DQogICAgICAgICAgeFsiZHJjciJdID0gIkNyIjsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB4WyJkcmNyIl0gPSAiRHIiOw0KICAgICAgICB9DQogICAgICAgIC8vZGVidWdnZXIgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1kZWJ1Z2dlcg0KICAgICAgICBsZXQgZ3JvdXAxID0gW107DQoNCiAgICAgICAgdmFyIHRhZ0ZpbHRlciA9IGFsbFRhZ0hlYWRlcnMuZmlsdGVyKChyb3cpID0+IHJvdy5ncm91cDEgPT0geC5ncm91cDEpOw0KICAgICAgICBpZiAodGFnRmlsdGVyLmxlbmd0aCA9PSAwKSB7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGdyb3VwMS5wdXNoKHRhZ0ZpbHRlclswXS5ncm91cDEpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGdyb3VwMS5sZW5ndGggPiAwKSB7DQogICAgICAgICAgbGV0IGdyb3VwMiA9IFtdOw0KICAgICAgICAgIHRoaXMudGVtcEdyb3VwMUFycnlheS5wdXNoKHsgbGVkZ2VyaWQ6IHgubGVkZ2VyaWQsIGdyb3VwMTogZ3JvdXAxIH0pOw0KICAgICAgICAgIHZhciB0YWcyRmlsdGVyID0gdGFnRmlsdGVyLmZpbHRlcigocm93KSA9PiByb3cuZ3JvdXAxID09IHguZ3JvdXAxKTsNCiAgICAgICAgICBpZiAodGFnMkZpbHRlci5sZW5ndGggIT0gMCkgew0KICAgICAgICAgICAgdGFnMkZpbHRlclswXS5ncm91cDIuZm9yRWFjaCgoZWxlbWVudCkgPT4gew0KICAgICAgICAgICAgICBncm91cDIucHVzaChlbGVtZW50Lmdyb3VwMm5hbWUpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBpZiAoZ3JvdXAyLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgICAgbGV0IGdyb3VwMyA9IFtdOw0KICAgICAgICAgICAgICB0aGlzLnRlbXBHcm91cDJBcnJ5YXkucHVzaCh7DQogICAgICAgICAgICAgICAgbGVkZ2VyaWQ6IHgubGVkZ2VyaWQsDQogICAgICAgICAgICAgICAgZ3JvdXAyOiBncm91cDIsDQogICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICB2YXIgdGFnM0ZpbHRlciA9IHRhZzJGaWx0ZXJbMF0uZ3JvdXAyLmZpbHRlcigNCiAgICAgICAgICAgICAgICAocm93KSA9PiByb3cuZ3JvdXAybmFtZSA9PSB4Lmdyb3VwMg0KICAgICAgICAgICAgICApOw0KICAgICAgICAgICAgICBpZiAodGFnM0ZpbHRlci5sZW5ndGggIT0gMCkgew0KICAgICAgICAgICAgICAgIHRhZzNGaWx0ZXJbMF0uZ3JvdXAzLmZvckVhY2goKGVsZW1lbnQpID0+IHsNCiAgICAgICAgICAgICAgICAgIGdyb3VwMy5wdXNoKGVsZW1lbnQpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGlmIChncm91cDMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICAgIHRoaXMudGVtcEdyb3VwM0FycnlheS5wdXNoKHsNCiAgICAgICAgICAgICAgICAgIGxlZGdlcmlkOiB4LmxlZGdlcmlkLA0KICAgICAgICAgICAgICAgICAgZ3JvdXAzOiBncm91cDMsDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgYXN5bmMgc3VibWl0WG1sKCkgew0KICAgICAgYXdhaXQgdGhpcy5nZXRBbGxMZWRnZXJEYXRhKHRoaXMuc2VsZWN0ZWRDb21wYW55KTsNCiAgICAgIHRoaXMuc2hvd1hNTERpYWxvZ3VlID0gZmFsc2U7DQogICAgICBsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsNCg0KICAgICAgZm9ybURhdGEuYXBwZW5kKCJjb21wYW55aWQiLCB0aGlzLnNlbGVjdGVkQ29tcGFueSk7DQogICAgICBmb3JtRGF0YS5hcHBlbmQoInRhbGx5eG1sIiwgdGhpcy54bWxGaWxlKTsNCiAgICAgIHRyeSB7DQogICAgICAgIHZhciByZXMgPSBhd2FpdCB0aGlzLiRhcGlTZXJ2aWNlLnBvc3QoDQogICAgICAgICAgIi9sZWRnZXIvdXBsb2FkL3VwbG9hZHRhbGx5eG1sIiwNCiAgICAgICAgICBmb3JtRGF0YSwNCiAgICAgICAgICB7DQogICAgICAgICAgICBoZWFkZXJzOiB7DQogICAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAibXVsdGlwYXJ0L2Zvcm0tZGF0YSIsDQogICAgICAgICAgICB9LA0KICAgICAgICAgIH0NCiAgICAgICAgKTsNCg0KICAgICAgICBpZiAocmVzICYmIHJlcy5zdGF0dXMgPT09IDIwMCkgew0KICAgICAgICAgIHRoaXMuc2hvd1hNTERpYWxvZ3VlID0gZmFsc2U7DQogICAgICAgICAgLy8gYXdhaXQgIHRoaXMuZ2V0QWxsTGVkZ2VyRGF0YSh0aGlzLnNlbGVjdGVkQ29tcGFueSk7DQoNCiAgICAgICAgICBpZiAocmVzLmRhdGEuc3RhdHVzID09PSAiZXJyb3IiKSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZygiZXJyb3IiKTsNCiAgICAgICAgICAgIHRoaXMuc2hvd1hNTERpYWxvZ3VlID0gZmFsc2U7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9IGNhdGNoIChlcnJvcikgew0KICAgICAgICAvL3RoaXMuc2hvd0Vycm9yKCJVbmFibGUgdG8gR2V0IENvbXBhbnkgRGV0YWlscyIpOw0KICAgICAgfQ0KICAgIH0sDQogICAgY2hhbmdlTGVkZ2VyR3JvdXAoaWQsIGZpZWxkLCB2YWx1ZSkgew0KICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLnRhZ2dlZExlZGdlckRhdGEpIHsNCiAgICAgICAgaWYgKHRoaXMudGFnZ2VkTGVkZ2VyRGF0YVtpXS5sZWRnZXJpZCA9PSBpZCkgew0KICAgICAgICAgIHRoaXMudGFnZ2VkTGVkZ2VyRGF0YVtpXVtmaWVsZF0gPSB2YWx1ZTsNCiAgICAgICAgICBicmVhazsgLy9TdG9wIHRoaXMgbG9vcCwgd2UgZm91bmQgaXQhDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIGNoYW5nZVRhZ2dpbmdUcmVlR3JvdXAoaWQsIGZpZWxkLCB2YWx1ZSkgew0KICAgICAgZm9yICh2YXIgaSBpbiB0aGlzLnRhZ2dpbmdUcmVlRGF0YSkgew0KICAgICAgICBpZiAodGhpcy50YWdnaW5nVHJlZURhdGFbaV0uaWQgPT0gaWQpIHsNCiAgICAgICAgICB0aGlzLnRhZ2dpbmdUcmVlRGF0YVtpXVtmaWVsZF0gPSB2YWx1ZTsNCiAgICAgICAgICBicmVhazsgLy9TdG9wIHRoaXMgbG9vcCwgd2UgZm91bmQgaXQhDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIGZpbHRlclRhZ2dpbmdUcmVlKHZhbHVlKSB7DQogICAgICB0aGlzLmZpbHRlcmVkVGFnZ2luZ1RyZWVEYXRhID0gdGhpcy50YWdnaW5nVHJlZURhdGEuZmlsdGVyKA0KICAgICAgICAoeCkgPT4geC5ncm91cDEgPT0gdmFsdWUNCiAgICAgICk7DQogICAgfSwNCiAgICBncm91cENoYW5nZWQodmFsdWUsIHJvdywgZ3JvdXApIHsNCiAgICAgIHRoaXMuY2hhbmdlTGVkZ2VyR3JvdXAocm93LmxlZGdlcmlkLCBncm91cCwgdmFsdWUpOw0KICAgICAgY29uc29sZS5sb2codGhpcy50YWdnZWRMZWRnZXJEYXRhKTsNCiAgICB9LA0KICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycw0KICAgIGFzeW5jIGdldEFsbExlZGdlckRhdGEoY29tcGFueUlEKSB7DQogICAgICB0cnkgew0KICAgICAgICB2YXIgcmVzID0gYXdhaXQgdGhpcy4kYXBpU2VydmljZS5nZXQoYC9wcm9jZXNzaW5nL3RhZ2dlZGxlZGdlci8keyIxIn1gKTsNCiAgICAgICAgaWYgKHJlcyAmJiByZXMuc3RhdHVzID09PSAyMDApIHsNCiAgICAgICAgICB0aGlzLmRhdGFJbXBvcnRlZCA9IHRydWU7DQogICAgICAgICAgdGhpcy50YWdnZWRMZWRnZXJEYXRhID0gcmVzLmRhdGE7DQogICAgICAgICAgdGhpcy50YWdnZWRMZWRnZXJEYXRhID0gdGhpcy50YWdnZWRMZWRnZXJEYXRhLmZpbHRlcigNCiAgICAgICAgICAgICh4KSA9PiB4Lmdyb3VwMSA9PSBudWxsDQogICAgICAgICAgKTsNCiAgICAgICAgICBhd2FpdCB0aGlzLmZpbGxMZWRnZXJEYXRhKHJlcy5kYXRhKTsNCg0KICAgICAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMgPT09ICJlcnJvciIpIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciIpOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgLy8gdGhpcy5zaG93RXJyb3IoIlVuYWJsZSB0byBHZXQgQ29tcGFueSBEZXRhaWxzIik7DQogICAgICB9DQogICAgfSwNCiAgICBhZGREb2N1bWVudCh2YWwpIHsNCiAgICAgIGlmICh2YWwgPT0gInhtbCIpIHsNCiAgICAgICAgdGhpcy4kcmVmcy50YWxseVVwbG9hZGVyLiRyZWZzLmlucHV0LmNsaWNrKCk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLiRyZWZzLnVwbG9hZGVyLiRyZWZzLmlucHV0LmNsaWNrKCk7DQogICAgICB9DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["TaggingLanding.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TaggingLanding.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <v-container class=\"mainDiv\" style=\"margin-top: 50px\">\r\n    <v-dialog\r\n      content-class=\"my-custom-dialog\"\r\n      v-model=\"tallyIntegrationDialog\"\r\n      width=\"75vw\"\r\n      transition=\"dialog-bottom-transition\"\r\n    >\r\n    <div style=\"height:75vh;width:98%\">\r\n      <h1\r\n        class=\"text-h5 lighten-2 popup-allotment-title\"\r\n        style=\"font-size: 20px !important\"\r\n      >\r\n      STEPS TO Integrate\r\n      </h1>\r\n      <v-divider class=\"blueUline2\"></v-divider>\r\n      <div style=\"margin: 15px 0px;\">Because of Browser securities Issues ,we cant directly access the local tally system to import Data from it. </div>\r\n    <div style=\"margin: 15px 0px;\">Please follow the below two step to achive the Local tally integration</div>\r\n    <v-row>\r\n      <v-col xs5 style=\"height: 50vh;margin-left: 20px;margin-top: 10px;\">\r\n        <img src=\"https://www.keycdn.com/img/support/cors.png\" width=\"100%\" height=\"100%\" alt=\"no image found\"/>\r\n        </v-col>\r\n    <v-col xs6 style=\"display: flex;flex-direction: column;justify-content: center;text-align: start;\">\r\n      <div style=\"margin: 10px;margin-left: 50px;\">Step 1: Add the below extension in your browser</div>\r\n      <div style=\"margin: 10px;margin-bottom: 50px;margin-left: 50px;\"><a target=\"_blank\" href=\"https://chrome.google.com/webstore/detail/cors-unblock/lfhmikememgdcahcdlaciloancbhjino\">Tally Browser Extension</a></div>\r\n      <div style=\"margin: 10px;margin-left: 50px;\">Step 2: Download and open the file to import from tally </div>\r\n      <div style=\"margin: 10px;margin-left: 50px;cursor: pointer;\" @click=\"downLoadFile\"><p style=\"text-decoration-line: underline;color: #1976d2;cursor: pointer;\" >Download tally integration file</p></div>\r\n      <div style=\"margin: 10px;margin-left: 50px;cursor: pointer;\" @click=\"useExistingFile\"><v-btn\r\n            class=\"ma-2\"\r\n            style=\"\r\n              background-color: #03a9f4 !important;\r\n    border-color: #03a9f4;\r\n    padding: 2px 0px;\r\n    width: 38%;\r\n    margin: 0px !important;\r\n    margin-top: -9px !important;\r\n    color: #fff;\r\n            \"\r\n            color=\"#03a9f4\"\r\n          >\r\n           Or Use Existing file\r\n          </v-btn></div>\r\n    </v-col>        \r\n    </v-row>\r\n    </div>\r\n    </v-dialog>\r\n    <v-row>\r\n      <v-col cols=\"12\">\r\n        <v-row\r\n          class=\"topRow alig\"\r\n          v-bind:class=\"{\r\n            minTop: activeUploadOption == 'tally',\r\n            maxTop: activeUploadOption != 'tally',\r\n          }\"\r\n        >\r\n          <v-col cols=\"5\" class=\"ma-1 marg\" align=\"right\">\r\n            <v-btn\r\n              large\r\n              @click=\"UploadOptionSelected('tally')\"\r\n              color=\"white\"\r\n              class=\"btn1 btn2 pa-6\"\r\n              :style=\"{\r\n                visibility: uploadOptionSelected ? 'hidden' : 'visible',\r\n              }\"\r\n              >Import from Tally</v-btn\r\n            >\r\n          </v-col>\r\n          <v-col align=\"left\" cols=\"5\" class=\"ma-1\">\r\n            <v-btn\r\n              large\r\n              @click=\"UploadOptionSelected('excel')\"\r\n              color=\"white\"\r\n              class=\"btn1 btn2 pa-6\"\r\n              :style=\"{\r\n                visibility: uploadOptionSelected ? 'hidden' : 'visible',\r\n              }\"\r\n              >Import from Excel</v-btn\r\n            >\r\n          </v-col>\r\n        </v-row>\r\n      </v-col>\r\n\r\n      <v-col cols=\"6\">\r\n        <img\r\n          src=\"../assets/sukuman.png\"\r\n          alt=\"sukman\"\r\n          height=\"400\"\r\n          width=\"390\"\r\n          class=\"img-logo\"\r\n        />\r\n      </v-col>\r\n      <v-col cols=\"6\">\r\n        <v-row v-if=\"activeUploadOption == 'tally'\">\r\n          <v-col\r\n            align=\"left\"\r\n            style=\"padding-left: 0px; padding-bottom: 20px\"\r\n            cols=\"12\"\r\n          >\r\n            <h4 style=\"margin-bottom: 10px\">\r\n              <u style=\"text-decoration: none; margin: 3px\">\r\n                Import From Tally</u\r\n              >\r\n            </h4>\r\n          </v-col>\r\n          <v-col cols=\"12\" class=\"pa-1\">\r\n            <v-select\r\n              dense\r\n              outlined\r\n              label=\"Name of the Organization\"\r\n              v-model=\"selectedCompany\"\r\n              :items=\"companies\"\r\n              item-text=\"name\"\r\n              item-value=\"id\"\r\n            ></v-select>\r\n          </v-col>\r\n          <v-col cols=\"6\" class=\"LabelText pa-1\">\r\n            <v-menu\r\n              :close-on-content-click=\"true\"\r\n              :nudge-right=\"40\"\r\n              transition=\"scale-transition\"\r\n              offset-y\r\n            >\r\n              <template v-slot:activator=\"{ on, attrs }\">\r\n                <v-text-field\r\n                  autocomplete=\"off\"\r\n                  :value=\"fromPeriod\"\r\n                  outlined\r\n                  style=\"width: 95%\"\r\n                  label=\"Period From\"\r\n                  append-icon=\"mdi-calendar\"\r\n                  readonly\r\n                  dense\r\n                  v-bind=\"attrs\"\r\n                  v-on=\"on\"\r\n                ></v-text-field>\r\n              </template>\r\n              <v-date-picker\r\n                color=\"#006B6A\"\r\n                label=\"From Period\"\r\n                v-model=\"fromPeriod\"\r\n                outlined\r\n                dense\r\n              ></v-date-picker>\r\n            </v-menu>\r\n          </v-col>\r\n          <v-col cols=\"6\" class=\"LabelText pa-1\">\r\n            <v-menu\r\n              :close-on-content-click=\"true\"\r\n              :nudge-right=\"40\"\r\n              transition=\"scale-transition\"\r\n              offset-y\r\n            >\r\n              <template v-slot:activator=\"{ on, attrs }\">\r\n                <v-text-field\r\n                  autocomplete=\"off\"\r\n                  :value=\"fromPeriod\"\r\n                  outlined\r\n                  label=\"Period To\"\r\n                  style=\"width: 95%; float: right\"\r\n                  append-icon=\"mdi-calendar\"\r\n                  readonly\r\n                  dense\r\n                  v-bind=\"attrs\"\r\n                  v-on=\"on\"\r\n                ></v-text-field>\r\n              </template>\r\n              <v-date-picker\r\n                color=\"#006B6A\"\r\n                label=\"From Period\"\r\n                v-model=\"fromPeriod\"\r\n                outlined\r\n                dense\r\n              ></v-date-picker>\r\n            </v-menu>\r\n          </v-col>\r\n          <v-col cols=\"6\" class=\"pa-1\">\r\n            <v-select\r\n              style=\"width: 95%\"\r\n              dense\r\n              outlined\r\n              label=\"Import Level\"\r\n              v-model=\"selectedImportLevel\"\r\n              :items=\"['Closing Balance', 'Opening and Closing Balance']\"\r\n            ></v-select>\r\n          </v-col>\r\n          <v-col cols=\"12\" align=\"right\">\r\n            <v-btn class=\"primary ma-2\" color=\"white\" @click=\"importFromTally\">\r\n              Import\r\n            </v-btn>\r\n            <v-btn class=\"ma-2\" outlined color=\"primary\" @click=\"cancelImport\">\r\n              Cancel\r\n            </v-btn>\r\n          </v-col>\r\n        </v-row>\r\n      </v-col>\r\n    </v-row>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport store from \"../store\";\r\nimport moment from \"moment\";\r\n// var convert = require('xml-js');\r\nexport default {\r\n  name: \"TaggingHome\",\r\n  data() {\r\n    return {\r\n      tallyIntegrationDialog:false,\r\n      activeUploadOption: \"\",\r\n      uploadOptionSelected: false,\r\n      fromPeriod: \"\",\r\n      selectedCompany: \"\",\r\n      taggedLedgerData: [],\r\n      companies: [\"BSY Private Limited\"],\r\n    };\r\n  },\r\n  async mounted() {\r\n    this.allTagHeaders = this.$store.getters.tagHeaders;\r\n   },\r\n\r\n  methods: {\r\n    async checkStatus(id) {\r\n      var res = await this.$apiService.post(\"/taggingUplStatus/get\", {\r\n        taggingUplStatusId: id.data,\r\n        companyId: 21,\r\n      });\r\n      // console.log(res.data.data)\r\n      store.commit(\"SET_IS_LOADING\", true);\r\n      if (res && res.data.data) {\r\n        clearInterval(this.myVar);\r\n        store.commit(\"SET_IS_LOADING\", false);\r\n        this.$router.push({ path: \"/taggingdisplay\" });\r\n      }\r\n    },\r\n    async importFromTally() {\r\n      this.$router.push({ path: \"/taggingdisplay\" });\r\n      //--\r\n      //  store.commit('SET_IS_LOADING', true);\r\n      //create entry in status table\r\n      // var statusPayload ={\"companyId\": \"21\",\"period_from\": \"2020-08-07\",\"period_to\": \"2021-08-07\"};\r\n      // var res = await this.$apiService.post(\"/taggingUplStatus\", statusPayload);\r\n      //   if (res && res.status === 200) {\r\n      //     store.commit('SET_IS_LOADING', true);\r\n      //     this.myVar = setInterval(()=>this.checkStatus(res.data), 3000);\r\n      //   }\r\n      // fetch(\"https://jsonip.com/\").then(val=>val.json()).then(async val=>{\r\n      // console.log(val,\"suc\",{\"id\":val.ip});\r\n      //    var res = await this.$apiService.post(\"/tally/getcompany\", {\"ip\":val.ip});\r\n      //   if (res && res.status === 200) {\r\n      //     console.log(res.data.data.elements[0].elements[0].elements[0].elements,\"list of comapnies\")\r\n      //   }\r\n\r\n      // }\r\n      // ).catch(val=>console.log(val,\"failed\"))\r\n      // var res = await this.$apiService.post(\"/tally/getcompany\", statusPayload);\r\n      // if (res && res.status === 200) {\r\n      //   store.commit('SET_IS_LOADING', true);\r\n      //   this.myVar = setInterval(()=>this.checkStatus(res.data), 3000);\r\n      // }\r\n      //--\r\n      // var parentArray=[];\r\n      //   try{\r\n      //       var res = await this.$apiService.get(`/processing/taggedledger/${'1'}`);\r\n      //       if(res&&res.status === 200) {\r\n\r\n      //           this.taggedLedgerData=res.data;\r\n      //           if(res.data.length>0){\r\n      //              let unique = [...new Set(res.data.map(item => item.parent))];\r\n      //              unique.forEach(row=>{\r\n      //                parentArray.push({name:row,validate:false})\r\n      //              })\r\n\r\n      //              this.$router.push({name: 'TaggingDsiplay', params : { displayData: res.data,parent:parentArray}});\r\n\r\n      //           }\r\n\r\n      //         if (res.data.status === \"error\") {\r\n      //   console.log(\"error\");\r\n      //         }\r\n\r\n      //   }\r\n\r\n      //   }\r\n      //   catch(error) {\r\n      //    // this.showError(\"Unable to Get Company Details\");\r\n      //      }\r\n    },\r\n    cancelImport() {\r\n      this.uploadOptionSelected = false;\r\n      this.activeUploadOption = \"\";\r\n    },\r\n    async startListerning(value){\r\n      store.commit('SET_IS_LOADING', true); \r\n      console.log(value,\"val1\")\r\n      var watch = setInterval(async () => {\r\n        fetch(`http://localhost:8080/tallyintegration/register/get?registerId=${value.data.registerId}`).then(res=>res.json()).then(async res=>{\r\n      if (res ) {\r\n        console.log(res);\r\n        if(res.data){\r\n          clearInterval(watch);\r\n        store.commit('SET_IS_LOADING', true); \r\n        var idf = JSON.parse(sessionStorage.getItem(\"fina\")).id;\r\n            //get reporting periodid and company type\r\n        var resRequiredDetails = await this.$apiService.get('ledger/requiredvalues?financialId='+idf);\r\n        if(resRequiredDetails&&resRequiredDetails.status === 200) {  \r\n          sessionStorage.setItem(\"reportId\",resRequiredDetails.data.data.reportingPeriodData);\r\n          sessionStorage.setItem(\"companyType\",resRequiredDetails.data.data.companyType);\r\n          sessionStorage.setItem(\"taggingLevel\",resRequiredDetails.data.data.taggingLevel);\r\n          setTimeout(() => {\r\n            this.$router.push({ path: \"/taggingdisplay\" });\r\n          }, 100);  \r\n        }\r\n        }\r\n      }    \r\n      else{\r\n        clearInterval(watch);\r\n      }\r\n        })\r\n\r\n      }, 10000);\r\n    },\r\n    async downLoadFile(){\r\n    var time = moment().valueOf();\r\n      // fetch('http://13.234.27.65:8080/index?time='+time)\r\n      fetch('http://localhost:8080/tallyintegration?time='+time)\r\n  .then(resp => resp.blob())\r\n  .then(blob => {\r\n    const url = window.URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.style.display = 'none';\r\n    a.href = url;\r\n    // the filename you want\r\n    a.download = 'tallyIntegration.html';\r\n    // a.target = \"_blank\";\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    window.URL.revokeObjectURL(url);\r\n  })\r\n  .catch(() => alert('try again..'));\r\n  this.tallyIntegrationDialog = false;\r\n  store.commit('SET_IS_LOADING', true); \r\n  var res = await this.$apiService.post(`/tallyintegration/register`,{userId:JSON.parse(sessionStorage.userDetails).data.id,companyId:JSON.parse(sessionStorage.fina).company_id,financialId:JSON.parse(sessionStorage.fina).id,otherDetails:JSON.parse(sessionStorage.fina)});\r\n      if (res && res.status === 200) {\r\n        this.startListerning(res);\r\n      }\r\n    },\r\n   async useExistingFile(){\r\n     this.tallyIntegrationDialog = false;\r\n        store.commit('SET_IS_LOADING', true); \r\n  var res = await this.$apiService.post(`/tallyintegration/register`,{userId:JSON.parse(sessionStorage.userDetails).data.id,companyId:JSON.parse(sessionStorage.fina).company_id,financialId:JSON.parse(sessionStorage.fina).id,otherDetails:JSON.parse(sessionStorage.fina)});\r\n      if (res && res.status === 200) {\r\n        this.startListerning(res);\r\n      }\r\n    },\r\n    UploadOptionSelected(val) {\r\n      console.log(val,\"val\")\r\n      // this.uploadOptionSelected = true;\r\n      // this.activeUploadOption = val;\r\n      this.tallyIntegrationDialog = true;\r\n  //     if(val == \"tally\"){\r\n  //             var time = moment().valueOf();\r\n  //     // fetch('http://13.234.27.65:8080/index?time='+time)\r\n  //     fetch('http://localhost:8080/index?time='+time)\r\n  // .then(resp => resp.blob())\r\n  // .then(blob => {\r\n  //   const url = window.URL.createObjectURL(blob);\r\n  //   const a = document.createElement('a');\r\n  //   a.style.display = 'none';\r\n  //   a.href = url;\r\n  //   // the filename you want\r\n  //   a.download = 'tallyIntegration.html';\r\n  //   // a.target = \"_blank\";\r\n  //   document.body.appendChild(a);\r\n  //   a.click();\r\n  //   window.URL.revokeObjectURL(url);\r\n  // })\r\n  // .catch(() => alert('oh no!'));\r\n  //     }\r\n    },\r\n    async saveAllLedgers() {\r\n      var res = await this.$apiService.put(\r\n        `processing/tagging/update`,\r\n        this.taggedLedgerData\r\n      );\r\n      if (res && res.status === 200) {\r\n        this.showSuccess(res.data.message);\r\n        this.$refs.table.refresh();\r\n        await this.getAllLedgerData(this.selectedCompany);\r\n        await this.getTaggingTreeData();\r\n        console.log(\"success\");\r\n      }\r\n      if (res.data.status === \"error\") {\r\n        console.log(\"error\");\r\n      }\r\n    },\r\n    async onTagTreeSubmit(data) {\r\n      console.log(data);\r\n      this.$refs.treeTable.refresh();\r\n      this.filterTaggingTree(this.selectedTag);\r\n    },\r\n    async onLedgerSubmit(data) {\r\n      let putData = [];\r\n      putData.push(data);\r\n      var res = await this.$apiService.put(\r\n        `processing/tagging/update`,\r\n        putData\r\n      );\r\n      if (res && res.status === 200) {\r\n        this.showSuccess(res.data.message);\r\n        this.$refs.table.refresh();\r\n        await this.getAllLedgerData(this.selectedCompany);\r\n        await this.getTaggingTreeData();\r\n        console.log(\"success\");\r\n      }\r\n      if (res.data.status === \"error\") {\r\n        console.log(\"error\");\r\n      }\r\n      console.log(data);\r\n    },\r\n    ledgerGroup1Changed(value) {\r\n      let group2 = [];\r\n      this.allTagHeaders = JSON.parse(\r\n        JSON.stringify(this.$store.getters.tagHeaders)\r\n      );\r\n      var tagFilter = this.allTagHeaders.filter(\r\n        (x) => x.group1 == value.group1\r\n      );\r\n      if (tagFilter.length == 0) return;\r\n\r\n      if (tagFilter.length != 0) {\r\n        tagFilter[0].group2.forEach((element) => {\r\n          group2.push(element.group2name);\r\n        });\r\n      }\r\n      if (group2.length > 0) {\r\n        if (\r\n          this.tempGroup2Arryay.filter((x) => x.ledgerid == value.ledgerid)\r\n            .length == 0\r\n        ) {\r\n          this.tempGroup2Arryay.push({\r\n            ledgerid: value.ledgerid,\r\n            group2: group2,\r\n          });\r\n        } else {\r\n          this.tempGroup2Arryay.filter(\r\n            (x) => x.ledgerid == value.ledgerid\r\n          )[0].group2 = group2;\r\n          this.taggedLedgerData.filter(\r\n            (x) => x.ledgerid == value.ledgerid\r\n          )[0].group2 = null;\r\n          //console.log(this.taggedLedgerData.filter(x=>x.ledgerid==value.ledgerid)[0],\"shum\")\r\n        }\r\n      }\r\n      this.$refs.table.refresh();\r\n    },\r\n\r\n    ledgerGroup2Changed(item) {\r\n      debugger; // eslint-disable-line no-debugger\r\n      let group3 = [];\r\n      this.allTagHeaders = JSON.parse(\r\n        JSON.stringify(this.$store.getters.tagHeaders)\r\n      );\r\n      var tagFilter = this.allTagHeaders.filter((x) => x.group1 == item.group1);\r\n      if (tagFilter.length == 0) return;\r\n\r\n      var tag3Filter = tagFilter[0].group2.filter(\r\n        (x) => x.group2name == item.group2\r\n      );\r\n      if (tag3Filter.length != 0) {\r\n        tag3Filter[0].group3.forEach((element) => {\r\n          group3.push(element);\r\n        });\r\n      }\r\n      if (group3.length > 0) {\r\n        if (\r\n          this.tempGroup3Arryay.filter((x) => x.ledgerid == item.ledgerid)\r\n            .length == 0\r\n        ) {\r\n          this.tempGroup3Arryay.push({\r\n            ledgerid: item.ledgerid,\r\n            group3: group3,\r\n          });\r\n        } else {\r\n          this.tempGroup3Arryay.filter(\r\n            (x) => x.ledgerid == item.ledgerid\r\n          )[0].group3 = group3;\r\n          this.taggedLedgerData.filter(\r\n            (x) => x.ledgerid == item.ledgerid\r\n          )[0].group3 = null;\r\n          //console.log(this.taggedLedgerData.filter(x=>x.ledgerid==value.ledgerid)[0],\"shum\")\r\n        }\r\n      }\r\n      this.$refs.table.refresh();\r\n    },\r\n    ledgerTagChanged(value) {\r\n      console.log(value, \"ledgerTagChanged\");\r\n      let group1 = [];\r\n      this.allTagHeaders = JSON.parse(\r\n        JSON.stringify(this.$store.getters.tagHeaders)\r\n      );\r\n      var tagFilter = this.allTagHeaders.filter(\r\n        (x) => x.tagheader == value.item.taggingheader\r\n      );\r\n      tagFilter[0].group1.forEach((element) => {\r\n        group1.push(element.group1name);\r\n      });\r\n      if (group1.length > 0) {\r\n        if (\r\n          this.tempGroup1Arryay.filter((x) => x.ledgerid == value.item.ledgerid)\r\n            .length == 0\r\n        ) {\r\n          this.tempGroup1Arryay.push({\r\n            ledgerid: value.item.ledgerid,\r\n            group1: group1,\r\n          });\r\n        } else {\r\n          this.tempGroup1Arryay.filter(\r\n            (x) => x.ledgerid == value.item.ledgerid\r\n          )[0].group1 = group1;\r\n          this.taggedLedgerData.filter(\r\n            (x) => x.ledgerid == value.item.ledgerid\r\n          )[0].group1 = null;\r\n          console.log(\r\n            this.taggedLedgerData.filter(\r\n              (x) => x.ledgerid == value.item.ledgerid\r\n            )[0],\r\n            \"shum\"\r\n          );\r\n        }\r\n\r\n        this.$refs.table.refresh();\r\n      }\r\n      console.log(\r\n        this.tempGroup1Arryay.filter(\r\n          (x) => x.ledgerid == value.item.ledgerid\r\n        )[0].group1,\r\n        \"s\"\r\n      );\r\n    },\r\n    tagTreeGroup2Changed(item) {\r\n      let group3 = [];\r\n      this.allTagHeaders = JSON.parse(\r\n        JSON.stringify(this.$store.getters.tagHeaders)\r\n      );\r\n      var tagFilter = this.allTagHeaders.filter(\r\n        (row) => row.group1 == item.group1\r\n      );\r\n      if (tagFilter.length == 0) return;\r\n\r\n      var tag3Filter = tagFilter[0].group2.filter(\r\n        (x) => x.group2name == item.group2\r\n      );\r\n      if (tag3Filter.length != 0) {\r\n        tag3Filter[0].group3.forEach((element) => {\r\n          group3.push(element);\r\n        });\r\n      }\r\n      if (group3.length > 0) {\r\n        if (\r\n          this.tempTreeGroup3Arryay.filter((x) => x.id == item.id).length == 0\r\n        ) {\r\n          this.tempTreeGroup3Arryay.push({ id: item.id, group3: group3 });\r\n        } else {\r\n          this.tempTreeGroup3Arryay.filter((x) => x.id == item.id)[0].group3 =\r\n            group3;\r\n          this.taggingTreeData.filter((x) => x.id == item.id)[0].group3 = null;\r\n          //console.log(this.taggedLedgerData.filter(x=>x.ledgerid==value.ledgerid)[0],\"shum\")\r\n        }\r\n      }\r\n      this.$refs.table.refresh();\r\n    },\r\n    tagTreeGroup1Changed(value) {\r\n      let group2 = [];\r\n      this.allTagHeaders = JSON.parse(\r\n        JSON.stringify(this.$store.getters.tagHeaders)\r\n      );\r\n      var tagFilter = this.allTagHeaders.filter(\r\n        (row) => row.group1 == value.group1\r\n      );\r\n      if (tagFilter.length == 0) return;\r\n\r\n      if (tagFilter.length != 0) {\r\n        tagFilter[0].group2.forEach((element) => {\r\n          group2.push(element.group2name);\r\n        });\r\n      }\r\n      if (group2.length > 0) {\r\n        if (\r\n          this.tempTreeGroup2Arryay.filter((x) => x.id == value.id).length == 0\r\n        ) {\r\n          this.tempTreeGroup2Arryay.push({ id: value.id, group2: group2 });\r\n        } else {\r\n          this.tempTreeGroup2Arryay.filter((x) => x.id == value.id)[0].group2 =\r\n            group2;\r\n          this.taggingTreeData.filter((x) => x.id == value.id)[0].group2 = null;\r\n          this.taggingTreeData.filter((x) => x.id == value.id)[0].group3 = null;\r\n          //console.log(this.taggedLedgerData.filter(x=>x.ledgerid==value.ledgerid)[0],\"shum\")\r\n        }\r\n      }\r\n    },\r\n    tagTreeTagChanged(value) {\r\n      let group1 = [];\r\n      this.allTagHeaders = JSON.parse(\r\n        JSON.stringify(this.$store.getters.tagHeaders)\r\n      );\r\n      var tagFilter = this.allTagHeaders.filter(\r\n        (x) => x.tagheader == value.item.tagheader\r\n      );\r\n      tagFilter[0].group1.forEach((element) => {\r\n        group1.push(element.group1name);\r\n      });\r\n      if (group1.length > 0) {\r\n        if (\r\n          this.tempTreeGroup1Arryay.filter((row) => row.id == value.item.id)\r\n            .length == 0\r\n        ) {\r\n          this.tempTreeGroup1Arryay.push({ id: value.item.id, group1: group1 });\r\n        } else {\r\n          this.tempTreeGroup1Arryay.filter(\r\n            (x) => x.ledgerid == value.item.ledgerid\r\n          )[0].group1 = group1;\r\n          this.taggingTreeData.filter((x) => x.id == value.item.id)[0].group1 =\r\n            null;\r\n          this.taggingTreeData.filter((x) => x.id == value.item.id)[0].group2 =\r\n            null;\r\n          this.taggingTreeData.filter((x) => x.id == value.item.id)[0].group3 =\r\n            null;\r\n          //console.log(this.taggedLedgerData.filter(x=>x.ledgerid==value.item.ledgerid)[0],\"shum\")\r\n        }\r\n\r\n        this.$refs.table.refresh();\r\n      }\r\n      console.log(\r\n        this.tempGroup1Arryay.filter(\r\n          (x) => x.ledgerid == value.item.ledgerid\r\n        )[0].group1,\r\n        \"s\"\r\n      );\r\n    },\r\n    async sendValue(value) {\r\n      if (value === \"all\") {\r\n        this.tagSelected = false;\r\n        this.selectedTag = \"\";\r\n      } else {\r\n        this.tagSelected = true;\r\n        if (this.taggingTreeData.length == 0) {\r\n          await this.getTaggingTreeData();\r\n          this.filterTaggingTree(value);\r\n          this.selectedTag = value;\r\n        } else {\r\n          this.filterTaggingTree(value);\r\n          this.selectedTag = value;\r\n        }\r\n      }\r\n    },\r\n    checkip(ip) {\r\n      console.log(ip, \"checkip\");\r\n    },\r\n    getGroup2Items(item) {\r\n      this.tempSelect = []; // eslint-disable-line no-debugger\r\n      let group1 = [];\r\n      this.allTagHeaders = JSON.parse(\r\n        JSON.stringify(this.$store.getters.tagHeaders)\r\n      );\r\n      var tagFilter = this.allTagHeaders.filter(\r\n        (x) => x.tagheader == item.tagheader\r\n      );\r\n      if (tagFilter.length == 0) return;\r\n      var tag2Filter = tagFilter[0].group1.filter(\r\n        (x) => x.group1name == item.group1\r\n      );\r\n      if (tag2Filter.length != 0) {\r\n        tag2Filter[0].group2.forEach((element) => {\r\n          group1.push(element.group2name);\r\n        });\r\n      }\r\n\r\n      this.tempSelect = group1;\r\n    },\r\n    getGroup3Items(item) {\r\n      this.tempSelect = []; // eslint-disable-line no-debugger\r\n      let group1 = [];\r\n      this.allTagHeaders = JSON.parse(\r\n        JSON.stringify(this.$store.getters.tagHeaders)\r\n      );\r\n      var tagFilter = this.allTagHeaders.filter(\r\n        (x) => x.tagheader == item.tagheader\r\n      );\r\n      if (tagFilter.length == 0) return;\r\n      var tag2Filter = tagFilter[0].group1.filter(\r\n        (x) => x.group1name == item.group1\r\n      );\r\n      if (tag2Filter.length == 0) return;\r\n      var tag3Filter = tag2Filter[0].group2.filter(\r\n        (x) => x.group2name == item.group2\r\n      );\r\n      if (tag3Filter.length != 0) {\r\n        tag3Filter[0].group3.forEach((element) => {\r\n          group1.push(element);\r\n        });\r\n      }\r\n      this.tempSelect = group1;\r\n    },\r\n    getGroup1Items(item) {\r\n      let group1 = [];\r\n      this.allTagHeaders = JSON.parse(\r\n        JSON.stringify(this.$store.getters.tagHeaders)\r\n      );\r\n      var tagFilter = this.allTagHeaders.filter((x) => x.tagheader == item);\r\n      tagFilter[0].group1.forEach((element) => {\r\n        group1.push(element.group1name);\r\n      });\r\n\r\n      this.tempSelect = group1;\r\n    },\r\n    // eslint-disable-next-line no-unused-vars\r\n    async getTaggingTreeData(id) {\r\n      try {\r\n        var res = await this.$apiService.get(`/taggingtree/bycompany/1`);\r\n        if (res && res.status === 200) {\r\n          this.taggingTreeData = res.data;\r\n          this.dataImported = true;\r\n          await this.fillTaggingTreeData(res.data);\r\n\r\n          if (res.data.status === \"error\") {\r\n            console.log(\"error\");\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    xmlFileChanged(file) {\r\n      this.xmlFile = file;\r\n    },\r\n    async fillTaggingTreeData(data) {\r\n      const allTagHeaders = JSON.parse(\r\n        JSON.stringify(this.$store.getters.tagHeaders)\r\n      );\r\n      data.forEach((x) => {\r\n        let group1 = [];\r\n\r\n        var tagFilter = allTagHeaders.filter((row) => row.group1 == x.group1);\r\n        if (tagFilter.length === 0) {\r\n          return;\r\n        }\r\n        group1.push(tagFilter[0].group1);\r\n        if (group1.length > 0) {\r\n          let group2 = [];\r\n\r\n          if (tagFilter.length != 0) {\r\n            tagFilter[0].group2.forEach((element) => {\r\n              group2.push(element.group2name);\r\n            });\r\n            if (group2.length > 0) {\r\n              let group3 = [];\r\n              this.tempTreeGroup2Arryay.push({ id: x.id, group2: group2 });\r\n              var tag3Filter = tagFilter[0].group2.filter(\r\n                (row) => row.group2name == x.group2\r\n              );\r\n              if (tag3Filter.length != 0) {\r\n                tag3Filter[0].group3.forEach((element) => {\r\n                  group3.push(element);\r\n                });\r\n              }\r\n              if (group3.length > 0) {\r\n                this.tempTreeGroup3Arryay.push({ id: x.id, group3: group3 });\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n    },\r\n    async fillLedgerData(data) {\r\n      const allTagHeaders = JSON.parse(\r\n        JSON.stringify(this.$store.getters.tagHeaders)\r\n      );\r\n      data.forEach((x) => {\r\n        if (parseInt(x[\"closingbal\"]) < 0) {\r\n          x[\"drcr\"] = \"Cr\";\r\n        } else {\r\n          x[\"drcr\"] = \"Dr\";\r\n        }\r\n        //debugger // eslint-disable-line no-debugger\r\n        let group1 = [];\r\n\r\n        var tagFilter = allTagHeaders.filter((row) => row.group1 == x.group1);\r\n        if (tagFilter.length == 0) {\r\n          return;\r\n        } else {\r\n          group1.push(tagFilter[0].group1);\r\n        }\r\n\r\n        if (group1.length > 0) {\r\n          let group2 = [];\r\n          this.tempGroup1Arryay.push({ ledgerid: x.ledgerid, group1: group1 });\r\n          var tag2Filter = tagFilter.filter((row) => row.group1 == x.group1);\r\n          if (tag2Filter.length != 0) {\r\n            tag2Filter[0].group2.forEach((element) => {\r\n              group2.push(element.group2name);\r\n            });\r\n            if (group2.length > 0) {\r\n              let group3 = [];\r\n              this.tempGroup2Arryay.push({\r\n                ledgerid: x.ledgerid,\r\n                group2: group2,\r\n              });\r\n              var tag3Filter = tag2Filter[0].group2.filter(\r\n                (row) => row.group2name == x.group2\r\n              );\r\n              if (tag3Filter.length != 0) {\r\n                tag3Filter[0].group3.forEach((element) => {\r\n                  group3.push(element);\r\n                });\r\n              }\r\n              if (group3.length > 0) {\r\n                this.tempGroup3Arryay.push({\r\n                  ledgerid: x.ledgerid,\r\n                  group3: group3,\r\n                });\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n    },\r\n    async submitXml() {\r\n      await this.getAllLedgerData(this.selectedCompany);\r\n      this.showXMLDialogue = false;\r\n      let formData = new FormData();\r\n\r\n      formData.append(\"companyid\", this.selectedCompany);\r\n      formData.append(\"tallyxml\", this.xmlFile);\r\n      try {\r\n        var res = await this.$apiService.post(\r\n          \"/ledger/upload/uploadtallyxml\",\r\n          formData,\r\n          {\r\n            headers: {\r\n              \"Content-Type\": \"multipart/form-data\",\r\n            },\r\n          }\r\n        );\r\n\r\n        if (res && res.status === 200) {\r\n          this.showXMLDialogue = false;\r\n          // await  this.getAllLedgerData(this.selectedCompany);\r\n\r\n          if (res.data.status === \"error\") {\r\n            console.log(\"error\");\r\n            this.showXMLDialogue = false;\r\n          }\r\n        }\r\n      } catch (error) {\r\n        //this.showError(\"Unable to Get Company Details\");\r\n      }\r\n    },\r\n    changeLedgerGroup(id, field, value) {\r\n      for (var i in this.taggedLedgerData) {\r\n        if (this.taggedLedgerData[i].ledgerid == id) {\r\n          this.taggedLedgerData[i][field] = value;\r\n          break; //Stop this loop, we found it!\r\n        }\r\n      }\r\n    },\r\n    changeTaggingTreeGroup(id, field, value) {\r\n      for (var i in this.taggingTreeData) {\r\n        if (this.taggingTreeData[i].id == id) {\r\n          this.taggingTreeData[i][field] = value;\r\n          break; //Stop this loop, we found it!\r\n        }\r\n      }\r\n    },\r\n    filterTaggingTree(value) {\r\n      this.filteredTaggingTreeData = this.taggingTreeData.filter(\r\n        (x) => x.group1 == value\r\n      );\r\n    },\r\n    groupChanged(value, row, group) {\r\n      this.changeLedgerGroup(row.ledgerid, group, value);\r\n      console.log(this.taggedLedgerData);\r\n    },\r\n    // eslint-disable-next-line no-unused-vars\r\n    async getAllLedgerData(companyID) {\r\n      try {\r\n        var res = await this.$apiService.get(`/processing/taggedledger/${\"1\"}`);\r\n        if (res && res.status === 200) {\r\n          this.dataImported = true;\r\n          this.taggedLedgerData = res.data;\r\n          this.taggedLedgerData = this.taggedLedgerData.filter(\r\n            (x) => x.group1 == null\r\n          );\r\n          await this.fillLedgerData(res.data);\r\n\r\n          if (res.data.status === \"error\") {\r\n            console.log(\"error\");\r\n          }\r\n        }\r\n      } catch (error) {\r\n        // this.showError(\"Unable to Get Company Details\");\r\n      }\r\n    },\r\n    addDocument(val) {\r\n      if (val == \"xml\") {\r\n        this.$refs.tallyUploader.$refs.input.click();\r\n      } else {\r\n        this.$refs.uploader.$refs.input.click();\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style  scoped>\r\n>>> .my-custom-dialog {\r\n  background: white !important;\r\n}\r\n\r\n.blueUline2 {\r\n  min-width: 102%;\r\n  border-top: 3px solid #03a9f4;\r\n  border-color: #0398dc !important;\r\n}\r\n.popup-allotment-title {\r\n  font-style: normal;\r\n  font-weight: 700 !important;\r\n  color: #0398dc;\r\n  margin: 20px;\r\n  text-align: initial;\r\n}\r\n.v-dialog {\r\n  background: white !important;\r\n}\r\n.topRow {\r\n  /* margin-top:40px; */\r\n}\r\n.minTop {\r\n  margin-top: 10px;\r\n}\r\n.maxTop {\r\n  margin-top: 40px;\r\n}\r\n.maxCol {\r\n  max-width: 250px;\r\n}\r\n.btn2 {\r\n  text-transform: unset !important;\r\n  height: 65px !important;\r\n  width: 250px !important;\r\n  font-weight: 500 !important;\r\n  font-size: 18px;\r\n}\r\n.marg {\r\n  margin-right: 5% !important;\r\n}\r\n.alig {\r\n  justify-content: center !important;\r\n}\r\n.btn1 {\r\n  text-transform: unset !important;\r\n  font-weight: 600;\r\n}\r\n.loginText {\r\n  font-size: 21px;\r\n  font-weight: 300;\r\n  /* line-height: 75px; */\r\n  /* margin-top:10px; */\r\n\r\n  color: rgb(0, 107, 106);\r\n  text-decoration: \"none\";\r\n  font-family: \"Roboto\";\r\n  text-align: left;\r\n  letter-spacing: 0.2;\r\n  margin-left: 15px;\r\n}\r\n</style>\r\n\r\n"]}]}