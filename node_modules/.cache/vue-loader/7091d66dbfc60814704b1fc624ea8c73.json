{"remainingRequest":"C:\\Users\\18kar\\Desktop\\FE bugs\\shan\\front_end\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\18kar\\Desktop\\FE bugs\\shan\\front_end\\src\\components\\TaggingDisplay.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\18kar\\Desktop\\FE bugs\\shan\\front_end\\src\\components\\TaggingDisplay.vue","mtime":1634833776187},{"path":"C:\\Users\\18kar\\Desktop\\FE bugs\\shan\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\18kar\\Desktop\\FE bugs\\shan\\front_end\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\18kar\\Desktop\\FE bugs\\shan\\front_end\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\18kar\\Desktop\\FE bugs\\shan\\front_end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\18kar\\Desktop\\FE bugs\\shan\\front_end\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgc3RvcmUgZnJvbSAnLi4vc3RvcmUnDQovLyBpbXBvcnQgeyBkZWJvdW5jZSB9IGZyb20gImRlYm91bmNlIjsNCmltcG9ydCBqc1BERiBmcm9tICJqc3BkZiI7DQppbXBvcnQgImpzcGRmLWF1dG90YWJsZSI7DQp2YXIgbnVtZXJhbCA9IHJlcXVpcmUoIm51bWVyYWwiKTsNCmltcG9ydCBWdWUgZnJvbSAidnVlIjsNClZ1ZS5maWx0ZXIoImZvcm1hdE51bWJlciIsIGZ1bmN0aW9uICh2YWx1ZSkgew0KICByZXR1cm4gbnVtZXJhbCh2YWx1ZSkuZm9ybWF0KCIwLDAiKTsgLy8gZGlzcGxheWluZyBvdGhlciBncm91cGluZ3Mvc2VwYXJhdG9ycyBpcyBwb3NzaWJsZSwgbG9vayBhdCB0aGUgZG9jcw0KfSk7DQppbXBvcnQgImFnLWdyaWQtY29tbXVuaXR5L2Rpc3Qvc3R5bGVzL2FnLWdyaWQuY3NzIjsNCmltcG9ydCAiYWctZ3JpZC1jb21tdW5pdHkvZGlzdC9zdHlsZXMvYWctdGhlbWUtbWF0ZXJpYWwuY3NzIjsNCi8vIGltcG9ydCBEcm9wZG93bkNlbGxSZW5kZXJlciBmcm9tICIuL2Ryb3Bkb3duQ2VsbFJlbmRlcmVyIg0KaW1wb3J0IEwxQ29tcG9uZW50IGZyb20gIi4vdGFnZ2luZ0wxQ29tcG9uZW50LnZ1ZSI7aW1wb3J0IEwxSGVkZXJDb21wb25lbnQgZnJvbSAiLi90YWdnaW5nTDFIZWFkZXJDb21wb25lbnQudnVlIjsNCmltcG9ydCBMMkNvbXBvbmVudCBmcm9tICIuL3RhZ2dpbmdMMkNvbXBvbmVudC52dWUiO2ltcG9ydCBMMkhlZGVyQ29tcG9uZW50IGZyb20gIi4vdGFnZ2luZ0wySGVhZGVyQ29tcG9uZW50LnZ1ZSI7DQppbXBvcnQgTDNDb21wb25lbnQgZnJvbSAiLi90YWdnaW5nTDNDb21wb25lbnQudnVlIjtpbXBvcnQgTDNIZWRlckNvbXBvbmVudCBmcm9tICIuL3RhZ2dpbmdMM0hlYWRlckNvbXBvbmVudC52dWUiOw0KaW1wb3J0IE5hbWVDb21wb25lbnQgZnJvbSAiLi90YWdnaW5nTmFtZUNvbXBvbmVudC52dWUiO2ltcG9ydCBOYW1lSGVkZXJDb21wb25lbnQgZnJvbSAiLi90YWdnaW5nTmFtZUhlYWRlckNvbXBvbmVudC52dWUiOw0KaW1wb3J0IEFjaXRpb25Db21wb25lbnQgZnJvbSAiLi90YWdnaW5nQWN0aW9uQ29tcG9uZW50LnZ1ZSI7aW1wb3J0IERyQ3JDb21wb25lbnQgZnJvbSAiLi90YWdnaW5nRHJDckNvbXBvbmVudC52dWUiOw0KaW1wb3J0IEFlQ29tcG9uZW50IGZyb20gIi4vQWVDb21wb25lbnQudnVlIjsNCmltcG9ydCBTZWxlY3Rpb25Db21wb25lbnQgZnJvbSAiLi90YWdnaW5nU2VsZWN0aW9uQ29tcG9uZW50LnZ1ZSI7DQppbXBvcnQge0FnR3JpZFZ1ZX0gZnJvbSAnYWctZ3JpZC12dWUnOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiVGFnZ2luZ0hvbWUiLA0KICBjb21wb25lbnRzOnsNCiAgICAvKiBlc2xpbnQtZGlzYWJsZSB2dWUvbm8tdW51c2VkLWNvbXBvbmVudHMgKi8NCiAgICAnYWctZ3JpZC12dWUnOkFnR3JpZFZ1ZSwnbDFIZWRlckNvbXBvbmVudCc6TDFIZWRlckNvbXBvbmVudCwnbDJIZWRlckNvbXBvbmVudCc6TDJIZWRlckNvbXBvbmVudCwnbDNIZWRlckNvbXBvbmVudCc6TDNIZWRlckNvbXBvbmVudCwNCiAgICAnbDFDb21wb25lbnQnOkwxQ29tcG9uZW50LCJsMkNvbXBvbmVudCI6TDJDb21wb25lbnQsImwzQ29tcG9uZW50IjpMM0NvbXBvbmVudCwibmFtZUNvbXBvbmVudCI6TmFtZUNvbXBvbmVudCwibmFtZUhlZGVyQ29tcG9uZW50IjpOYW1lSGVkZXJDb21wb25lbnQsDQogICAgImFjaXRpb25Db21wb25lbnQiOkFjaXRpb25Db21wb25lbnQsImRyQ3JDb21wb25lbnQiOkRyQ3JDb21wb25lbnQsInNlbGVjdGlvbkNvbXBvbmVudCI6U2VsZWN0aW9uQ29tcG9uZW50LCJhZUNvbXBvbmVudCI6QWVDb21wb25lbnQNCiAgfSwgDQogIGJlZm9yZU1vdW50KCkgeyAgICAgICAgDQogICAgdGhpcy5jb2x1bW5EZWZzPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5hbGxDb2x1bW5EZWZzKSk7DQogICAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgY29uc3RhbnRseUNoZWNraW5nOm51bGwsDQogICAgICBlZGl0TGVkZ2VyTmFtZTp7b2xkVmFsdWU6IiIsbmV3VmFsdWU6IiJ9LA0KICAgICAgZWRpdExlZGdlcjpmYWxzZSwNCiAgICAgIGlzUGFyZW50RGV0YWlsc0F2YWlsYWJsZTpbXSwNCiAgICAgIGlzQWxsRGF0YUdvdDpmYWxzZSwNCiAgICAgIGdyaWRBcGk6IG51bGwsDQogICAgICAgICAgICBjb2x1bW5BcGk6IG51bGwsDQogICAgICAgICAgICBkZWZhdWx0Q29sRGVmOiB7DQogICAgICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlLA0KICAgICAgICAgICAgICAgIHNvcnRhYmxlOiBmYWxzZSwNCiAgICAgICAgICAgICAgICBmbGV4OiAxLA0KICAgICAgICAgICAgICAgIGZpbHRlcjogZmFsc2UsDQogICAgICAgICAgICAgICAgcmVzaXphYmxlOiB0cnVlLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGNvbnRleHQ6IHsNCiAgICAgICAgICBjb21wb25lbnRQYXJlbnQ6IHRoaXMNCiAgICAgICAgfSwNCiAgICAgIGNvbHVtbkRlZnM6IFtdLA0KICAgICAgYWxsQ29sdW1uRGVmczpbDQogICAgew0KICAgICAgaGVhZGVyTmFtZTogIkFDVElPTiIsDQogICAgICBmaWVsZDogImFjdGlvbiIsDQogICAgICBjZWxsUmVuZGVyZXI6ICJhY2l0aW9uQ29tcG9uZW50IiwNCiAgICAgIG1heFdpZHRoOiAxMTANCiAgICB9LA0KDQogICAgew0KICAgICAgZmllbGQ6ICJuYW1lIiwNCiAgICAgIGNlbGxSZW5kZXJlcjogIm5hbWVDb21wb25lbnQiLA0KICAgICAgaGVhZGVyQ29tcG9uZW50OiJuYW1lSGVkZXJDb21wb25lbnQiLA0KICAgICAgcmVzaXphYmxlOiB0cnVlLA0KICAgIH0sDQogICAgew0KICAgICAgaGVhZGVyTmFtZTogIkFNT1VOVCIsDQogICAgICBmaWVsZDogImJhbGFuY2UiLA0KICAgICAgbWF4V2lkdGg6IDE1MA0KICAgIH0sDQogICAgew0KICAgICAgaGVhZGVyTmFtZTogIkRyL0NyIiwNCiAgICAgIGZpZWxkOiAiZHJjciIsDQogICAgICBjZWxsUmVuZGVyZXI6ICJkckNyQ29tcG9uZW50IiwNCiAgICAgIG1heFdpZHRoOiAxMDANCiAgICB9LA0KICAgIHsNCiAgICAgIGhlYWRlck5hbWU6ICJTRUxFQ1RJT04iLA0KICAgICAgZmllbGQ6ICJzZWxlY3Rpb24iLA0KICAgICAgY2VsbFJlbmRlcmVyOiAic2VsZWN0aW9uQ29tcG9uZW50IiwNCiAgICAgIG1heFdpZHRoOiAxNDANCiAgICB9LA0KICAgIHsNCiAgICAgIGhlYWRlck5hbWU6ICJMZXZlbCAxIiwNCiAgICAgIGZpZWxkOiAibGV2ZWwxIiwNCiAgICAgIGNlbGxSZW5kZXJlcjogImwxQ29tcG9uZW50IiwNCiAgICAgIGhlYWRlckNvbXBvbmVudDoibDFIZWRlckNvbXBvbmVudCIsDQogICAgICBoaWRlOmZhbHNlLA0KICAgICAgbWF4V2lkdGg6IDM1MA0KICAgIH0sDQogICAgew0KICAgICAgaGVhZGVyTmFtZTogIkxldmVsIDIiLA0KICAgICAgZmllbGQ6ICJsZXZlbDIiLA0KICAgICAgY2VsbFJlbmRlcmVyOiAibDJDb21wb25lbnQiLA0KICAgICAgaGVhZGVyQ29tcG9uZW50OiJsMkhlZGVyQ29tcG9uZW50IiwNCiAgICAgIGhpZGU6ZmFsc2UsDQogICAgICBtYXhXaWR0aDogMzUwDQogICAgfSx7DQogICAgICBoZWFkZXJOYW1lOiAiTGV2ZWwgMyIsDQogICAgICBmaWVsZDogImxldmVsMyIsDQogICAgICBjZWxsUmVuZGVyZXI6ICJsM0NvbXBvbmVudCIsDQogICAgICBoZWFkZXJDb21wb25lbnQ6ImwzSGVkZXJDb21wb25lbnQiLA0KICAgICAgaGlkZTp0cnVlLA0KICAgICAgbWF4V2lkdGg6IDM1MA0KICAgIH0NCiAgXSwNCiAgICAgIHJvd0RhdGE6IG51bGwsDQogICAgICBjaGFuZ2VkUG9zc2lubGVQYXJlbnRzOiBbXSwNCiAgICAgIHRhYmxlSGVpZ2h0OiAiNjEuOHZoIiwNCiAgICAgIGwxRmlsdGVyT3B0aW9uOiBbXSwNCiAgICAgIHBhcmVudENoZWNrZWQ6IHt9LA0KICAgICAgY2hpbGRDaGVja2VkOiB7fSwNCiAgICAgIHBhcmVudERpc3BsYXlFcnJvcnM6IFtdLA0KICAgICAgcGFyZW50RGlzcGxheVZhbHVlczogW10sDQogICAgICBpc1BhcmVudFZhbGlkQ2hlY2s6IGZhbHNlLA0KICAgICAgc2VsZWN0ZWRQYXJlbnQ6ICIiLA0KICAgICAgaXNIZWFkZXJncm91cE9wZW46IHRydWUsDQogICAgICBpc1Jvd0dyb3VwT3BlbjogW10sDQogICAgICBpc0NvbGxhcHNlZFBhcmVudDogW10sDQogICAgICBsZXZlbDFmaWx0ZXI6IG51bGwsDQogICAgICBsZXZlbDJmaWx0ZXI6IG51bGwsDQogICAgICBsZXZlbDNmaWx0ZXI6IG51bGwsDQogICAgICB1blNhdmVkVmFsdWU6IFtdLA0KICAgICAgdG90YWxMZWRnZXI6IDAsDQogICAgICB0b3RhbHRhZ2dlZExlZGdlcjogMCwNCiAgICAgIGV4Y2VsQXJyYXk6IFtdLA0KICAgICAgZGlhbG9nTDFWYWx1ZTogIiIsDQogICAgICBkaWFsb2dMMlZhbHVlOiAiIiwNCiAgICAgIGFsZXJ0TWVhc3NhZ2U6ICIiLA0KICAgICAgaXNEaWZmQnVsY2s6IGZhbHNlLA0KICAgICAgZGlhbG9nV2lkdGg6ICI3MHZ3IiwNCiAgICAgIGlzRGlhbG9nTW9kZTogMSwNCiAgICAgIGxldmVsMkJ1bGtWYWx1ZXM6IFtdLA0KICAgICAgYnVsa1RhZ0xldmVsMkVuYWJsZWQ6IGZhbHNlLA0KICAgICAgYnVsa1RhZ0xldmVsMUVuYWJsZWQ6IGZhbHNlLA0KICAgICAgYnVsa1RhZ1NlbGVjdGVkTGV2ZWwyOiAiIiwNCiAgICAgIGxldmVsMU5hbWVzOiBbXSwNCiAgICAgIGNoZWNrYm94OiBmYWxzZSwNCiAgICAgIHRpbWVvdXQ6IG51bGwsDQogICAgICBsMTogW10sDQogICAgICBsMjogW10sDQogICAgICBsMzogW10sDQogICAgICBsMVZhbHVlOiBbXSwNCiAgICAgIGRhdGU6ICIiLA0KICAgICAgZmlsdGVyT246IFtdLA0KICAgICAgc2VsZWN0ZWRHcm91cDogIiIsDQogICAgICBncm91cGluZ1NlbGVjdGVkOiB0cnVlLA0KICAgICAgdGFibGVGaWx0ZXI6ICIiLA0KICAgICAgc2VsZWN0ZWRBbGxJdGVtczogZmFsc2UsDQogICAgICBzaG93TGV2ZWwxOiB0cnVlLA0KICAgICAgc2hvd0xldmVsMjogdHJ1ZSwNCiAgICAgIHNob3dMZXZlbDM6IGZhbHNlLA0KICAgICAgdGFiU2VsZWN0aW9uOiAwLA0KICAgICAgcG9zc2libGVQYXJlbnRzOiBbXSwNCiAgICAgIHNlbGVjdGVkSW1wb3J0TGV2ZWw6ICJDbG9zaW5nIEJhbGFuY2UiLA0KICAgICAgdGVtcFNlbGVjdDogW10sDQogICAgICB0ZW1wbGV2ZWwxQXJyeWF5OiBbXSwNCiAgICAgIHRlbXBsZXZlbDJBcnJ5YXk6IFtdLA0KICAgICAgdGVtcGxldmVsM0FycnlheTogW10sDQogICAgICB0ZW1wVHJlZWxldmVsMUFycnlheTogW10sDQogICAgICB0ZW1wVHJlZWxldmVsMkFycnlheTogW10sDQogICAgICB0ZW1wVHJlZWxldmVsM0FycnlheTogW10sDQoNCiAgICAgIHNlbGVjdGVkWWVhcjogIkN1cnJlbnQgWWVhciIsDQogICAgICBzZWxlY3RlZENvbXBhbnk6ICJWS0MiLA0KICAgICAgc2hvd1hNTERpYWxvZ3VlOiBmYWxzZSwNCg0KICAgICAgZGF0YUltcG9ydGVkOiBmYWxzZSwNCiAgICAgIHRhZ1NlbGVjdGVkOiBmYWxzZSwNCiAgICAgIHNlbGVjdGVkVGFnOiAiIiwNCiAgICAgIGZpZWxkczogWw0KICAgICAgICB7DQogICAgICAgICAga2V5OiAiYWN0aW9uIiwNCiAgICAgICAgICBzb3J0YWJsZTogZmFsc2UsDQogICAgICAgIH0sDQoNCiAgICAgICAgew0KICAgICAgICAgIGtleTogIm5hbWUiLA0KICAgICAgICAgIHNvcnRhYmxlOiBmYWxzZSwNCiAgICAgICAgICB0aFN0eWxlOiB7IHdpZHRoOiAiMjV2dyIgfSwNCiAgICAgICAgICB0ZFN0eWxlOiB7IHdpZHRoOiAiMjV2dyIgfSwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGxhYmVsOiAiQU1PVU5UIiwNCiAgICAgICAgICBrZXk6ICJiYWxhbmNlIiwNCiAgICAgICAgICBzb3J0YWJsZTogZmFsc2UsDQogICAgICAgICAgdGhTdHlsZTogeyB3aWR0aDogIjZ2dyIgfSwNCiAgICAgICAgICB0ZFN0eWxlOiB7IHdpZHRoOiAiNnZ3IiB9LA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgbGFiZWw6ICJEci9DciIsDQogICAgICAgICAga2V5OiAiZHJjciIsDQogICAgICAgICAgc29ydGFibGU6IGZhbHNlLA0KICAgICAgICAgIHRoU3R5bGU6IHsgd2lkdGg6ICI1dnciIH0sDQogICAgICAgICAgdGRTdHlsZTogeyB3aWR0aDogIjV2dyIgfSwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGxhYmVsOiAiU2VsZWN0aW9uIiwNCiAgICAgICAgICBrZXk6ICJzZWxlY3Rpb24iLA0KICAgICAgICAgIHNvcnRhYmxlOiBmYWxzZSwNCiAgICAgICAgICB0aFN0eWxlOiB7IHdpZHRoOiAiM3Z3IiB9LA0KICAgICAgICAgIHRkU3R5bGU6IHsgd2lkdGg6ICIzdnciIH0sDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBsYWJlbDogIkxldmVsIDEiLA0KICAgICAgICAgIGtleTogImxldmVsMSIsDQogICAgICAgICAgc29ydGFibGU6IGZhbHNlLA0KICAgICAgICAgIHRoU3R5bGU6IHsgd2lkdGg6ICIyNXZ3IiB9LA0KICAgICAgICAgIHRkU3R5bGU6IHsgd2lkdGg6ICIyNXZ3IiB9LA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgbGFiZWw6ICJMZXZlbCAyIiwNCiAgICAgICAgICBrZXk6ICJsZXZlbDIiLA0KICAgICAgICAgIHNvcnRhYmxlOiBmYWxzZSwNCiAgICAgICAgICB0aFN0eWxlOiB7IHdpZHRoOiAiMjV2dyIgfSwNCiAgICAgICAgICB0ZFN0eWxlOiB7IHdpZHRoOiAiMjV2dyIgfSwNCiAgICAgICAgfSwNCiAgICAgIF0sDQoNCiAgICAgIHNob3dEYXRhdGFibGU6IGZhbHNlLA0KICAgICAgb3JnaW5hbFRhZ2dpbmd0cmVlRGF0YTogW10sDQogICAgICB0YWdnaW5nVHJlZURhdGE6IFtdLA0KICAgICAgZmlsdGVyZWRUYWdnaW5nVHJlZURhdGE6IFtdLA0KICAgICAgY2hlY2tCb3hWYWx1ZTogZmFsc2UsDQogICAgICBsMU9wdGlvbnM6IFtdLA0KICAgICAgbDJPcHRpb25zOiB7fSwgDQogICAgICBsM09wdGlvbnM6IHt9LA0KICAgIH07DQogIH0sDQogIGFzeW5jIG1vdW50ZWQoKSB7DQogICAgdGhpcy5nZXRMZWRnZXJEZXRhaWxzKCk7DQogICAgdGhpcy5yZXBvcnRpbmdQZXJpb2RJZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInJlcG9ydElkIik7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBjbG9zZUVkaXREaWFsb2coKXsNCiAgICAgIHRoaXMuZWRpdExlZGdlciA9ZmFsc2U7DQogICAgfSwNCiAgICBvcGVuRWRpdERpYWxvZyh2YWwsZGF0YSl7IGNvbnNvbGUubG9nKHZhbCxkYXRhKQ0KICAgICAgdGhpcy5lZGl0TGVkZ2VyTmFtZS5vbGRWYWx1ZSA9IHZhbDsNCiAgICAgIHRoaXMuZWRpdExlZGdlck5hbWVbImRhdGEiXT1kYXRhOw0KICAgICAgdGhpcy5lZGl0TGVkZ2VyID10cnVlOw0KICAgIH0sDQogICAgYXN5bmMgdXBkYXRlTGVkZ2VyTmFtZSgpew0KICAgICAgY29uc29sZS5sb2codGhpcy5lZGl0TGVkZ2VyTmFtZSkNCiAgICAgIHZhciByZXMgPSBhd2FpdCB0aGlzLiRhcGlTZXJ2aWNlLnB1dChgL2xlZGdlckRldGFpbHMvZWRpdERhdGFgLHsiZGF0YSI6eyJsZWRnZXJpZCI6dGhpcy5lZGl0TGVkZ2VyTmFtZS5kYXRhLmxlZGdlcmlkLG5hbWU6dGhpcy5lZGl0TGVkZ2VyTmFtZS5uZXdWYWx1ZX19KTsNCiAgICAgIGlmIChyZXMgJiYgcmVzLnN0YXR1cyA9PT0gMjAwKSB7DQogICAgICAgIHRoaXMudW5TYXZlZFZhbHVlID0gW107DQogICAgICAgIHRoaXMuaXNEaWFsb2dNb2RlID0gMTsNCiAgICAgICAgdGhpcy5kaWFsb2dXaWR0aCA9ICIzNXZ3IjsNCiAgICAgICAgdGhpcy5hbGVydE1lYXNzYWdlID0gIkxlZGdlcnMgYXJlIFVwZGF0ZWQgc3VjY2Vzc2Z1bGx5LiI7DQogICAgICAgIHRoaXMuZWRpdExlZGdlcj1mYWxzZTsNCiAgICAgICAgLy91cGRhdGUNCiAgICAgICAgbGV0IG9yZ0luZGV4ID0gdGhpcy4kXy5maW5kTGFzdEluZGV4KHRoaXMub3JnaW5hbFRhZ2dpbmd0cmVlRGF0YSwgew0KICAgICAgICBuYW1lOiB0aGlzLmVkaXRMZWRnZXJOYW1lLm9sZFZhbHVlLA0KICAgICAgICBwYXJlbnQ6IHRoaXMuZWRpdExlZGdlck5hbWUuZGF0YS5wYXJlbnQsDQogICAgICB9KTsNCiAgICAgIHZhciByb3dOb2RlID0gdGhpcy5ncmlkQXBpLmdldFJvd05vZGUodGhpcy5lZGl0TGVkZ2VyTmFtZS5kYXRhLnBhcmVudCt0aGlzLmVkaXRMZWRnZXJOYW1lLm9sZFZhbHVlKTsNCiAgICAgIHJvd05vZGUuc2V0RGF0YVZhbHVlKCJuYW1lIiwgdGhpcy5lZGl0TGVkZ2VyTmFtZS5uZXdWYWx1ZSk7DQogICAgICBpZiAob3JnSW5kZXggIT0gLTEpIHRoaXMub3JnaW5hbFRhZ2dpbmd0cmVlRGF0YVtvcmdJbmRleF1bIm5hbWUiXSA9IHRoaXMuZWRpdExlZGdlck5hbWUubmV3VmFsdWU7IA0KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICB0aGlzLmJ1bGtUYWdMZXZlbDFFbmFibGVkID0gdHJ1ZTsNCiAgICAgICAgfSwgMCk7DQogICAgICB9DQogICAgICBpZiAocmVzLmRhdGEuc3RhdHVzID09PSAiZXJyb3IiKSB7DQogICAgICAgIHRoaXMuaXNEaWFsb2dNb2RlID0gMTsNCiAgICAgICAgdGhpcy5kaWFsb2dXaWR0aCA9ICIzNXZ3IjsNCiAgICAgICAgdGhpcy5hbGVydE1lYXNzYWdlID0gIkxlZGdlcnMgYXJlIG5vdCBVcGRhdGUgc3VjY2Vzc2Z1bGx5LiI7DQogICAgICAgIHRoaXMuZWRpdExlZGdlcj1mYWxzZTsNCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgdGhpcy5idWxrVGFnTGV2ZWwxRW5hYmxlZCA9IHRydWU7DQogICAgICAgIH0sIDApOw0KICAgICAgfQ0KICAgIH0sDQogICAgYXN5bmMgYWVTdWNjZXNzQ2FsbGJhY2soYWRkRW50cnlEYXRhKXsNCiAgICAgIHZhciBzZWxlY3RlZExlZGdlcnNJbmRleCA9W107DQogICAgICBhZGRFbnRyeURhdGEuZm9yRWFjaChhc3luYyAodmFsLGlkeCk9PnsNCiAgICAgICAgaWYoIXZhbC5ub3RZZXRTYXZlZCkgeyAgIA0KICAgICAgICBsZXQgb3JnSW5kZXggPSB0aGlzLiRfLmZpbmRMYXN0SW5kZXgodGhpcy5vcmdpbmFsVGFnZ2luZ3RyZWVEYXRhLCB7DQogICAgICAgICAgICBsZWRnZXJpZDogdmFsLmxlZGdlcg0KICAgICAgICAgIH0pOw0KICAgICAgICAgIHNlbGVjdGVkTGVkZ2Vyc0luZGV4LnB1c2goW29yZ0luZGV4LGlkeF0pOw0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgICB0aGlzLnVuU2F2ZWRWYWx1ZSA9IFtdOw0KICAgICAgICB0aGlzLmlzRGlhbG9nTW9kZSA9IDE7DQogICAgICAgIHRoaXMuZGlhbG9nV2lkdGggPSAiMzV2dyI7DQogICAgICAgIHRoaXMuYWxlcnRNZWFzc2FnZSA9ICJMZWRnZXJzIGFyZSBVcGRhdGVkIHN1Y2Nlc3NmdWxseS4iOw0KICAgICAgICBjb25zb2xlLmxvZyh0aGlzLm9yZ2luYWxUYWdnaW5ndHJlZURhdGEsc2VsZWN0ZWRMZWRnZXJzSW5kZXgsYWRkRW50cnlEYXRhLHRoaXMucm93RGF0YSwiY2hlY2siKQ0KICAgICAgICAvL3VwZGF0ZQ0KICAgICAgICBzZWxlY3RlZExlZGdlcnNJbmRleC5mb3JFYWNoKCh2YWwpPT57DQogICAgICAgICAgaWYoYWRkRW50cnlEYXRhW3ZhbFsxXV0udHlwZSA9PSAiRHIiKQ0KICAgICAgICAgIHRoaXMub3JnaW5hbFRhZ2dpbmd0cmVlRGF0YVt2YWxbMF1dWyJiYWxhbmNlIl0gPSBOdW1iZXIodGhpcy5vcmdpbmFsVGFnZ2luZ3RyZWVEYXRhW3ZhbFswXV1bImJhbGFuY2UiXSkgLSBOdW1iZXIoYWRkRW50cnlEYXRhW3ZhbFsxXV0uYW1vdW50KTsNCiAgICAgICAgICBlbHNlDQogICAgICAgICAgdGhpcy5vcmdpbmFsVGFnZ2luZ3RyZWVEYXRhW3ZhbFswXV1bImJhbGFuY2UiXSA9IE51bWJlcih0aGlzLm9yZ2luYWxUYWdnaW5ndHJlZURhdGFbdmFsWzBdXVsiYmFsYW5jZSJdKSArICBOdW1iZXIoYWRkRW50cnlEYXRhW3ZhbFsxXV0uYW1vdW50KTsNCiAgICAgICAgfSkNCiAgICAgICAgYWRkRW50cnlEYXRhLmZvckVhY2godmFsPT57DQogICAgICAgICAgbGV0IG9yZ0luZGV4ID0gdGhpcy4kXy5maW5kTGFzdEluZGV4KHRoaXMucm93RGF0YSwgew0KICAgICAgICAgICAgbGVkZ2VyaWQ6IHZhbC5sZWRnZXINCiAgICAgICAgICB9KTsgIA0KICAgICAgICAgIGlmKG9yZ0luZGV4IT0tMSl7DQogICAgICAgICAgICBpZih2YWwudHlwZSA9PSAiRHIiKQ0KICAgICAgICAgIHRoaXMucm93RGF0YVtvcmdJbmRleF1bImJhbGFuY2UiXSA9IE51bWJlcih0aGlzLnJvd0RhdGFbb3JnSW5kZXhdWyJiYWxhbmNlIl0pIC0gTnVtYmVyKHZhbC5hbW91bnQpOw0KICAgICAgICAgIGVsc2UNCiAgICAgICAgICB0aGlzLnJvd0RhdGFbb3JnSW5kZXhdWyJiYWxhbmNlIl0gPSBOdW1iZXIodGhpcy5yb3dEYXRhW29yZ0luZGV4XVsiYmFsYW5jZSJdKSArIE51bWJlcih2YWwuYW1vdW50KTsNCiAgICAgICAgICB9ICAgICAgICAgDQogICAgICAgIH0pDQogICAgICAgIGFkZEVudHJ5RGF0YS5mb3JFYWNoKGFzeW5jICh2YWwpPT57DQogICAgICAgIGlmKHZhbC5ub3RZZXRTYXZlZCkgew0KICAgICAgICAgICAgdmFyIHJlcyA9IGF3YWl0IHRoaXMuJGFwaVNlcnZpY2UuZ2V0KGAvbGVkZ2VyRGV0YWlscy9nZXRMZWRnZXJEZXRhaWxzQnlOYW1lP3JlcG9ydGluZ3BlcmlvZGRhdGFpZD0ke051bWJlcih0aGlzLnJlcG9ydGluZ1BlcmlvZElkKX0mbmFtZT0ke3ZhbC5ub3RZZXRTYXZlZC5uYW1lfWApOw0KICAgICAgDQogICAgICAgICAgICBpZiAocmVzICYmIHJlcy5zdGF0dXMgPT09IDIwMCAmJiByZXMuZGF0YSAmJiByZXMuZGF0YS5kYXRhICYmIHJlcy5kYXRhLmRhdGEubGVuZ3RoKSB7IA0KICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXMuZGF0YSwiZGF0YSIpDQogICAgICAgICAgICAgIGxldCB2YWwgPSByZXMuZGF0YS5kYXRhWzBdOw0KICAgICAgICAgICAgICAgIHZhbFsibGV2ZWwxIl0gPSB2YWxbImxldmVsMSJdICYmIHZhbFsibGV2ZWwxIl0hPSIwIiA/IHZhbFsibGV2ZWwxIl0udHJpbSgpIDogIiI7DQogICAgICAgICAgICAgICAgdmFsWyJsZXZlbDIiXSA9IHZhbFsibGV2ZWwyIl0gJiYgdmFsWyJsZXZlbDEiXSE9IjAiID8gdmFsWyJsZXZlbDIiXS50cmltKCkgOiAiIjsNCiAgICAgICAgICAgICAgICB2YWxbImxldmVsMyJdID0gdmFsWyJsZXZlbDMiXSAmJiB2YWxbImxldmVsMSJdIT0iMCIgPyB2YWxbImxldmVsMyJdLnRyaW0oKSA6ICIiOw0KICAgICAgICAgICAgICAgIHZhbFsiZHJjciJdID0gdmFsWyJkcmNyIl0/dmFsWyJkcmNyIl06IkRyIjsNCiAgICAgICAgICAgICAgICB2YWwubGV2ZWwyT3B0aW9ucyA9IHRoaXMubDJPcHRpb25zW3ZhbFsibGV2ZWwxIl1dOw0KICAgICAgICAgICAgICAgIGlmICh2YWwubGV2ZWwyT3B0aW9ucykNCiAgICAgICAgICAgICAgICAgIHZhbC5sZXZlbDNPcHRpb25zID0gdGhpcy5sM09wdGlvbnNbdmFsWyJsZXZlbDEiXV1bdmFsWyJsZXZlbDIiXV07DQogICAgICAgICAgICAgIHRoaXMub3JnaW5hbFRhZ2dpbmd0cmVlRGF0YS5wdXNoKHZhbCk7DQogICAgICAgICAgICAgIGlmKHRoaXMucm93RGF0YVswXS5ncm91cG5hbWUgPT0gdmFsLmdyb3VwbmFtZSkNCiAgICAgICAgICAgICAgdGhpcy5yb3dEYXRhLnB1c2godmFsKTsNCiAgICAgICAgICAgIH0gICAgDQogICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgdGhpcy5ncmlkQXBpLnNldFJvd0RhdGEodGhpcy5yb3dEYXRhKTsNCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgdGhpcy5idWxrVGFnTGV2ZWwxRW5hYmxlZCA9IHRydWU7DQogICAgICAgIH0sIDApOw0KICAgIH0sDQogICAgYWVGYWlsZWRDYWxsYmFjaygpew0KICAgICAgdGhpcy5pc0RpYWxvZ01vZGUgPSAxOw0KICAgICAgdGhpcy5kaWFsb2dXaWR0aCA9ICIzNXZ3IjsNCiAgICAgIHRoaXMuYWxlcnRNZWFzc2FnZSA9ICJMZWRnZXJzIGFyZSBub3QgVXBkYXRlZCBzdWNjZXNzZnVsbHkuIjsNCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgIHRoaXMuYnVsa1RhZ0xldmVsMUVuYWJsZWQgPSB0cnVlOw0KICAgICAgICB9LCAwKTsNCiAgICB9LCAgICAgICAgICAgIA0KICAgIHVwZGF0ZVNlbGVjdGlvbihlLHZhbCl7DQogICAgICBjb25zb2xlLmxvZyhlLHZhbCwiZSIsdGhpcy5yb3dEYXRhLHRoaXMub3JnaW5hbFRhZ2dpbmd0cmVlRGF0YSk7DQogICAgICAvLyBsZXQgaW5kZXggPSB0aGlzLiRfLmZpbmRMYXN0SW5kZXgodGhpcy5yb3dEYXRhLCB7DQogICAgICAvLyAgIG5hbWU6IHZhbC5uYW1lLA0KICAgICAgLy8gICBwYXJlbnQ6IHZhbC5wYXJlbnQsDQogICAgICAvLyB9KTsNCiAgICAgIC8vIHRoaXMuc2FtcGxlUm93RGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5yb3dEYXRhKSkNCiAgICAgIC8vIHRoaXMucm93RGF0YVtpbmRleF1bInNlbGVjdGVkIl0gPSBlOw0KICAgICAgdGhpcy5yb3dEYXRhID0gdGhpcy5yb3dEYXRhLm1hcCh2YWx1ZT0+ew0KICAgICAgICBpZih0aGlzLmdyb3VwaW5nU2VsZWN0ZWQpew0KICAgICAgICAgIGlmKHZhbHVlLm5hbWUgPT0gdmFsLm5hbWUgJiYgdmFsdWUucGFyZW50ID09IHZhbC5wYXJlbnQpIHZhbHVlWyJzZWxlY3RlZCJdID0gZTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlew0KICAgICAgICAgIGlmKCB2YWx1ZS5pc1BhcmVudE5hbWUgKXsNCiAgICAgICAgICAgIGlmKHZhbHVlLm5hbWUgPT0gdmFsLm5hbWUpIHZhbHVlWyJzZWxlY3RlZCJdID0gZTsNCiAgICAgICAgICB9DQogICAgICAgICAgZWxzZXsNCiAgICAgICAgICAgIGlmKHZhbHVlLnBhcmVudCA9PSB2YWwubmFtZSkgdmFsdWVbInNlbGVjdGVkIl0gPSBlOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gdmFsdWU7DQogICAgICB9KQ0KICAgICAgLy8gdmFyIHJvd05vZGUgPSB0aGlzLmdyaWRBcGkuZ2V0Um93Tm9kZSh2YWwucGFyZW50K3ZhbC5uYW1lKTsNCiAgICAgIC8vIGNvbnNvbGUubG9nKHJvd05vZGUsInJvd05vZGUiKQ0KICAgICAgLy8gcm93Tm9kZS5zZXREYXRhVmFsdWUoInNlbGVjdGlvbiIsIGUpOw0KICAgICAgfSwNCiAgICBnZXRSb3dOb2RlSWQoZGF0YSl7DQogICAgcmV0dXJuIGRhdGEucGFyZW50K2RhdGEubmFtZTt9LA0KICAgIG9uR3JpZFJlYWR5KHBhcmFtcykgew0KICAgICAgICAgICAgdGhpcy5ncmlkQXBpID0gcGFyYW1zLmFwaTsNCiAgICAgICAgICAgIHRoaXMuZ3JpZEFwaS5zaXplQ29sdW1uc1RvRml0KCkNCiAgICAgICAgICAgIHRoaXMuZ3JpZENvbHVtbkFwaSA9IHBhcmFtcy5jb2x1bW5BcGk7DQogICAgfSwNCiAgICBmaWx0ZXJMZXZlbDFPcHRpb25zKGUpIHsNCiAgICAgIHRoaXMubDFGaWx0ZXJPcHRpb24gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMubDFPcHRpb25zKSkuZmlsdGVyKCh2YWwpID0+IHsNCiAgICAgICAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cChlLCAiaWciKTsNCiAgICAgICAgaWYgKHJlZ2V4LnRlc3QodmFsLm5hbWUpKSByZXR1cm4gdHJ1ZTsNCiAgICAgICAgZWxzZSByZXR1cm4gZmFsc2U7DQogICAgICB9KTsNCiAgICB9LA0KICAgIGhhbmRsZVBhcmVudEZpbChpdGVtKSB7DQogICAgICBpZiAodGhpcy5wYXJlbnRDaGVja2VkW2l0ZW0uaGVhZGVyXSkNCiAgICAgICAgdGhpcy5wYXJlbnRDaGVja2VkW2l0ZW0uaGVhZGVyXSA9IGZhbHNlOw0KICAgICAgZWxzZSB0aGlzLnBhcmVudENoZWNrZWRbaXRlbS5oZWFkZXJdID0gdHJ1ZTsNCiAgICAgIHRoaXMubDFGaWx0ZXJPcHRpb24uZm9yRWFjaCgodmFsKSA9PiB7DQogICAgICAgIGlmICh2YWwuZ3JvdXAgPT0gaXRlbS5oZWFkZXIpIHsNCiAgICAgICAgICBpZiAodGhpcy5wYXJlbnRDaGVja2VkW2l0ZW0uaGVhZGVyXSkgew0KICAgICAgICAgICAgdGhpcy5jaGlsZENoZWNrZWRbdmFsLm5hbWVdID0gdHJ1ZTsNCiAgICAgICAgICB9IGVsc2UgdGhpcy5jaGlsZENoZWNrZWRbdmFsLm5hbWVdID0gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgICAgLy9maWx0ZXIgdGhlIHRhYmxlDQogICAgICB2YXIgY2hlY2sgPSBPYmplY3QudmFsdWVzKHRoaXMuY2hpbGRDaGVja2VkKS5maWx0ZXIoKHZhbCkgPT4gdmFsKTsNCiAgICAgIHZhciByZXN1bHREYXRhID0gW107DQogICAgICBpZiAoY2hlY2subGVuZ3RoKSB7DQogICAgICAgIHJlc3VsdERhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMubGVkZ2VyRGF0YUNvcHkpKS5maWx0ZXIoDQogICAgICAgICAgKHZhbCkgPT4geyBjb25zb2xlLmxvZyh2YWwsInZhbCIsdGhpcy5jaGlsZENoZWNrZWQpDQogICAgICAgICAgICBpZiAoIXRoaXMuZ3JvdXBpbmdTZWxlY3RlZCAmJiB2YWwuaXNQYXJlbnROYW1lKSByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIGlmICh0aGlzLmNoaWxkQ2hlY2tlZFt2YWwubGV2ZWwxXSkgcmV0dXJuIHRydWU7DQogICAgICAgICAgICBlbHNlIHJldHVybiBmYWxzZTsNCiAgICAgICAgICB9DQogICAgICAgICk7DQoNCiAgICAgICAgaWYgKCF0aGlzLmdyb3VwaW5nU2VsZWN0ZWQpDQogICAgICAgICAgcmVzdWx0RGF0YSA9IHJlc3VsdERhdGEuZmlsdGVyKCh2YWwsIGlkeCwgYXJyKSA9PiB7DQogICAgICAgICAgICBpZiAoYXJyW2lkeCArIDFdICYmIHZhbC5pc1BhcmVudE5hbWUgJiYgYXJyW2lkeCArIDFdLmlzUGFyZW50TmFtZSkNCiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgZWxzZSByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0RGF0YSwgcmVzdWx0RGF0YVtyZXN1bHREYXRhLmxlbmd0aCAtIDFdLHRoaXMubGVkZ2VyRGF0YUNvcHkpOw0KICAgICAgICBpZiAocmVzdWx0RGF0YVtyZXN1bHREYXRhLmxlbmd0aCAtIDFdLmlzUGFyZW50TmFtZSkgcmVzdWx0RGF0YS5wb3AoKTsNCiAgICAgICAgdGhpcy5yb3dEYXRhID0gcmVzdWx0RGF0YTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMucm93RGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5sZWRnZXJEYXRhQ29weSkpDQogICAgICB9DQogICAgfSwNCiAgICBoYW5kbGVDaGlsZEZpbChpdGVtKSB7DQogICAgICBpZiAodGhpcy5jaGlsZENoZWNrZWRbaXRlbS5uYW1lXSkgew0KICAgICAgICB0aGlzLmNoaWxkQ2hlY2tlZFtpdGVtLm5hbWVdID0gZmFsc2U7DQogICAgICAgIGlmICh0aGlzLnBhcmVudENoZWNrZWRbaXRlbS5ncm91cF0pDQogICAgICAgICAgdGhpcy5wYXJlbnRDaGVja2VkW2l0ZW0uZ3JvdXBdID0gZmFsc2U7DQogICAgICB9IGVsc2UgdGhpcy5jaGlsZENoZWNrZWRbaXRlbS5uYW1lXSA9IHRydWU7DQogICAgICAvL2ZpbHRlciB0YWJsZQ0KICAgICAgdmFyIGNoZWNrID0gT2JqZWN0LnZhbHVlcyh0aGlzLmNoaWxkQ2hlY2tlZCkuZmlsdGVyKCh2YWwpID0+IHZhbCk7DQogICAgICB2YXIgcmVzdWx0RGF0YSA9IFtdOw0KICAgICAgaWYgKGNoZWNrLmxlbmd0aCkgew0KICAgICAgICByZXN1bHREYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmxlZGdlckRhdGFDb3B5KSkuZmlsdGVyKA0KICAgICAgICAgICh2YWwpID0+IHsNCiAgICAgICAgICAgIGlmICghdGhpcy5ncm91cGluZ1NlbGVjdGVkICYmIHZhbC5pc1BhcmVudE5hbWUpIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgaWYgKHRoaXMuY2hpbGRDaGVja2VkW3ZhbC5sZXZlbDFdKSByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgIH0NCiAgICAgICAgKTsNCg0KICAgICAgICBpZiAoIXRoaXMuZ3JvdXBpbmdTZWxlY3RlZCkNCiAgICAgICAgICByZXN1bHREYXRhID0gcmVzdWx0RGF0YS5maWx0ZXIoKHZhbCwgaWR4LCBhcnIpID0+IHsNCiAgICAgICAgICAgIGlmIChhcnJbaWR4ICsgMV0gJiYgdmFsLmlzUGFyZW50TmFtZSAmJiBhcnJbaWR4ICsgMV0uaXNQYXJlbnROYW1lKQ0KICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICBlbHNlIHJldHVybiB0cnVlOw0KICAgICAgICAgIH0pOw0KICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHREYXRhLCByZXN1bHREYXRhW3Jlc3VsdERhdGEubGVuZ3RoIC0gMV0pOw0KICAgICAgICBpZiAocmVzdWx0RGF0YVtyZXN1bHREYXRhLmxlbmd0aCAtIDFdLmlzUGFyZW50TmFtZSkgcmVzdWx0RGF0YS5wb3AoKTsNCiAgICAgICAgdGhpcy5ncmlkQXBpLnNldFJvd0RhdGEocmVzdWx0RGF0YSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmdyaWRBcGkuc2V0Um93RGF0YSh0aGlzLmxlZGdlckRhdGFDb3B5KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIHVwZGF0ZVVuc2F2ZWRWYWx1ZXMocGFyZW50LG5hbWUsb3JnSW5kZXgpew0KICAgICAgbGV0IHVuc2F2ZUluZGV4ID0gdGhpcy4kXy5maW5kTGFzdEluZGV4KHRoaXMudW5TYXZlZFZhbHVlLCB7DQogICAgICAgIG5hbWU6IG5hbWUsDQogICAgICAgIHBhcmVudDogcGFyZW50LA0KICAgICAgfSk7DQogICAgICBpZiAodW5zYXZlSW5kZXggIT0gLTEpDQogICAgICAgIHRoaXMudW5TYXZlZFZhbHVlW3Vuc2F2ZUluZGV4XSA9IHRoaXMuJF8ucGljayh0aGlzLm9yZ2luYWxUYWdnaW5ndHJlZURhdGFbb3JnSW5kZXhdLCJsZWRnZXJpZCIsICJuYW1lIiwgInRhZ2dpbmdoZWFkZXIiLCAibGV2ZWwxIiwgImxldmVsMiIsICJsZXZlbDMiLCAiYmFsYW5jZSIsICJpc2Nsb3NpbmdiYWwiLCAiZ3JvdXBuYW1lIiwgInBhcmVudCIsICJyZXBvcnRpbmdwZXJpb2RkYXRhaWQiLCAiZHJjciIpOw0KICAgICAgZWxzZSB0aGlzLnVuU2F2ZWRWYWx1ZS5wdXNoKHRoaXMuJF8ucGljayh0aGlzLm9yZ2luYWxUYWdnaW5ndHJlZURhdGFbb3JnSW5kZXhdLCJsZWRnZXJpZCIsICJuYW1lIiwgInRhZ2dpbmdoZWFkZXIiLCAibGV2ZWwxIiwgImxldmVsMiIsICJsZXZlbDMiLCAiaXNjbG9zaW5nYmFsIiwgImJhbGFuY2UiLCAiZ3JvdXBuYW1lIiwgInBhcmVudCIsICJyZXBvcnRpbmdwZXJpb2RkYXRhaWQiLCAiZHJjciIpKTsNCiAgICB9LA0KICAgIGRyY3JDaGFuZ2UocGFyZW50LCBuYW1lLCB2YWx1ZSkgew0KICAgICAgbGV0IG9yZ0luZGV4ID0gdGhpcy4kXy5maW5kTGFzdEluZGV4KHRoaXMub3JnaW5hbFRhZ2dpbmd0cmVlRGF0YSwgew0KICAgICAgICBuYW1lOiBuYW1lLA0KICAgICAgICBwYXJlbnQ6IHBhcmVudCwNCiAgICAgIH0pOw0KICAgICAgdmFyIHJvd05vZGUgPSB0aGlzLmdyaWRBcGkuZ2V0Um93Tm9kZShwYXJlbnQrbmFtZSk7DQogICAgICByb3dOb2RlLnNldERhdGFWYWx1ZSgiZHJjciIsIHZhbHVlKTsNCiAgICAgIGlmIChvcmdJbmRleCAhPSAtMSkgdGhpcy5vcmdpbmFsVGFnZ2luZ3RyZWVEYXRhW29yZ0luZGV4XVsiZHJjciJdID0gdmFsdWU7IA0KICAgICAgdGhpcy51cGRhdGVVbnNhdmVkVmFsdWVzKHBhcmVudCwgbmFtZSxvcmdJbmRleCk7ICAgICANCiAgICB9LA0KICAgIHZhbGlkYXRlTGVkZ2VycygpIHsNCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZ3JvdXBpbmdTZWxlY3RlZCwiZ3JvdXBpbmdTZWxlY3RlZCIpDQogICAgICBpZiAodGhpcy5ncm91cGluZ1NlbGVjdGVkKSB7DQogICAgICAgIHZhciBpbnZhbGlkcGFyZW50cyA9IFtdOw0KICAgICAgICBpZiAodGhpcy5zaG93TGV2ZWwyICYmIHRoaXMuc2hvd0xldmVsMykgew0KICAgICAgICAgIHRoaXMub3JnaW5hbFRhZ2dpbmd0cmVlRGF0YS5tYXAoKHZhbCkgPT4geyANCiAgICAgICAgICAgIGlmICghdmFsLmxldmVsMSB8fCAhdmFsLmxldmVsMiB8fCAhdmFsLmxldmVsMykgew0KICAgICAgICAgICAgICBpbnZhbGlkcGFyZW50cy5wdXNoKHZhbC5wYXJlbnQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pOw0KICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2hvd0xldmVsMSAmJiAhdGhpcy5zaG93TGV2ZWwyICYmICF0aGlzLnNob3dMZXZlbDMpIHsNCiAgICAgICAgICB0aGlzLm9yZ2luYWxUYWdnaW5ndHJlZURhdGEubWFwKCh2YWwpID0+IHsNCiAgICAgICAgICAgIGlmICghdmFsLmxldmVsMSkgew0KICAgICAgICAgICAgICBpbnZhbGlkcGFyZW50cy5wdXNoKHZhbC5wYXJlbnQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMub3JnaW5hbFRhZ2dpbmd0cmVlRGF0YS5tYXAoKHZhbCkgPT4gew0KICAgICAgICAgICAgaWYgKCF2YWwubGV2ZWwxIHx8ICF2YWwubGV2ZWwyKSB7DQogICAgICAgICAgICAgIGludmFsaWRwYXJlbnRzLnB1c2godmFsLnBhcmVudCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgICAgaW52YWxpZHBhcmVudHMgPSB0aGlzLiRfLnVuaXEoaW52YWxpZHBhcmVudHMpOw0KICAgICAgICB0aGlzLnBhcmVudERpc3BsYXlFcnJvcnMgPSBpbnZhbGlkcGFyZW50czsNCiAgICAgICAgdmFyIGNoYW5nZWRQb3NzaW5sZVBhcmVudHMgPSBbXTsNCiAgICAgICAgdGhpcy5wYXJlbnREaXNwbGF5VmFsdWVzID0gW107DQogICAgICAgIHRoaXMucG9zc2libGVQYXJlbnRzLmZvckVhY2goKHZhbCkgPT4gew0KICAgICAgICAgIGlmIChpbnZhbGlkcGFyZW50cy5pbmRleE9mKHZhbC5uYW1lKSAhPSAtMSkNCiAgICAgICAgICAgIGNoYW5nZWRQb3NzaW5sZVBhcmVudHMudW5zaGlmdCh7IG5hbWU6IHZhbC5uYW1lIH0pOw0KICAgICAgICAgIGVsc2UgY2hhbmdlZFBvc3NpbmxlUGFyZW50cy5wdXNoKHsgbmFtZTogdmFsLm5hbWUgfSk7DQogICAgICAgIH0pOw0KICAgICAgICB0aGlzLnBvc3NpYmxlUGFyZW50cyA9IGNoYW5nZWRQb3NzaW5sZVBhcmVudHM7DQogICAgICAgIGNoYW5nZWRQb3NzaW5sZVBhcmVudHMuZm9yRWFjaCgodmFsLCBpZHgpID0+IHsNCiAgICAgICAgICBpZiAoaWR4IDwgNSkgew0KICAgICAgICAgICAgdGhpcy5wYXJlbnREaXNwbGF5VmFsdWVzLnB1c2godmFsLm5hbWUpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICAgIHRoaXMuY2hhbmdlZFBvc3NpbmxlUGFyZW50cyA9IGNoYW5nZWRQb3NzaW5sZVBhcmVudHM7DQogICAgICAgIHRoaXMuaXNQYXJlbnRWYWxpZENoZWNrID0gdHJ1ZTsNCiAgICAgICAgdGhpcy5oYW5kbGVTZWxlY3RQYXJlbnQoMCkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGlmICh0aGlzLnNob3dMZXZlbDIgJiYgdGhpcy5zaG93TGV2ZWwzKSB7DQogICAgICAgICAgdGhpcy5oYW5kbGVUYWdnZWQoMCwgMyk7DQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5zaG93TGV2ZWwxICYmICF0aGlzLnNob3dMZXZlbDIgJiYgIXRoaXMuc2hvd0xldmVsMykgew0KICAgICAgICAgIHRoaXMuaGFuZGxlVGFnZ2VkKDAsIDEpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuaGFuZGxlVGFnZ2VkKDAsIDIpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBhc3luYyBoYW5kbGVTZWxlY3RQYXJlbnQoaWR4KSB7DQogICAgICB0aGlzLnNlbGVjdGVkUGFyZW50ID0gdGhpcy5wYXJlbnREaXNwbGF5VmFsdWVzW2lkeF07DQogICAgICBjb25zb2xlLmxvZyh0aGlzLmlzUGFyZW50RGV0YWlsc0F2YWlsYWJsZSx0aGlzLnNlbGVjdGVkUGFyZW50LHRoaXMuaXNBbGxEYXRhR290LGlkeCApDQogICAgICBpZih0aGlzLmlzQWxsRGF0YUdvdCB8fCB0aGlzLmlzUGFyZW50RGV0YWlsc0F2YWlsYWJsZS5pbmRleE9mKHRoaXMuc2VsZWN0ZWRQYXJlbnQpIT0tMSl7DQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMub3JnaW5hbFRhZ2dpbmd0cmVlRGF0YSwidGhpcy5vcmdpbmFsVGFnZ2luZ3RyZWVEYXRhIikNCiAgICAgICAgbGV0IHJlc3VsdERhdGEgPSB0aGlzLm9yZ2luYWxUYWdnaW5ndHJlZURhdGEuZmlsdGVyKA0KICAgICAgICAgICh2YWwpID0+IHZhbC5wYXJlbnQgPT0gdGhpcy5zZWxlY3RlZFBhcmVudA0KICAgICAgICApOw0KICAgICAgICB0aGlzLnJvd0RhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlc3VsdERhdGEpKTsNCiAgICAgICAgdGhpcy5ncmlkQXBpLnNldFJvd0RhdGEocmVzdWx0RGF0YSk7DQogICAgICB9DQogICAgICBlbHNlew0KICAgICAgICAvL2dldCBsZWRnZXIgZGV0YWlscyBieSByZXBvcnRpbmdyZXBlcmlvZGlkICxwYXJlbnQgbmFtZSBhbmQgYmFsYW5jZSB0eXBlDQogICAgICB2YXIgcmVzID0gYXdhaXQgdGhpcy4kYXBpU2VydmljZS5wb3N0KCIvbGVkZ2VyRGV0YWlscy9nZXQiLCB7DQogICAgICAgIHJlcG9ydGluZ3BlcmlvZGRhdGFpZDogTnVtYmVyKHRoaXMucmVwb3J0aW5nUGVyaW9kSWQpLA0KICAgICAgICBwYXJlbnROYW1lOiB0aGlzLnNlbGVjdGVkUGFyZW50LA0KICAgICAgICBpc0Nsb3NpbmdCYWxhbmNlOiB0cnVlLA0KICAgICAgfSk7DQogICAgICBpZiAocmVzICYmIHJlcy5zdGF0dXMgPT09IDIwMCkgew0KICAgICAgICB0aGlzLmlzUGFyZW50RGV0YWlsc0F2YWlsYWJsZS5wdXNoKHRoaXMuc2VsZWN0ZWRQYXJlbnQpOw0KICAgICAgICByZXMuZGF0YS5kYXRhID0gSlNPTi5wYXJzZShyZXMuZGF0YS5kYXRhKS5tYXAoKHZhbCkgPT4gew0KICAgICAgICAgIHZhbFsibGV2ZWwxIl0gPSB2YWxbImxldmVsMSJdID8gdmFsWyJsZXZlbDEiXS50cmltKCkgOiAiIjsNCiAgICAgICAgICB2YWxbImxldmVsMiJdID0gdmFsWyJsZXZlbDIiXSA/IHZhbFsibGV2ZWwyIl0udHJpbSgpIDogIiI7DQogICAgICAgICAgdmFsWyJsZXZlbDMiXSA9IHZhbFsibGV2ZWwzIl0gPyB2YWxbImxldmVsMyJdLnRyaW0oKSA6ICIiOw0KICAgICAgICAgIHZhbFsiZHJjciJdID0gdmFsWyJkcmNyIl0/dmFsWyJkcmNyIl06IkRyIjsNCiAgICAgICAgICB2YWwubGV2ZWwyT3B0aW9ucyA9IHRoaXMubDJPcHRpb25zW3ZhbFsibGV2ZWwxIl1dOw0KICAgICAgICAgIGlmICh2YWwubGV2ZWwyT3B0aW9ucykNCiAgICAgICAgICAgIHZhbC5sZXZlbDNPcHRpb25zID0gdGhpcy5sM09wdGlvbnNbdmFsWyJsZXZlbDEiXV1bdmFsWyJsZXZlbDIiXV07DQogICAgICAgICAgcmV0dXJuIHZhbDsNCiAgICAgICAgfSk7DQogICAgICAgIHRoaXMucm93RGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEuZGF0YSkpOw0KICAgICAgICB0aGlzLmdyaWRBcGkuc2V0Um93RGF0YSh0aGlzLnJvd0RhdGEpOw0KICAgICAgICB0aGlzLm9yZ2luYWxUYWdnaW5ndHJlZURhdGEgPSB0aGlzLm9yZ2luYWxUYWdnaW5ndHJlZURhdGEuY29uY2F0KEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEuZGF0YSkpKTsNCiAgICAgIH0NCiAgICAgIH0gICAgICANCiAgICB9LA0KICAgIG1vdmVQYXJlbnQoaWR4KSB7DQogICAgICBpZiAoaWR4ID09IDEpIHsNCiAgICAgICAgdGhpcy5wYXJlbnREaXNwbGF5VmFsdWVzLnBvcCgpOw0KICAgICAgICBsZXQgaW5kZXggPSB0aGlzLiRfLmZpbmRMYXN0SW5kZXgodGhpcy5wb3NzaWJsZVBhcmVudHMsIHsNCiAgICAgICAgICBuYW1lOiB0aGlzLnBhcmVudERpc3BsYXlWYWx1ZXNbMF0sDQogICAgICAgIH0pOw0KICAgICAgICB0aGlzLnBhcmVudERpc3BsYXlWYWx1ZXMudW5zaGlmdCh0aGlzLnBvc3NpYmxlUGFyZW50c1tpbmRleCAtIDFdLm5hbWUpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5wYXJlbnREaXNwbGF5VmFsdWVzLnNoaWZ0KCk7DQogICAgICAgIGxldCBpbmRleCA9IHRoaXMuJF8uZmluZExhc3RJbmRleCh0aGlzLnBvc3NpYmxlUGFyZW50cywgew0KICAgICAgICAgIG5hbWU6IHRoaXMucGFyZW50RGlzcGxheVZhbHVlc1szXSwNCiAgICAgICAgfSk7DQogICAgICAgIHRoaXMucGFyZW50RGlzcGxheVZhbHVlcy5wdXNoKHRoaXMucG9zc2libGVQYXJlbnRzW2luZGV4ICsgMV0ubmFtZSk7DQogICAgICB9DQogICAgfSwNCiAgICBoZWFkZXJHcm91cEhhbmRlbChpZHgpIHsNCiAgICAgIHZhciByZXN1bHREYXRhID0gW107DQogICAgICBpZiAoaWR4ID09IDEpIHsNCiAgICAgICAgdGhpcy5pc0hlYWRlcmdyb3VwT3BlbiA9IGZhbHNlOw0KICAgICAgICB0aGlzLmlzQ29sbGFwc2VkUGFyZW50ID0gW107DQogICAgICAgIGZvciAobGV0IGtleSBpbiB0aGlzLmlzUm93R3JvdXBPcGVuKSB7DQogICAgICAgICAgdGhpcy5pc0NvbGxhcHNlZFBhcmVudC5wdXNoKGtleSk7DQogICAgICAgICAgdGhpcy5pc1Jvd0dyb3VwT3BlbltrZXldID0gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgcmVzdWx0RGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5sZWRnZXJEYXRhQ29weSkpLmZpbHRlcigNCiAgICAgICAgICAodmFsKSA9PiB7DQogICAgICAgICAgICBpZiAodmFsLnBhcmVudCkgew0KICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9IGVsc2UgcmV0dXJuIHRydWU7DQogICAgICAgICAgfQ0KICAgICAgICApOw0KICAgICAgICB0aGlzLmdyaWRBcGkuc2V0Um93RGF0YShyZXN1bHREYXRhKQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5pc0hlYWRlcmdyb3VwT3BlbiA9IHRydWU7DQogICAgICAgIHRoaXMuaXNDb2xsYXBzZWRQYXJlbnQgPSBbXTsNCiAgICAgICAgZm9yIChsZXQga2V5IGluIHRoaXMuaXNSb3dHcm91cE9wZW4pIHsNCiAgICAgICAgICB0aGlzLmlzUm93R3JvdXBPcGVuW2tleV0gPSB0cnVlOw0KICAgICAgICB9DQogICAgICAgIGxldCByZXN1bHRTRGF0YSA9IHRoaXMuJF8uc29ydEJ5KA0KICAgICAgICAgIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5sZWRnZXJEYXRhQ29weSkpLA0KICAgICAgICAgIGZ1bmN0aW9uICh2YWwpIHsNCiAgICAgICAgICAgIHJldHVybiB2YWwuaW5kZXhGb3JTb3J0Ow0KICAgICAgICAgIH0NCiAgICAgICAgKTsNCiAgICAgICAgdGhpcy5ncmlkQXBpLnNldFJvd0RhdGEocmVzdWx0U0RhdGEpDQogICAgICB9DQogICAgfSwNCiAgICByb3dHcm91cEhhbmRsZXIobmFtZSwgaWR4KSB7DQogICAgICBpZiAoaWR4ID09IDEpIHsNCiAgICAgICAgdGhpcy5pc0NvbGxhcHNlZFBhcmVudC5wdXNoKG5hbWUpOw0KICAgICAgICB0aGlzLmlzUm93R3JvdXBPcGVuW25hbWVdID0gZmFsc2U7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmlzQ29sbGFwc2VkUGFyZW50ID0gdGhpcy5pc0NvbGxhcHNlZFBhcmVudC5maWx0ZXIoDQogICAgICAgICAgKHZhbCkgPT4gdmFsICE9IG5hbWUNCiAgICAgICAgKTsNCiAgICAgICAgdGhpcy5pc1Jvd0dyb3VwT3BlbltuYW1lXSA9IHRydWU7DQogICAgICB9DQogICAgICB2YXIgcmVzdWx0RGF0YSA9IFtdOw0KICAgICAgcmVzdWx0RGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5sZWRnZXJEYXRhQ29weSkpLmZpbHRlcigNCiAgICAgICAgKHZhbCkgPT4gew0KICAgICAgICAgIGlmICh2YWwucGFyZW50ICYmIHRoaXMuaXNDb2xsYXBzZWRQYXJlbnQuaW5kZXhPZih2YWwucGFyZW50KSAhPSAtMSkNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICBlbHNlIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICApOw0KICAgICAgdGhpcy5ncmlkQXBpLnNldFJvd0RhdGEocmVzdWx0RGF0YSkNCiAgICAgIC8vIHRoaXMucm93RGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzdWx0RGF0YSkpDQogICAgfSwNCiAgICBoYW5kbGVUYWdnZWQodmFsLCBsZXZlbCkgew0KICAgICAgdmFyIHJlc3VsdERhdGEgPSBbXTsNCiAgICAgIGlmIChsZXZlbCA9PSAxKSB7DQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMucm93RGF0YSx0aGlzLmxldmVsMWZpbHRlcikNCiAgICAgICAgaWYgKHRoaXMubGV2ZWwxZmlsdGVyID09IHZhbCkgdGhpcy5sZXZlbDFmaWx0ZXIgPSBudWxsOw0KICAgICAgICBlbHNlIHRoaXMubGV2ZWwxZmlsdGVyID0gdmFsOw0KICAgICAgICBpZiAodGhpcy5sZXZlbDFmaWx0ZXIgPT0gMCkgew0KICAgICAgICAgIHJlc3VsdERhdGEgPSBKU09OLnBhcnNlKA0KICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoDQogICAgICAgICAgICAgIHRoaXMucm93RGF0YQ0KICAgICAgICAgICAgKQ0KICAgICAgICAgICkuZmlsdGVyKCh2YWwpID0+IHsNCiAgICAgICAgICAgIGlmICghdGhpcy5ncm91cGluZ1NlbGVjdGVkICYmIHZhbC5pc1BhcmVudE5hbWUpIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICB2YWwubGV2ZWwxICE9ICIwIiAmJg0KICAgICAgICAgICAgICB2YWwubGV2ZWwxICYmDQogICAgICAgICAgICAgICEvbm8gbGV2ZWwvaS50ZXN0KHZhbC5sZXZlbDEpDQogICAgICAgICAgICApDQogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIGVsc2UgcmV0dXJuIHRydWU7DQogICAgICAgICAgfSk7DQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5sZXZlbDFmaWx0ZXIgPT0gMSkgew0KICAgICAgICAgIHJlc3VsdERhdGEgPSBKU09OLnBhcnNlKA0KICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoDQogICAgICAgICAgICAgIHRoaXMucm93RGF0YQ0KICAgICAgICAgICAgKQ0KICAgICAgICAgICkuZmlsdGVyKCh2YWwpID0+IHsNCiAgICAgICAgICAgIGlmICghdGhpcy5ncm91cGluZ1NlbGVjdGVkICYmIHZhbC5pc1BhcmVudE5hbWUpIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICB2YWwubGV2ZWwxICE9ICIwIiAmJg0KICAgICAgICAgICAgICB2YWwubGV2ZWwxICYmDQogICAgICAgICAgICAgICEvbm8gbGV2ZWwvaS50ZXN0KHZhbC5sZXZlbDEpDQogICAgICAgICAgICApDQogICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgZWxzZSByZXR1cm4gZmFsc2U7DQogICAgICAgICAgfSk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgcmVzdWx0RGF0YSA9IEpTT04ucGFyc2UoDQogICAgICAgICAgICBKU09OLnN0cmluZ2lmeSgNCiAgICAgICAgICAgICAgdGhpcy5yb3dEYXRhDQogICAgICAgICAgICApDQogICAgICAgICAgKQ0KICAgICAgICB9DQogICAgICB9IGVsc2UgaWYgKGxldmVsID09IDIpIHsNCiAgICAgICAgaWYgKHRoaXMubGV2ZWwyZmlsdGVyID09IHZhbCkgdGhpcy5sZXZlbDJmaWx0ZXIgPSBudWxsOw0KICAgICAgICBlbHNlIHRoaXMubGV2ZWwyZmlsdGVyID0gdmFsOw0KICAgICAgICBpZiAodGhpcy5sZXZlbDJmaWx0ZXIgPT0gMCkgew0KICAgICAgICAgIHJlc3VsdERhdGEgPSBKU09OLnBhcnNlKA0KICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoDQogICAgICAgICAgICAgIHRoaXMucm93RGF0YQ0KICAgICAgICAgICAgKQ0KICAgICAgICAgICkuZmlsdGVyKCh2YWwpID0+IHsNCiAgICAgICAgICAgIGlmICghdGhpcy5ncm91cGluZ1NlbGVjdGVkICYmIHZhbC5pc1BhcmVudE5hbWUpIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICB2YWwubGV2ZWwyICE9ICIwIiAmJg0KICAgICAgICAgICAgICB2YWwubGV2ZWwyICYmDQogICAgICAgICAgICAgICEvbm8gbGV2ZWwvaS50ZXN0KHZhbC5sZXZlbDIpICYmDQogICAgICAgICAgICAgIHZhbC5sZXZlbDEgIT0gIjAiICYmDQogICAgICAgICAgICAgIHZhbC5sZXZlbDEgJiYNCiAgICAgICAgICAgICAgIS9ubyBsZXZlbC9pLnRlc3QodmFsLmxldmVsMSkNCiAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgZWxzZSByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmxldmVsMmZpbHRlciA9PSAxKSB7DQogICAgICAgICAgcmVzdWx0RGF0YSA9IEpTT04ucGFyc2UoDQogICAgICAgICAgICBKU09OLnN0cmluZ2lmeSgNCiAgICAgICAgICAgICAgdGhpcy5yb3dEYXRhDQogICAgICAgICAgICApDQogICAgICAgICAgKS5maWx0ZXIoKHZhbCkgPT4gew0KICAgICAgICAgICAgaWYgKCF0aGlzLmdyb3VwaW5nU2VsZWN0ZWQgJiYgdmFsLmlzUGFyZW50TmFtZSkgcmV0dXJuIHRydWU7DQogICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgIHZhbC5sZXZlbDIgIT0gIjAiICYmDQogICAgICAgICAgICAgIHZhbC5sZXZlbDIgJiYNCiAgICAgICAgICAgICAgIS9ubyBsZXZlbC9pLnRlc3QodmFsLmxldmVsMikgJiYNCiAgICAgICAgICAgICAgdmFsLmxldmVsMSAhPSAiMCIgJiYNCiAgICAgICAgICAgICAgdmFsLmxldmVsMSAmJg0KICAgICAgICAgICAgICAhL25vIGxldmVsL2kudGVzdCh2YWwubGV2ZWwxKQ0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgIH0pOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHJlc3VsdERhdGEgPSBKU09OLnBhcnNlKA0KICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoDQogICAgICAgICAgICAgIHRoaXMucm93RGF0YQ0KICAgICAgICAgICAgKQ0KICAgICAgICAgICkNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgaWYgKHRoaXMubGV2ZWwzZmlsdGVyID09IHZhbCkgdGhpcy5sZXZlbDNmaWx0ZXIgPSBudWxsOw0KICAgICAgICBlbHNlIHRoaXMubGV2ZWwzZmlsdGVyID0gdmFsOw0KICAgICAgICBpZiAodGhpcy5sZXZlbDNmaWx0ZXIgPT0gMCkgew0KICAgICAgICAgIHJlc3VsdERhdGEgPSBKU09OLnBhcnNlKA0KICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoDQogICAgICAgICAgICAgIHRoaXMucm93RGF0YQ0KICAgICAgICAgICAgKQ0KICAgICAgICAgICkuZmlsdGVyKCh2YWwpID0+IHsNCiAgICAgICAgICAgIGlmICghdGhpcy5ncm91cGluZ1NlbGVjdGVkICYmIHZhbC5pc1BhcmVudE5hbWUpIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgaWYgKA0KICAgICAgICAgICAgICB2YWwubGV2ZWwzICE9ICIwIiAmJg0KICAgICAgICAgICAgICB2YWwubGV2ZWwzICYmDQogICAgICAgICAgICAgICEvbm8gbGV2ZWwvaS50ZXN0KHZhbC5sZXZlbDMpICYmDQogICAgICAgICAgICAgIHZhbC5sZXZlbDIgIT0gIjAiICYmDQogICAgICAgICAgICAgIHZhbC5sZXZlbDIgJiYNCiAgICAgICAgICAgICAgIS9ubyBsZXZlbC9pLnRlc3QodmFsLmxldmVsMikgJiYNCiAgICAgICAgICAgICAgdmFsLmxldmVsMSAhPSAiMCIgJiYNCiAgICAgICAgICAgICAgdmFsLmxldmVsMSAmJg0KICAgICAgICAgICAgICAhL25vIGxldmVsL2kudGVzdCh2YWwubGV2ZWwxKQ0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgZWxzZSByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmxldmVsM2ZpbHRlciA9PSAxKSB7DQogICAgICAgICAgcmVzdWx0RGF0YSA9IEpTT04ucGFyc2UoDQogICAgICAgICAgICBKU09OLnN0cmluZ2lmeSgNCiAgICAgICAgICAgICAgdGhpcy5yb3dEYXRhDQogICAgICAgICAgICApDQogICAgICAgICAgKS5maWx0ZXIoKHZhbCkgPT4gew0KICAgICAgICAgICAgaWYgKCF0aGlzLmdyb3VwaW5nU2VsZWN0ZWQgJiYgdmFsLmlzUGFyZW50TmFtZSkgcmV0dXJuIHRydWU7DQogICAgICAgICAgICBpZiAoDQogICAgICAgICAgICAgIHZhbC5sZXZlbDMgIT0gIjAiICYmDQogICAgICAgICAgICAgIHZhbC5sZXZlbDMgJiYNCiAgICAgICAgICAgICAgIS9ubyBsZXZlbC9pLnRlc3QodmFsLmxldmVsMykgJiYNCiAgICAgICAgICAgICAgdmFsLmxldmVsMiAhPSAiMCIgJiYNCiAgICAgICAgICAgICAgdmFsLmxldmVsMiAmJg0KICAgICAgICAgICAgICAhL25vIGxldmVsL2kudGVzdCh2YWwubGV2ZWwyKSAmJg0KICAgICAgICAgICAgICB2YWwubGV2ZWwxICE9ICIwIiAmJg0KICAgICAgICAgICAgICB2YWwubGV2ZWwxICYmDQogICAgICAgICAgICAgICEvbm8gbGV2ZWwvaS50ZXN0KHZhbC5sZXZlbDEpDQogICAgICAgICAgICApDQogICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgIH0pOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHJlc3VsdERhdGEgPSBKU09OLnBhcnNlKA0KICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoDQogICAgICAgICAgICAgIHRoaXMucm93RGF0YQ0KICAgICAgICAgICAgKQ0KICAgICAgICAgICkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKCF0aGlzLmdyb3VwaW5nU2VsZWN0ZWQpDQogICAgICAgIHJlc3VsdERhdGEgPSByZXN1bHREYXRhLmZpbHRlcigodmFsLCBpZHgsIGFycikgPT4gew0KICAgICAgICAgIGlmIChhcnJbaWR4ICsgMV0gJiYgdmFsLmlzUGFyZW50TmFtZSAmJiBhcnJbaWR4ICsgMV0uaXNQYXJlbnROYW1lKQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgIGVsc2UgaWYgKHRoaXMuc2VsZWN0ZWRQYXJlbnQpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkUGFyZW50ID09IHZhbC5wYXJlbnQpIHJldHVybiB0cnVlOw0KICAgICAgICAgICAgZWxzZSByZXR1cm4gZmFsc2U7DQogICAgICAgICAgfSBlbHNlIHJldHVybiB0cnVlOw0KICAgICAgICB9KTsNCiAgICAgICAgdGhpcy5ncmlkQXBpLnNldFJvd0RhdGEocmVzdWx0RGF0YSk7DQogICAgfSwNCiAgICBwcmV2ZW50VHlwZUNoYW5nZShlKSB7DQogICAgICBpZiAodGhpcy51blNhdmVkVmFsdWUubGVuZ3RoKSB7DQogICAgICAgIHRoaXMuaXNEaWFsb2dNb2RlID0gMTsNCiAgICAgICAgdGhpcy5kaWFsb2dXaWR0aCA9ICIzNXZ3IjsNCiAgICAgICAgdGhpcy5hbGVydE1lYXNzYWdlID0NCiAgICAgICAgICAiUGxlYXNlIFNhdmUgdGhlIGNoYW5nZXMgYmVmb3JlIGNoYW5naW5nIHRoZSBCYWxhbmNlIFR5cGUiOw0KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICB0aGlzLmJ1bGtUYWdMZXZlbDFFbmFibGVkID0gdHJ1ZTsNCiAgICAgICAgfSwgMCk7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGxldCB2YWwgPSBlLnRhcmdldC5pbm5lclRleHQ7DQogICAgICAgIHRoaXMuc2VsZWN0ZWRJbXBvcnRMZXZlbCA9IHZhbDsNCiAgICAgICAgdGhpcy5nZXRGdWxsTGVkZ2VyRGV0YWlscygpOw0KICAgICAgLy8gdGhpcy5ncmlkQXBpLnJlZnJlc2hDZWxscygpOw0KICAgICAgfQ0KICAgIH0sDQogICAgZG93bmxvYWRDU1YoZGF0YSkgew0KICAgICAgdmFyIGNzdiA9IHRoaXMuJHBhcGEudW5wYXJzZShkYXRhKTsNCg0KICAgICAgdmFyIGNzdkRhdGEgPSBuZXcgQmxvYihbY3N2XSwgeyB0eXBlOiAidGV4dC9jc3Y7Y2hhcnNldD11dGYtODsiIH0pOw0KICAgICAgdmFyIGNzdlVSTCA9IG51bGw7DQogICAgICBpZiAobmF2aWdhdG9yLm1zU2F2ZUJsb2IpIHsNCiAgICAgICAgY3N2VVJMID0gbmF2aWdhdG9yLm1zU2F2ZUJsb2IoY3N2RGF0YSwgImxlZGdlckRldGFpbHMuY3N2Iik7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBjc3ZVUkwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChjc3ZEYXRhKTsNCiAgICAgIH0NCg0KICAgICAgdmFyIHRlbXBMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpOw0KICAgICAgdGVtcExpbmsuaHJlZiA9IGNzdlVSTDsNCiAgICAgIHRlbXBMaW5rLnNldEF0dHJpYnV0ZSgiZG93bmxvYWQiLCAibGVkZ2VyRGV0YWlscy5jc3YiKTsNCiAgICAgIHRlbXBMaW5rLmNsaWNrKCk7DQogICAgfSwNCiAgICBhc3luYyBoYW5kbGVFeHBvcnQoaWR4KSB7DQogICAgICB2YXIgcmVzID0gbnVsbDsNCiAgICAgICAgaWYoIXRoaXMuaXNBbGxEYXRhR290KXsNCiAgICAgICAgcmVzID0gYXdhaXQgdGhpcy4kYXBpU2VydmljZS5wb3N0KCIvbGVkZ2VyRGV0YWlscy9nZXQiLCB7DQogICAgICAgICAgcmVwb3J0aW5ncGVyaW9kZGF0YWlkOiBOdW1iZXIodGhpcy5yZXBvcnRpbmdQZXJpb2RJZCksDQogICAgICAgICAgcGFyZW50TmFtZTogIkFMTCIsDQogICAgICAgICAgaXNDbG9zaW5nQmFsYW5jZTogdGhpcy5zZWxlY3RlZEltcG9ydExldmVsID09ICJDbG9zaW5nIEJhbGFuY2UiLA0KICAgICAgICB9KTsNCiAgICAgICAgdGhpcy5vcmdpbmFsVGFnZ2luZ3RyZWVEYXRhID0gSlNPTi5wYXJzZShyZXMuZGF0YS5kYXRhKTsNCiAgICAgICAgfQ0KICAgICAgaWYgKHRoaXMuaXNBbGxEYXRhR290IHx8IChyZXMgJiYgcmVzLnN0YXR1cyA9PT0gMjAwKSkgew0KICAgICAgICB0aGlzLmlzQWxsRGF0YUdvdCA9IHRydWU7DQogICAgICAgIHZhciBwZGZEYXRhID0gdGhpcy5vcmdpbmFsVGFnZ2luZ3RyZWVEYXRhLm1hcCgodmFsKSA9PiB7DQogICAgICAgICAgaWYgKHZhbC5pc1BhcmVudE5hbWUpDQogICAgICAgICAgICByZXR1cm4gWw0KICAgICAgICAgICAgICB7IGNvbnRlbnQ6IHZhbC5uYW1lLCBjb2xTcGFuOiA2LCBzdHlsZXM6IHsgZm9udFN0eWxlOiAiYm9sZCIgfSB9LA0KICAgICAgICAgICAgXTsNCiAgICAgICAgICBlbHNlDQogICAgICAgICAgICByZXR1cm4gWw0KICAgICAgICAgICAgICB2YWwubmFtZSxudW1lcmFsKHZhbFsiYmFsYW5jZSJdKS5mb3JtYXQoIjAsMCIpLA0KICAgICAgICAgICAgICAvLyB0aGlzLnNlbGVjdGVkSW1wb3J0TGV2ZWwgPT0gIkNsb3NpbmcgQmFsYW5jZSINCiAgICAgICAgICAgICAgLy8gICA/IG51bWVyYWwodmFsWyJiYWxhbmNlIl0pLmZvcm1hdCgiMCwwIikNCiAgICAgICAgICAgICAgLy8gICA6IG51bWVyYWwodmFsWyJiYWxhbmNlIl0pLmZvcm1hdCgiMCwwIiksDQogICAgICAgICAgICAgIHZhbFsiZHJjciJdID8gdmFsWyJkcmNyIl0gOiAiRHIiLA0KICAgICAgICAgICAgICB2YWwubGV2ZWwxLA0KICAgICAgICAgICAgICB2YWwubGV2ZWwyLA0KICAgICAgICAgICAgICB2YWwubGV2ZWwzLA0KICAgICAgICAgICAgXTsNCiAgICAgICAgfSk7DQogICAgICAgIGlmIChpZHggPT0gMSkgew0KICAgICAgICAgIHRoaXMuZ2VuZXJhdGVQZGYoDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIHRoZW1lOiAiZ3JpZCIsDQogICAgICAgICAgICAgIC8vIGJvZHk6IFsNCiAgICAgICAgICAgICAgLy8gW3sgY29udGVudDogJ1RleHQnLHNhbXBsZTonZ2gnLCBjb2xTcGFuOiAyLCBzdHlsZXM6IHsgaGFsaWduOiAnY2VudGVyJyB9IH1dLA0KICAgICAgICAgICAgICBib2R5OiBwZGZEYXRhLA0KICAgICAgICAgICAgICAvLyBdLA0KICAgICAgICAgICAgICBoZWFkOiBbDQogICAgICAgICAgICAgICAgWw0KICAgICAgICAgICAgICAgICAgIk5hbWUgT2YgTGVkZ2VycyIsDQogICAgICAgICAgICAgICAgICAiQW1vdW50IiwNCiAgICAgICAgICAgICAgICAgICJEci9DciIsDQogICAgICAgICAgICAgICAgICAiTEVWRUwgMSIsDQogICAgICAgICAgICAgICAgICAiTEVWRUwgMiIsDQogICAgICAgICAgICAgICAgICAiTEVWRUwgMyIsDQogICAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgXSwNCiAgICAgICAgICAgICAgdGFibGVXaWR0aDogImF1dG8iLA0KICAgICAgICAgICAgICBzdHlsZXM6IHsgZm9udFNpemU6ICI3LjUiIH0sDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgImxlZGdlckRldGFpbHMiDQogICAgICAgICAgKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLmV4Y2VsQXJyYXkgPSB0aGlzLm9yZ2luYWxUYWdnaW5ndHJlZURhdGEubWFwKCh2YWwpID0+IHsNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICJOYW1lIE9mIExlZGdlciI6IHZhbC5uYW1lLA0KICAgICAgICAgICAgICBBbW91bnQ6bnVtZXJhbCh2YWxbImJhbGFuY2UiXSkuZm9ybWF0KCIwLDAiKSwNCiAgICAgICAgICAgICAgICAvLyB0aGlzLnNlbGVjdGVkSW1wb3J0TGV2ZWwgPT0gIkNsb3NpbmcgQmFsYW5jZSINCiAgICAgICAgICAgICAgICAvLyAgID8gbnVtZXJhbCh2YWxbImJhbGFuY2UiXSkuZm9ybWF0KCIwLDAiKQ0KICAgICAgICAgICAgICAgIC8vICAgOiBudW1lcmFsKHZhbFsiYmFsYW5jZSJdKS5mb3JtYXQoIjAsMCIpLA0KICAgICAgICAgICAgICAiRHIvQ3IiOiB2YWxbImRyY3IiXSA/IHZhbFsiZHJjciJdIDogIkRyIiwNCiAgICAgICAgICAgICAgIkxFVkVMIDEiOiB2YWwubGV2ZWwxLA0KICAgICAgICAgICAgICAiTEVWRUwgMiI6IHZhbC5sZXZlbDIsDQogICAgICAgICAgICAgICJMRVZFTCAzIjogdmFsLmxldmVsMywNCiAgICAgICAgICAgIH07DQogICAgICAgICAgfSk7DQogICAgICAgICAgdGhpcy5kb3dubG9hZENTVih0aGlzLmV4Y2VsQXJyYXkpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBnZW5lcmF0ZVBkZihjb25maWcsIG5hbWUpIHsNCiAgICAgIGNvbnN0IGRvYyA9IG5ldyBqc1BERigpOw0KICAgICAgZG9jLmF1dG9UYWJsZShjb25maWcpOw0KICAgICAgZG9jLnNhdmUobmFtZSArICIucGRmIik7DQogICAgfSwNCiAgICBoYW5kbGVBbGxMZWRnZXJzKCkgew0KICAgICAgdGhpcy5jaGVja0JveFZhbHVlID0gIXRoaXMuY2hlY2tCb3hWYWx1ZTsNCiAgICAgIHRoaXMucm93RGF0YSA9IHRoaXMucm93RGF0YS5tYXAoKHgpID0+IHsNCiAgICAgICAgeC5zZWxlY3RlZCA9IHRoaXMuY2hlY2tCb3hWYWx1ZTsNCiAgICAgICAgcmV0dXJuIHg7DQogICAgICB9KTsNCiAgICB9LA0KICAgIGxlZGdlckRpYWxvZ2wxQ2hhbmdlZChlKSB7DQogICAgICB0aGlzLmRpYWxvZ0wxVmFsdWUgPSBlOw0KICAgICAgaWYgKHRoaXMuaXNEaWFsb2dNb2RlID09IDMpIHsNCiAgICAgICAgdGhpcy5kaWFsb2dMMlZhbHVlID0gIiI7DQogICAgICAgIHRoaXMubDIgPSBbXTsNCiAgICAgICAgaWYgKHRoaXMubDJPcHRpb25zW2VdKSB0aGlzLmwyID0gdGhpcy5sMk9wdGlvbnNbZV07DQogICAgICB9DQogICAgfSwNCiAgICBsZWRnZXJEaWFsb2dsMkNoYW5nZWQoZSkgew0KICAgICAgdGhpcy5kaWFsb2dMMlZhbHVlID0gZTsNCiAgICB9LA0KICAgIGNsb3NlRGlhbG9nKCkgew0KICAgICAgdGhpcy5idWxrVGFnTGV2ZWwxRW5hYmxlZCA9IGZhbHNlOw0KICAgIH0sDQogICAgZmlsdGVyVGFibGVCeWxlZGdlcihlKSB7IA0KICAgICAgdmFyIHJlc3VsdERhdGEgPSBbXTsNCiAgICAgIHRoaXMub3JnaW5hbFRhZ2dpbmd0cmVlRGF0YS5mb3JFYWNoKCh2YWwpID0+IHsNCiAgICAgICAgaWYgKGUpIHsgICAgICAgICAgDQogICAgICAgICAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cChlLCAiaSIpOw0KICAgICAgICAgIGlmICgNCiAgICAgICAgICAgIHJlZ2V4LnRlc3QodmFsLm5hbWUpICYmDQogICAgICAgICAgICAodGhpcy5zZWxlY3RlZFBhcmVudCA/IHRoaXMuc2VsZWN0ZWRQYXJlbnQgPT0gdmFsLnBhcmVudCA6IHRydWUpDQogICAgICAgICAgKQ0KICAgICAgICAgICAgcmVzdWx0RGF0YS5wdXNoKHZhbCk7DQogICAgICAgIH0gZWxzZSBpZih0aGlzLnNlbGVjdGVkUGFyZW50ID09IHZhbC5wYXJlbnQpIHJlc3VsdERhdGEucHVzaCh2YWwpOw0KICAgICAgfSk7DQogICAgICB0aGlzLmdyaWRBcGkuc2V0Um93RGF0YShyZXN1bHREYXRhKQ0KICAgIH0sDQogICAgYXN5bmMgZ2V0RnVsbExlZGdlckRldGFpbHMoKXsNCiAgICAgIHN0b3JlLmNvbW1pdCgnU0VUX0lTX0xPQURJTkcnLHRydWUpOyAgDQogICAgICAvL2dldCBsZWRnZXIgZGV0YWlscyBieSByZXBvcnRpbmdyZXBlcmlvZGlkICxwYXJlbnQgbmFtZSBhbmQgYmFsYW5jZSB0eXBlDQogICAgICAgICAgdmFyIHJlcyA9IGF3YWl0IHRoaXMuJGFwaVNlcnZpY2UucG9zdCgiL2xlZGdlckRldGFpbHMvZ2V0Iiwgew0KICAgICAgICAgICAgcmVwb3J0aW5ncGVyaW9kZGF0YWlkOiBOdW1iZXIodGhpcy5yZXBvcnRpbmdQZXJpb2RJZCksDQogICAgICAgICAgICBwYXJlbnROYW1lOiAiQUxMIiwNCiAgICAgICAgICAgIGlzQ2xvc2luZ0JhbGFuY2U6IHRoaXMuc2VsZWN0ZWRJbXBvcnRMZXZlbCA9PSAiQ2xvc2luZyBCYWxhbmNlIiwNCiAgICAgICAgICB9KTsNCiAgICAgICAgICBpZiAocmVzICYmIHJlcy5zdGF0dXMgPT09IDIwMCkgew0KICAgICAgICAgICAgcmVzLmRhdGEuZGF0YSA9IEpTT04ucGFyc2UocmVzLmRhdGEuZGF0YSkubWFwKCh2YWwpID0+IHsNCiAgICAgICAgICAgICAgdmFsWyJsZXZlbDEiXSA9IHZhbFsibGV2ZWwxIl0gJiYgdmFsWyJsZXZlbDEiXSE9IjAiID8gdmFsWyJsZXZlbDEiXS50cmltKCkgOiAiIjsNCiAgICAgICAgICAgICAgdmFsWyJsZXZlbDIiXSA9IHZhbFsibGV2ZWwyIl0gJiYgdmFsWyJsZXZlbDEiXSE9IjAiID8gdmFsWyJsZXZlbDIiXS50cmltKCkgOiAiIjsNCiAgICAgICAgICAgICAgdmFsWyJsZXZlbDMiXSA9IHZhbFsibGV2ZWwzIl0gJiYgdmFsWyJsZXZlbDEiXSE9IjAiID8gdmFsWyJsZXZlbDMiXS50cmltKCkgOiAiIjsNCiAgICAgICAgICAgICAgdmFsWyJkcmNyIl0gPSB2YWxbImRyY3IiXT92YWxbImRyY3IiXToiRHIiOw0KDQogICAgICAgICAgICAgIHZhbC5sZXZlbDJPcHRpb25zID0gdGhpcy5sMk9wdGlvbnNbdmFsWyJsZXZlbDEiXV07DQogICAgICAgICAgICAgIGlmICh2YWwubGV2ZWwyT3B0aW9ucykNCiAgICAgICAgICAgICAgICB2YWwubGV2ZWwzT3B0aW9ucyA9IHRoaXMubDNPcHRpb25zW3ZhbFsibGV2ZWwxIl1dW3ZhbFsibGV2ZWwyIl1dOw0KICAgICAgICAgICAgICByZXR1cm4gdmFsOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLnBhcmVudERpc3BsYXlWYWx1ZXMuaW5kZXhPZih0aGlzLnNlbGVjdGVkUGFyZW50KTsNCiAgICAgICAgICAgIHRoaXMub3JnaW5hbFRhZ2dpbmd0cmVlRGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEuZGF0YSkpOw0KICAgICAgICAgICAgdGhpcy5pc0FsbERhdGFHb3QgPSB0cnVlOw0KICAgICAgICAgICAgdGhpcy5oYW5kbGVTZWxlY3RQYXJlbnQoaW5kZXgpOw0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEuZGF0YSwicmVzLmRhdGEuZGF0YSIpDQogICAgICAgICAgICAvLyB0aGlzLnJvd0RhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlcy5kYXRhLmRhdGEpKTsNCiAgICAgICAgICAgIA0KICAgICAgICAgIH0NCiAgICAgICAgICBzdG9yZS5jb21taXQoJ1NFVF9JU19MT0FESU5HJyx0cnVlKTsgDQogICAgICAgICAgICAgIC8vZ2V0IHRhZ2dpbmcgZGFzaG9hcmQgdmFsdWUNCiAgICAgICAgICB2YXIgcmVzMSA9IGF3YWl0IHRoaXMuJGFwaVNlcnZpY2UuZ2V0KGBsZWRnZXIvdGFnZ2luZ2Rhc2h2YWx1ZT9yZXBvcnRpbmdQZXJpb2RJZD0ke3Nlc3Npb25TdG9yYWdlLmdldEl0ZW0oInJlcG9ydElkIil9JmxldmVsPSR7c2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidGFnZ2luZ0xldmVsIil9YCk7DQogICAgICAgICAgaWYocmVzMSYmcmVzMS5zdGF0dXMgPT09IDIwMCkgeyAgDQogICAgICAgICAgICB0aGlzLnRvdGFsTGVkZ2VyID0gcmVzMS5kYXRhLmRhdGEuY2xvc2luZ0JhbGFuY2UubGVkZ2VyLnRvdGFsOw0KICAgICAgICAgICAgdGhpcy50b3RhbHRhZ2dlZExlZGdlciA9IHJlczEuZGF0YS5kYXRhLmNsb3NpbmdCYWxhbmNlLmxlZGdlci50YWdnZWQ7DQogICAgICAgICAgfSANCiAgICB9LA0KICAgIGFzeW5jIGdldExlZGdlckRldGFpbHMoKSB7DQogICAgICBzdG9yZS5jb21taXQoJ1NFVF9JU19MT0FESU5HJyx0cnVlKTsgDQogICAgICB0aGlzLmZpbmEgPSBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImZpbmEiKSk7DQogICAgICB2YXIgY29tcGFueUlkID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJmaW5hIikpLmNvbXBhbnlfaWQ7ICAgICAgDQogICAgICAvLyBnZXQgbDEgbDIgbDMgb3B0aW9ucyBieSBjb21wYW55IHR5cGUNCiAgICAgIHZhciBsZXZlbHNPcHRpb25zUmVzID0gYXdhaXQgdGhpcy4kYXBpU2VydmljZS5wb3N0KCIvdGFnZ2luZ3RyZWUiLCB7DQogICAgICAgIGNvbXBhbnlJZDogY29tcGFueUlkLA0KICAgICAgfSk7DQogICAgICBzdG9yZS5jb21taXQoJ1NFVF9JU19MT0FESU5HJyx0cnVlKTsgICAgICAgDQogICAgICB2YXIgb3B0aW9ucyA9IEpTT04ucGFyc2UobGV2ZWxzT3B0aW9uc1Jlcy5kYXRhLmRhdGEpOw0KICAgICAgdGhpcy5sMU9wdGlvbnMgPSBvcHRpb25zLmwxLmRhdGE7DQogICAgICB0aGlzLmwyT3B0aW9ucyA9IG9wdGlvbnMubDI7DQogICAgICB0aGlzLmwzT3B0aW9ucyA9IG9wdGlvbnMubDM7DQogICAgICB0aGlzLmwxRmlsdGVyT3B0aW9uID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmwxT3B0aW9ucykpOw0KICAgICAgLy9nb3J1cCB3aXNlIHRhZ2dpbmcgY29uY2VwdA0KICAgICAgdmFyIHRvdGFsID0gMDsNCiAgICAgIHZhciBwYXJlbnRuYW1lID0gW107DQogICAgICB2YXIgbG9vcENvdW50ID0gMDsNCiAgICAgIHRoaXMucG9zc2libGVQYXJlbnRzPVtdOw0KICAgICAgdmFyIGZpcnN0TGVkZ2VyR290ID0gZmFsc2U7IA0KICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgIHN0b3JlLmNvbW1pdCgnU0VUX0lTX0xPQURJTkcnLHRydWUpOw0KICAgICAgfSwgMTAwKTsNCiAgICAgICBzdG9yZS5jb21taXQoJ1NFVF9JU19MT0FESU5HJyx0cnVlKTsgICAgIA0KICAgICAgdGhpcy5jb25zdGFudGx5Q2hlY2tpbmcgPSBzZXRJbnRlcnZhbChhc3luYygpID0+IHsNCiAgICAgICAgdmFyIHBhcmVudFJlczsNCiAgICAgICAgaWYoIWZpcnN0TGVkZ2VyR290KXsNCiAgICAgICAgLy9nZXQgYWxsIHBhcmVudHMgbmFtZSBmb3IgdGhpcyByZXBvcnRpbmdwZXJpb2QgaWQNCiAgICAgICAgcGFyZW50UmVzID0gYXdhaXQgdGhpcy4kYXBpU2VydmljZS5wb3N0KCIvbGVkZ2VyRGV0YWlscy9nZXRQYXJlbnRzIiwgew0KICAgICAgICAgIHJlcG9ydGluZ3BlcmlvZGRhdGFpZDogTnVtYmVyKHRoaXMucmVwb3J0aW5nUGVyaW9kSWQpDQogICAgICAgIH0pOw0KICAgICAgICANCiAgICAgICAgc3RvcmUuY29tbWl0KCdTRVRfSVNfTE9BRElORycsdHJ1ZSk7IA0KICAgICAgICB9DQogICAgICAgIGVsc2V7DQogICAgICAgICAgYXdhaXQgZmV0Y2goImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9sZWRnZXJEZXRhaWxzL2dldFBhcmVudHMiLHttZXRob2Q6IlBPU1QiLGhlYWRlcnM6ew0KICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJw0KICAgICAgICAgICAgfSxib2R5OkpTT04uc3RyaW5naWZ5KHtyZXBvcnRpbmdwZXJpb2RkYXRhaWQ6IE51bWJlcih0aGlzLnJlcG9ydGluZ1BlcmlvZElkKX0pDQogICAgICAgICAgfSkudGhlbihyZXM9PnJlcy5qc29uKCkpLnRoZW4ocmVzPT57cGFyZW50UmVzPXsiZGF0YSI6cmVzfX0pOw0KICAgICAgICAgIA0KICAgICAgICB9DQogICAgICAgIGNvbnNvbGUubG9nKHBhcmVudFJlcywicGFyZW50UmVzIikNCiAgICAgICAgaWYgKHBhcmVudFJlcykgew0KICAgICAgICAgIGlmKCF0b3RhbCkgdG90YWwgPSBwYXJlbnRSZXMuZGF0YS5kYXRhLnRvdGFsZ3JvdXA7DQogICAgICAgICAgY29uc29sZS5sb2cocGFyZW50UmVzLmRhdGEuZGF0YS5ncm91cGNvbXBsZXRlZCwicGFyZW50UmVzLmRhdGEuZGF0YS5ncm91cGNvbXBsZXRlZCIpDQogICAgICAgICAgcGFyZW50bmFtZVtsb29wQ291bnRdID0gcGFyZW50UmVzLmRhdGEuZGF0YS5ncm91cGNvbXBsZXRlZDsNCiAgICAgICAgICBwYXJlbnRuYW1lW2xvb3BDb3VudF0uZm9yRWFjaCgodmFsLGlkeCk9PnsNCiAgICAgICAgICAgIGlmKHZhbCAhPSAnUHJvZml0ICYgTG9zcyBBL2MnICYmIGlkeD50aGlzLnBvc3NpYmxlUGFyZW50cy5sZW5ndGgtMSkNCiAgICAgICAgICAgICAgdGhpcy5wb3NzaWJsZVBhcmVudHMucHVzaCh7Im5hbWUiOnZhbH0pDQogICAgICAgICAgfSkNCiAgICAgICAgICANCiAgICAgICAgICBpZih0aGlzLnBhcmVudERpc3BsYXlWYWx1ZXMubGVuZ3RoPD01KXRoaXMucGFyZW50RGlzcGxheVZhbHVlcyA9IHRoaXMucG9zc2libGVQYXJlbnRzLm1hcCh2YWw9PnZhbC5uYW1lKS5zbGljZSgwLCA1KTsNCiAgICAgICAgICBpZighdGhpcy5zZWxlY3RlZFBhcmVudCl0aGlzLnNlbGVjdGVkUGFyZW50ID0gdGhpcy5wYXJlbnREaXNwbGF5VmFsdWVzWzBdOw0KICAgICAgICAgIGlmKCF0aGlzLnNlbGVjdGVkUGFyZW50KXRoaXMuaXNQYXJlbnREZXRhaWxzQXZhaWxhYmxlLnB1c2godGhpcy5zZWxlY3RlZFBhcmVudCk7DQogICAgICAgICAgY29uc29sZS5sb2coZmlyc3RMZWRnZXJHb3QgLHRoaXMucG9zc2libGVQYXJlbnRzWzBdICkNCiAgICAgICAgICBpZighZmlyc3RMZWRnZXJHb3QgJiYgdGhpcy5wb3NzaWJsZVBhcmVudHNbMF0pew0KICAgICAgICAgICAgICAgIGZpcnN0TGVkZ2VyR290ID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAvL2dldCBsZWRnZXIgZGV0YWlscyBieSByZXBvcnRpbmdyZXBlcmlvZGlkICxwYXJlbnQgbmFtZSBhbmQgYmFsYW5jZSB0eXBlDQogICAgICAgICAgICAgICAgdmFyIHJlcyA9IGF3YWl0IHRoaXMuJGFwaVNlcnZpY2UucG9zdCgiL2xlZGdlckRldGFpbHMvZ2V0Iiwgew0KICAgICAgICAgICAgICAgICAgcmVwb3J0aW5ncGVyaW9kZGF0YWlkOiBOdW1iZXIodGhpcy5yZXBvcnRpbmdQZXJpb2RJZCksDQogICAgICAgICAgICAgICAgICBwYXJlbnROYW1lOiB0aGlzLnBhcmVudERpc3BsYXlWYWx1ZXNbMF0sDQogICAgICAgICAgICAgICAgICBpc0Nsb3NpbmdCYWxhbmNlOiB0cnVlLA0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIGlmIChyZXMgJiYgcmVzLnN0YXR1cyA9PT0gMjAwKSB7DQogICAgICAgICAgICAgICAgICByZXMuZGF0YS5kYXRhID0gSlNPTi5wYXJzZShyZXMuZGF0YS5kYXRhKS5tYXAoKHZhbCkgPT4gew0KICAgICAgICAgICAgICAgICAgICB2YWxbImxldmVsMSJdID0gdmFsWyJsZXZlbDEiXSAmJiB2YWxbImxldmVsMSJdIT0iMCIgPyB2YWxbImxldmVsMSJdLnRyaW0oKSA6ICIiOw0KICAgICAgICAgICAgICAgICAgICB2YWxbImxldmVsMiJdID0gdmFsWyJsZXZlbDIiXSAmJiB2YWxbImxldmVsMSJdIT0iMCIgPyB2YWxbImxldmVsMiJdLnRyaW0oKSA6ICIiOw0KICAgICAgICAgICAgICAgICAgICB2YWxbImxldmVsMyJdID0gdmFsWyJsZXZlbDMiXSAmJiB2YWxbImxldmVsMSJdIT0iMCIgPyB2YWxbImxldmVsMyJdLnRyaW0oKSA6ICIiOw0KICAgICAgICAgICAgICAgICAgICB2YWxbImRyY3IiXSA9IHZhbFsiZHJjciJdP3ZhbFsiZHJjciJdOiJEciI7DQogICAgICAgICAgICAgICAgICAgIHZhbC5sZXZlbDJPcHRpb25zID0gdGhpcy5sMk9wdGlvbnNbdmFsWyJsZXZlbDEiXV07DQogICAgICAgICAgICAgICAgICAgIGlmICh2YWwubGV2ZWwyT3B0aW9ucykNCiAgICAgICAgICAgICAgICAgICAgICB2YWwubGV2ZWwzT3B0aW9ucyA9IHRoaXMubDNPcHRpb25zW3ZhbFsibGV2ZWwxIl1dW3ZhbFsibGV2ZWwyIl1dOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsOw0KICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICB0aGlzLnJvd0RhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlcy5kYXRhLmRhdGEpKTsNCiAgICAgICAgICAgICAgICAgIHRoaXMub3JnaW5hbFRhZ2dpbmd0cmVlRGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEuZGF0YSkpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgaWYodG90YWwgPD0gcGFyZW50UmVzLmRhdGEuZGF0YS5ncm91cGNvbXBsZXRlZC5sZW5ndGgpIHsgIA0KICAgICAgICAgICAgdGhpcy5jbGVhckludGVydmFsRm4oKTsgICAgICAgICAgDQogICAgICAgICAgICB0aGlzLmdldEZ1bGxMZWRnZXJEZXRhaWxzKCkNCiAgICAgIC8vICAgICAgICAgICAgIC8vZ2V0IHRvdGFsIGxlZGdlciBjb3VudCBmb3IgdGhpcyByZXBvcnRpbmdwZXJpb2QgaWQNCiAgICAgIC8vIHZhciB0b3RhbFJlcyA9IGF3YWl0IHRoaXMuJGFwaVNlcnZpY2UucG9zdCgNCiAgICAgIC8vICAgIi9sZWRnZXJEZXRhaWxzL2dldFRvdGFsTGVkZ2VyQ291bnQiLA0KICAgICAgLy8gICB7IHJlcG9ydGluZ3BlcmlvZGRhdGFpZDogcmVwb3J0aW5nUGVyaW9kSWQgfQ0KICAgICAgLy8gKTsNCiAgICAgIC8vIGlmICh0b3RhbFJlcyAmJiB0b3RhbFJlcy5zdGF0dXMgPT09IDIwMCkgew0KICAgICAgLy8gICB0aGlzLnRvdGFsTGVkZ2VyID0gdG90YWxSZXMuZGF0YS5kYXRhWzBdLmV4YWN0X2NvdW50Ow0KICAgICAgLy8gfQ0KICAgIC8vZ2V0IHRhZ2dpbmcgZGFzaG9hcmQgdmFsdWUNCiAgICAgICAgdmFyIHJlczEgPSBhd2FpdCB0aGlzLiRhcGlTZXJ2aWNlLmdldChgbGVkZ2VyL3RhZ2dpbmdkYXNodmFsdWU/cmVwb3J0aW5nUGVyaW9kSWQ9JHtzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJyZXBvcnRJZCIpfSZsZXZlbD0ke3Nlc3Npb25TdG9yYWdlLmdldEl0ZW0oInRhZ2dpbmdMZXZlbCIpfWApOw0KICAgICAgICAgICAgaWYocmVzMSYmcmVzMS5zdGF0dXMgPT09IDIwMCkgeyAgDQogICAgICAgICAgICAgIHRoaXMudG90YWxMZWRnZXIgPSByZXMxLmRhdGEuZGF0YS5jbG9zaW5nQmFsYW5jZS5sZWRnZXIudG90YWw7DQogICAgICAgICAgICAgIHRoaXMudG90YWx0YWdnZWRMZWRnZXIgPSByZXMxLmRhdGEuZGF0YS5jbG9zaW5nQmFsYW5jZS5sZWRnZXIudGFnZ2VkOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgfQ0KICAgICAgICAgIGxvb3BDb3VudCsrOw0KICAgICAgICB9IA0KICAgICAgICBlbHNlew0KICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuY29uc3RhbnRseUNoZWNraW5nKTsNCiAgICAgICAgfSAgICAgICANCiAgICAgICAgfSwgMzAwMCk7DQogICAgfSwNCiAgICBjbGVhckludGVydmFsRm4oKXsNCiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5jb25zdGFudGx5Q2hlY2tpbmcpDQogICAgfSwNCiAgICBhc3luYyB2aWV3Q2hhbmdlKGUpIHsNCiAgICAgIHRoaXMuZ3JvdXBpbmdTZWxlY3RlZCA9IGU7DQogICAgICBpZiAoZSkgew0KICAgICAgICB0aGlzLnRhYmxlSGVpZ2h0ID0gIjYxLjh2aCI7DQogICAgICAgICAgLy8gdGhpcy5ncmlkQXBpLnNldFJvd0RhdGEoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLm9yZ2luYWxUYWdnaW5ndHJlZURhdGEpKSkNCiAgICAgICAgICB0aGlzLnJvd0RhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMub3JnaW5hbFRhZ2dpbmd0cmVlRGF0YSkpLmZpbHRlcih2YWw9PnRoaXMuc2VsZWN0ZWRQYXJlbnQgPT0gdmFsLnBhcmVudCk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmlzUm93R3JvdXBPcGVuID0gW107DQogICAgICAgIHRoaXMudGFibGVIZWlnaHQgPSAiNjh2aCI7DQogICAgICAgIHZhciByZXMgPSBudWxsOw0KICAgICAgICBpZighdGhpcy5pc0FsbERhdGFHb3Qpew0KICAgICAgICByZXMgPSBhd2FpdCB0aGlzLiRhcGlTZXJ2aWNlLnBvc3QoIi9sZWRnZXJEZXRhaWxzL2dldCIsIHsNCiAgICAgICAgICByZXBvcnRpbmdwZXJpb2RkYXRhaWQ6IE51bWJlcih0aGlzLnJlcG9ydGluZ1BlcmlvZElkKSwNCiAgICAgICAgICBwYXJlbnROYW1lOiAiQUxMIiwNCiAgICAgICAgICBpc0Nsb3NpbmdCYWxhbmNlOiB0aGlzLnNlbGVjdGVkSW1wb3J0TGV2ZWwgPT0gIkNsb3NpbmcgQmFsYW5jZSIsDQogICAgICAgIH0pOw0KICAgICAgICB0aGlzLm9yZ2luYWxUYWdnaW5ndHJlZURhdGEgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJlcykpDQogICAgICAgIH0NCiAgICAgICAgZWxzZXsNCiAgICAgICAgICByZXMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMub3JnaW5hbFRhZ2dpbmd0cmVlRGF0YSkpOw0KICAgICAgICB9DQogICAgICAgIGlmICh0aGlzLmlzQWxsRGF0YUdvdCB8fCAocmVzICYmIHJlcy5zdGF0dXMgPT09IDIwMCkpIHsNCiAgICAgICAgICB0aGlzLmlzQWxsRGF0YUdvdCA9IHRydWU7DQogICAgICAgICAgbGV0IGRhdGFDb3B5ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLm9yZ2luYWxUYWdnaW5ndHJlZURhdGEpKTsNCiAgICAgICAgICBsZXQgcmVzdWx0RGF0YSA9IFtdOw0KICAgICAgICAgIHZhciB0ZW1wMSA9IHRoaXMuJF8uZ3JvdXBCeShkYXRhQ29weSwgKHZhbCkgPT4gdmFsLnBhcmVudCk7DQogICAgICAgICAgdmFyIGluZGV4Rm9yU29ydCA9IDA7DQogICAgICAgICAgZm9yIChsZXQga2V5IGluIHRlbXAxKSB7DQogICAgICAgICAgICB0aGlzLmlzUm93R3JvdXBPcGVuW2tleV0gPSB0cnVlOw0KICAgICAgICAgICAgcmVzdWx0RGF0YS5wdXNoKHsNCiAgICAgICAgICAgICAgcGFyZW50OmtleSwNCiAgICAgICAgICAgICAgbmFtZToga2V5LA0KICAgICAgICAgICAgICBpc1BhcmVudE5hbWU6IHRydWUsDQogICAgICAgICAgICAgIGluZGV4Rm9yU29ydDogaW5kZXhGb3JTb3J0KyssDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHRlbXAxW2tleV0gPSB0ZW1wMVtrZXldLm1hcCgodmFsKSA9PiB7DQogICAgICAgICAgICAgIHZhbFsibGV2ZWwxIl0gPSB2YWxbImxldmVsMSJdID8gdmFsWyJsZXZlbDEiXS50cmltKCkgOiAiIjsNCiAgICAgICAgICB2YWxbImxldmVsMiJdID0gdmFsWyJsZXZlbDIiXSA/IHZhbFsibGV2ZWwyIl0udHJpbSgpIDogIiI7DQogICAgICAgICAgdmFsWyJsZXZlbDMiXSA9IHZhbFsibGV2ZWwzIl0gPyB2YWxbImxldmVsMyJdLnRyaW0oKSA6ICIiOw0KICAgICAgICAgIHZhbFsiZHJjciJdID0gdmFsWyJkcmNyIl0/dmFsWyJkcmNyIl06IkRyIjsNCg0KICAgICAgICAgIHZhbC5sZXZlbDJPcHRpb25zID0gdGhpcy5sMk9wdGlvbnNbdmFsWyJsZXZlbDEiXV07DQogICAgICAgICAgaWYgKHZhbC5sZXZlbDJPcHRpb25zKQ0KICAgICAgICAgICAgdmFsLmxldmVsM09wdGlvbnMgPSB0aGlzLmwzT3B0aW9uc1t2YWxbImxldmVsMSJdXVt2YWxbImxldmVsMiJdXTsNCiAgICAgICAgICAgICAgdmFsWyJpbmRleEZvclNvcnQiXSA9IGluZGV4Rm9yU29ydCsrOw0KICAgICAgICAgICAgICByZXR1cm4gdmFsOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICByZXN1bHREYXRhID0gcmVzdWx0RGF0YS5jb25jYXQodGVtcDFba2V5XSk7DQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMucm93RGF0YSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzdWx0RGF0YSkpOw0KICAgICAgICAgIC8vIHRoaXMuZ3JpZEFwaS5zZXRSb3dEYXRhKEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzdWx0RGF0YSkpKQ0KICAgICAgICAgIHRoaXMubGVkZ2VyRGF0YUNvcHkgPSByZXN1bHREYXRhOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSwNCiAgICBidWxrVGFnTGV2ZWwodmFsKSB7DQogICAgICB0aGlzLmRpYWxvZ0wxVmFsdWUgPSAiIjsNCiAgICAgIHRoaXMuZGlhbG9nTDJWYWx1ZSA9ICIiOw0KICAgICAgbGV0IHNlbGVjdGVkID0gW107DQogICAgICBzZWxlY3RlZCA9IHRoaXMucm93RGF0YS5maWx0ZXIoKHgpID0+IHguc2VsZWN0ZWQgPT0gdHJ1ZSk7DQogICAgICBpZiAoc2VsZWN0ZWQubGVuZ3RoIDwgMSkgew0KICAgICAgICB0aGlzLmlzRGlhbG9nTW9kZSA9IDE7DQogICAgICAgIHRoaXMuZGlhbG9nV2lkdGggPSAiMzV2dyI7DQogICAgICAgIHRoaXMuYWxlcnRNZWFzc2FnZSA9DQogICAgICAgICAgIlBsZWFzZSBTZWxlY3QgYXRsZXN0IG9uZSBMZWRnZXIgdG8gZG8gQnVsayB0YWdnaW5nLiI7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmlzRGlhbG9nTW9kZSA9IHZhbDsNCiAgICAgICAgaWYgKHZhbCA9PSAyKSB0aGlzLmRpYWxvZ1dpZHRoID0gIjM1dnciOw0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICBsZXQgaXNTYW1lID0gdHJ1ZTsNCiAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNlbGVjdGVkLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICBpZiAoc2VsZWN0ZWRbaV0ubGV2ZWwxICE9IHNlbGVjdGVkW2kgLSAxXS5sZXZlbDEpIHsNCiAgICAgICAgICAgICAgaXNTYW1lID0gZmFsc2U7DQogICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoaXNTYW1lIHx8IHRoaXMuaXNEaWZmQnVsY2spIHsNCiAgICAgICAgICAgIHRoaXMuZGlhbG9nV2lkdGggPSAiNTB2dyI7DQogICAgICAgICAgICB0aGlzLmlzRGlmZkJ1bGNrID0gZmFsc2U7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuaXNEaWZmQnVsY2sgPSAhaXNTYW1lOw0KICAgICAgICAgICAgdGhpcy5pc0RpYWxvZ01vZGUgPSAxOw0KICAgICAgICAgICAgdGhpcy5kaWFsb2dXaWR0aCA9ICIzNXZ3IjsNCiAgICAgICAgICAgIHRoaXMuYWxlcnRNZWFzc2FnZSA9DQogICAgICAgICAgICAgICJTZWxlY3RlZCBMZWRnZXJzIGhhcyBkaWZmZXJlbnQgTDEgdmFsdWVzLERvIHlvdSB3YW50IHRvIENvbnRpbnVlPyI7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgICB0aGlzLmJ1bGtUYWdMZXZlbDFFbmFibGVkID0gdHJ1ZTsNCiAgICB9LA0KICAgIGhpZGVMZXZlbDNGaWVsZHMoKSB7DQogICAgICBsZXQgbW9kaWZpZWRDb2x1bW4gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuYWxsQ29sdW1uRGVmcykpOw0KICAgICAgbW9kaWZpZWRDb2x1bW5bN10uaGlkZSA9dHJ1ZTsNCiAgICAgIHRoaXMuY29sdW1uRGVmcz0gbW9kaWZpZWRDb2x1bW47DQogICAgICB0aGlzLnNob3dMZXZlbDMgPSBmYWxzZTsNCiAgICB9LA0KICAgIGhpZGVMZXZlbDJGaWVsZHMoKSB7DQogICAgICBsZXQgbW9kaWZpZWRDb2x1bW4gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRoaXMuYWxsQ29sdW1uRGVmcykpOw0KICAgICAgbW9kaWZpZWRDb2x1bW5bNl0uaGlkZSA9dHJ1ZTsNCiAgICAgIHRoaXMuY29sdW1uRGVmcz0gbW9kaWZpZWRDb2x1bW47DQogICAgICB0aGlzLnNob3dMZXZlbDIgPSBmYWxzZTsNCiAgICAgIHRoaXMuc2hvd0xldmVsMyA9IGZhbHNlOw0KICAgIH0sDQogICAgc2hvd0xldmVsMkZpZWxkcygpIHsNCiAgICAgIHRoaXMuc2hvd0xldmVsMiA9IHRydWU7DQogICAgICB0aGlzLmNvbHVtbkRlZnM9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5hbGxDb2x1bW5EZWZzKSk7DQogICAgfSwNCiAgICBzaG93TGV2ZWwzRmllbGRzKCkgeyAgICAgIA0KICAgICAgdGhpcy5zaG93TGV2ZWwzID0gdHJ1ZTsNCiAgICAgIGxldCBtb2RpZmllZENvbHVtbiA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5hbGxDb2x1bW5EZWZzKSk7DQogICAgICBtb2RpZmllZENvbHVtbls3XS5oaWRlID1mYWxzZTsNCiAgICAgIHRoaXMuY29sdW1uRGVmcz0gbW9kaWZpZWRDb2x1bW47DQogICAgfSwNCiAgICBhc3luYyBzYXZlQWxsTGVkZ2VycygpIHsgDQogICAgICB2YXIgcmVzID0gYXdhaXQgdGhpcy4kYXBpU2VydmljZS5wdXQoYC9sZWRnZXJEZXRhaWxzYCx7ImRhdGEiOkpTT04uc3RyaW5naWZ5KHRoaXMudW5TYXZlZFZhbHVlKX0pOw0KICAgICAgaWYgKHJlcyAmJiByZXMuc3RhdHVzID09PSAyMDApIHsNCiAgICAgICAgdGhpcy51blNhdmVkVmFsdWUgPSBbXTsNCiAgICAgICAgdGhpcy5pc0RpYWxvZ01vZGUgPSAxOw0KICAgICAgICB0aGlzLmRpYWxvZ1dpZHRoID0gIjM1dnciOw0KICAgICAgICB0aGlzLmFsZXJ0TWVhc3NhZ2UgPSAiTGVkZ2VycyBhcmUgc2F2ZWQgc3VjY2Vzc2Z1bGx5LiI7DQogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgIHRoaXMuYnVsa1RhZ0xldmVsMUVuYWJsZWQgPSB0cnVlOw0KICAgICAgICB9LCAwKTsNCiAgICAgIH0NCiAgICAgIGlmIChyZXMuZGF0YS5zdGF0dXMgPT09ICJlcnJvciIpIHsNCiAgICAgICAgdGhpcy5pc0RpYWxvZ01vZGUgPSAxOw0KICAgICAgICB0aGlzLmRpYWxvZ1dpZHRoID0gIjM1dnciOw0KICAgICAgICB0aGlzLmFsZXJ0TWVhc3NhZ2UgPSAiTGVkZ2VycyBhcmUgbm90IHNhdmVkIHN1Y2Nlc3NmdWxseS4iOw0KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICB0aGlzLmJ1bGtUYWdMZXZlbDFFbmFibGVkID0gdHJ1ZTsNCiAgICAgICAgfSwgMCk7DQogICAgICB9DQogICAgfSwNCiAgICBsZWRnZXJMZXZlbDFDaGFuZ2VkKHZhbCkgew0KICAgICAgdmFsWyJsZXZlbDJPcHRpb25zIl0gPSB0aGlzLmwyT3B0aW9uc1t2YWxbImxldmVsMSJdXQ0KICAgICAgICA/IHRoaXMubDJPcHRpb25zW3ZhbFsibGV2ZWwxIl1dDQogICAgICAgIDogW107DQogICAgICB2YWxbImxldmVsM09wdGlvbnMiXSA9IFtdOw0KICAgICAgdmFsWyJsZXZlbDIiXSA9ICIiOw0KICAgICAgdmFsWyJsZXZlbDMiXSA9ICIiOw0KICAgICAgdmFsWyJsZXZlbDEiXSA9IHZhbFsibGV2ZWwxIl0gPyB2YWxbImxldmVsMSJdLnRyaW0oKSA6ICIiOw0KICAgICAgaWYodGhpcy5ncm91cGluZ1NlbGVjdGVkIHx8ICF2YWwuaXNQYXJlbnROYW1lKXsNCiAgICAgICAgbGV0IGluZGV4ID0gdGhpcy4kXy5maW5kTGFzdEluZGV4KHRoaXMub3JnaW5hbFRhZ2dpbmd0cmVlRGF0YSwgew0KICAgICAgICAgIG5hbWU6IHZhbC5uYW1lLA0KICAgICAgICAgIHBhcmVudDogdmFsLnBhcmVudCwNCiAgICAgICAgfSk7DQogICAgICAgIGlmKHRoaXMub3JnaW5hbFRhZ2dpbmd0cmVlRGF0YVtpbmRleF0pew0KICAgICAgICB0aGlzLm9yZ2luYWxUYWdnaW5ndHJlZURhdGFbaW5kZXhdWyJsZXZlbDEiXSA9IHZhbFsibGV2ZWwxIl07DQogICAgICAgIHRoaXMub3JnaW5hbFRhZ2dpbmd0cmVlRGF0YVtpbmRleF1bImxldmVsMiJdID0gdmFsWyJsZXZlbDIiXTsNCiAgICAgICAgdGhpcy5vcmdpbmFsVGFnZ2luZ3RyZWVEYXRhW2luZGV4XVsibGV2ZWwzIl0gPSB2YWxbImxldmVsMyJdOw0KICAgICAgICB9ICAgICAgDQogICAgICAgIHZhciByb3dOb2RlID0gdGhpcy5ncmlkQXBpLmdldFJvd05vZGUodmFsLnBhcmVudCt2YWwubmFtZSk7DQogICAgICAgIHJvd05vZGUuc2V0RGF0YVZhbHVlKCJsZXZlbDEiLCB2YWxbImxldmVsMSJdKTsNCiAgICAgICAgdGhpcy51cGRhdGVVbnNhdmVkVmFsdWVzKHZhbC5wYXJlbnQsdmFsLm5hbWUsaW5kZXgpOyANCiAgICAgIH0NCiAgICAgIGVsc2V7DQogICAgICAgIHRoaXMub3JnaW5hbFRhZ2dpbmd0cmVlRGF0YSA9IHRoaXMub3JnaW5hbFRhZ2dpbmd0cmVlRGF0YS5tYXAodmFsdWU9PnsNCiAgICAgICAgICBpZih2YWwuaXNQYXJlbnROYW1lICYmIHZhbHVlLnBhcmVudCA9PSB2YWwucGFyZW50ICYmIHZhbHVlLm5hbWUgPT0gdmFsLm5hbWUpew0KICAgICAgICBpZighdmFsdWVbImxldmVsMSJdKXZhbHVlWyJsZXZlbDEiXSA9IHZhbFsibGV2ZWwxIl07DQogICAgICAgIGlmKCF2YWx1ZVsibGV2ZWwyIl0pdmFsdWVbImxldmVsMiJdID0gdmFsWyJsZXZlbDIiXTsNCiAgICAgICAgaWYoIXZhbHVlWyJsZXZlbDMiXSl2YWx1ZVsibGV2ZWwzIl0gPSB2YWxbImxldmVsMyJdOw0KICAgICAgICAgIH0NCiAgICAgICAgICBlbHNlIGlmKHZhbHVlLnBhcmVudCA9PSB2YWwubmFtZSl7DQogICAgICAgIGlmKCF2YWx1ZVsibGV2ZWwxIl0pdmFsdWVbImxldmVsMSJdID0gdmFsWyJsZXZlbDEiXTsNCiAgICAgICAgaWYoIXZhbHVlWyJsZXZlbDIiXSl2YWx1ZVsibGV2ZWwyIl0gPSB2YWxbImxldmVsMiJdOw0KICAgICAgICBpZighdmFsdWVbImxldmVsMyJdKXZhbHVlWyJsZXZlbDMiXSA9IHZhbFsibGV2ZWwzIl07DQogICAgICAgICAgfQ0KICAgICAgICAgIHJldHVybiB2YWx1ZTsNCiAgICAgICAgfSk7DQogICAgICAgIHRoaXMucm93RGF0YSA9IHRoaXMucm93RGF0YS5tYXAodmFsdWU9PnsNCiAgICAgICAgICBpZih2YWwuaXNQYXJlbnROYW1lICYmIHZhbHVlLnBhcmVudCA9PSB2YWwucGFyZW50ICYmIHZhbHVlLm5hbWUgPT0gdmFsLm5hbWUpew0KICAgICAgICBpZighdmFsdWVbImxldmVsMSJdKXZhbHVlWyJsZXZlbDEiXSA9IHZhbFsibGV2ZWwxIl07DQogICAgICAgIGlmKCF2YWx1ZVsibGV2ZWwyIl0pdmFsdWVbImxldmVsMiJdID0gdmFsWyJsZXZlbDIiXTsNCiAgICAgICAgaWYoIXZhbHVlWyJsZXZlbDMiXSl2YWx1ZVsibGV2ZWwzIl0gPSB2YWxbImxldmVsMyJdOw0KICAgICAgICAgIH0NCiAgICAgICAgICBlbHNlIGlmKHZhbHVlLnBhcmVudCA9PSB2YWwubmFtZSl7DQogICAgICAgIGlmKCF2YWx1ZVsibGV2ZWwxIl0pdmFsdWVbImxldmVsMSJdID0gdmFsWyJsZXZlbDEiXTsNCiAgICAgICAgaWYoIXZhbHVlWyJsZXZlbDIiXSl2YWx1ZVsibGV2ZWwyIl0gPSB2YWxbImxldmVsMiJdOw0KICAgICAgICBpZighdmFsdWVbImxldmVsMyJdKXZhbHVlWyJsZXZlbDMiXSA9IHZhbFsibGV2ZWwzIl07DQogICAgICAgICAgfQ0KICAgICAgICAgIHJldHVybiB2YWx1ZTsNCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9LA0KICAgIEJ1bGtUYWdPbmVDaGFuZ2VkKHZhbHVlKSB7DQogICAgICBsZXQgbGV2ZWwyID0gW107DQogICAgICB0aGlzLmFsbFRhZ0hlYWRlcnMgPSBKU09OLnBhcnNlKA0KICAgICAgICBKU09OLnN0cmluZ2lmeSh0aGlzLiRzdG9yZS5nZXR0ZXJzLnRhZ0hlYWRlcnMpDQogICAgICApOw0KICAgICAgdmFyIHRhZ0ZpbHRlciA9IHRoaXMuYWxsVGFnSGVhZGVycy5maWx0ZXIoKHgpID0+IHgubGV2ZWwxID09IHZhbHVlKTsNCiAgICAgIGlmICh0YWdGaWx0ZXIubGVuZ3RoID09IDApIHJldHVybjsNCg0KICAgICAgaWYgKHRhZ0ZpbHRlci5sZW5ndGggIT0gMCkgew0KICAgICAgICB0YWdGaWx0ZXJbMF0ubGV2ZWwyLmZvckVhY2goKGVsZW1lbnQpID0+IHsNCiAgICAgICAgICBsZXZlbDIucHVzaChlbGVtZW50LmxldmVsMm5hbWUpOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICAgIGlmIChsZXZlbDIubGVuZ3RoID4gMCkgew0KICAgICAgICB0aGlzLmxldmVsMkJ1bGtWYWx1ZXMgPSBsZXZlbDI7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmxldmVsMkJ1bGtWYWx1ZXMgPSBbXTsNCiAgICAgIH0NCiAgICAgIHRoaXMuYnVsa1RhZ1NlbGVjdGVkTGV2ZWwyID0gIiI7DQogICAgfSwNCiAgICBsZWRnZXJMZXZlbDNDaGFuZ2VkKHZhbCkgew0KICAgICAgdmFsWyJsZXZlbDMiXSA9IHZhbFsibGV2ZWwzIl0gPyB2YWxbImxldmVsMyJdLnRyaW0oKSA6ICIiOw0KICAgICAgaWYodGhpcy5ncm91cGluZ1NlbGVjdGVkIHx8ICF2YWwuaXNQYXJlbnROYW1lKXsNCiAgICAgIGxldCBpbmRleCA9IHRoaXMuJF8uZmluZExhc3RJbmRleCh0aGlzLm9yZ2luYWxUYWdnaW5ndHJlZURhdGEsIHsNCiAgICAgICAgbmFtZTogdmFsLm5hbWUsDQogICAgICAgIHBhcmVudDogdmFsLnBhcmVudCwNCiAgICAgIH0pOw0KICAgICAgdGhpcy5vcmdpbmFsVGFnZ2luZ3RyZWVEYXRhW2luZGV4XVsibGV2ZWwzIl0gPSB2YWxbImxldmVsMyJdOw0KICAgICAgdmFyIHJvd05vZGUgPSB0aGlzLmdyaWRBcGkuZ2V0Um93Tm9kZSh2YWwucGFyZW50K3ZhbC5uYW1lKTsNCiAgICAgIHJvd05vZGUuc2V0RGF0YVZhbHVlKCJsZXZlbDMiLCB2YWxbImxldmVsMyJdKTsNCiAgICAgIHRoaXMudXBkYXRlVW5zYXZlZFZhbHVlcyh2YWwucGFyZW50LHZhbC5uYW1lLGluZGV4KTsgDQogICAgICB9DQogICAgICBlbHNlew0KICAgICAgdGhpcy5vcmdpbmFsVGFnZ2luZ3RyZWVEYXRhID0gdGhpcy5vcmdpbmFsVGFnZ2luZ3RyZWVEYXRhLm1hcCh2YWx1ZT0+ew0KICAgICAgICBpZih2YWwuaXNQYXJlbnROYW1lICYmIHZhbHVlLnBhcmVudCA9PSB2YWwucGFyZW50ICYmIHZhbHVlLm5hbWUgPT0gdmFsLm5hbWUpew0KICAgICAgaWYoIXZhbHVlWyJsZXZlbDMiXSl2YWx1ZVsibGV2ZWwzIl0gPSB2YWxbImxldmVsMyJdOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYodmFsdWUucGFyZW50ID09IHZhbC5uYW1lKXsNCiAgICAgIGlmKCF2YWx1ZVsibGV2ZWwzIl0pdmFsdWVbImxldmVsMyJdID0gdmFsWyJsZXZlbDMiXTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gdmFsdWU7DQogICAgICB9KTsNCiAgICAgIHRoaXMucm93RGF0YSA9IHRoaXMucm93RGF0YS5tYXAodmFsdWU9PnsNCiAgICAgICAgaWYodmFsLmlzUGFyZW50TmFtZSAmJiB2YWx1ZS5wYXJlbnQgPT0gdmFsLnBhcmVudCAmJiB2YWx1ZS5uYW1lID09IHZhbC5uYW1lKXsNCiAgICAgIGlmKCF2YWx1ZVsibGV2ZWwzIl0pdmFsdWVbImxldmVsMyJdID0gdmFsWyJsZXZlbDMiXTsNCiAgICAgICAgfQ0KICAgICAgICBlbHNlIGlmKHZhbHVlLnBhcmVudCA9PSB2YWwubmFtZSl7DQogICAgICBpZighdmFsdWVbImxldmVsMyJdKXZhbHVlWyJsZXZlbDMiXSA9IHZhbFsibGV2ZWwzIl07DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHZhbHVlOw0KICAgICAgfSkNCiAgICB9DQogICAgfSwNCiAgICBsZWRnZXJMZXZlbDJDaGFuZ2VkKHZhbCkgew0KICAgICAgdmFsWyJsZXZlbDIiXSA9IHZhbFsibGV2ZWwyIl0gPyB2YWxbImxldmVsMiJdLnRyaW0oKSA6ICIiOw0KICAgICAgdmFsWyJsZXZlbDMiXSA9ICIiOw0KICAgICAgdmFsWyJsZXZlbDNPcHRpb25zIl0gPSBbXTsNCiAgICAgIGlmICgNCiAgICAgICAgdGhpcy5sM09wdGlvbnNbdmFsWyJsZXZlbDEiXV0gJiYNCiAgICAgICAgdGhpcy5sM09wdGlvbnNbdmFsWyJsZXZlbDEiXV1bdmFsWyJsZXZlbDIiXV0NCiAgICAgICkNCiAgICAgIHZhbFsibGV2ZWwzT3B0aW9ucyJdID0gdGhpcy5sM09wdGlvbnNbdmFsWyJsZXZlbDEiXV1bdmFsWyJsZXZlbDIiXV07DQogICAgICBpZih0aGlzLmdyb3VwaW5nU2VsZWN0ZWQgfHwgIXZhbC5pc1BhcmVudE5hbWUpew0KICAgICAgbGV0IGluZGV4ID0gdGhpcy4kXy5maW5kTGFzdEluZGV4KHRoaXMub3JnaW5hbFRhZ2dpbmd0cmVlRGF0YSwgew0KICAgICAgICBuYW1lOiB2YWwubmFtZSwNCiAgICAgICAgcGFyZW50OiB2YWwucGFyZW50LA0KICAgICAgfSk7DQogICAgICB0aGlzLm9yZ2luYWxUYWdnaW5ndHJlZURhdGFbaW5kZXhdWyJsZXZlbDIiXSA9IHZhbFsibGV2ZWwyIl07DQogICAgICB0aGlzLm9yZ2luYWxUYWdnaW5ndHJlZURhdGFbaW5kZXhdWyJsZXZlbDMiXSA9IHZhbFsibGV2ZWwzIl07DQogICAgICB2YXIgcm93Tm9kZSA9IHRoaXMuZ3JpZEFwaS5nZXRSb3dOb2RlKHZhbC5wYXJlbnQrdmFsLm5hbWUpOw0KICAgICAgcm93Tm9kZS5zZXREYXRhVmFsdWUoImxldmVsMiIsIHZhbFsibGV2ZWwyIl0pOw0KICAgICAgdGhpcy51cGRhdGVVbnNhdmVkVmFsdWVzKHZhbC5wYXJlbnQsdmFsLm5hbWUsaW5kZXgpOyANCiAgICAgIH0NCiAgICAgIGVsc2V7DQogICAgICB0aGlzLm9yZ2luYWxUYWdnaW5ndHJlZURhdGEgPSB0aGlzLm9yZ2luYWxUYWdnaW5ndHJlZURhdGEubWFwKHZhbHVlPT57DQogICAgICAgIGlmKHZhbC5pc1BhcmVudE5hbWUgJiYgdmFsdWUucGFyZW50ID09IHZhbC5wYXJlbnQgJiYgdmFsdWUubmFtZSA9PSB2YWwubmFtZSl7DQogICAgICBpZighdmFsdWVbImxldmVsMiJdKXZhbHVlWyJsZXZlbDIiXSA9IHZhbFsibGV2ZWwyIl07DQogICAgICBpZighdmFsdWVbImxldmVsMyJdKXZhbHVlWyJsZXZlbDMiXSA9IHZhbFsibGV2ZWwzIl07DQogICAgICAgIH0NCiAgICAgICAgZWxzZSBpZih2YWx1ZS5wYXJlbnQgPT0gdmFsLm5hbWUpew0KICAgICAgaWYoIXZhbHVlWyJsZXZlbDIiXSl2YWx1ZVsibGV2ZWwyIl0gPSB2YWxbImxldmVsMiJdOw0KICAgICAgaWYoIXZhbHVlWyJsZXZlbDMiXSl2YWx1ZVsibGV2ZWwzIl0gPSB2YWxbImxldmVsMyJdOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiB2YWx1ZTsNCiAgICAgIH0pOw0KICAgICAgdGhpcy5yb3dEYXRhID0gdGhpcy5yb3dEYXRhLm1hcCh2YWx1ZT0+ew0KICAgICAgICBpZih2YWwuaXNQYXJlbnROYW1lICYmIHZhbHVlLnBhcmVudCA9PSB2YWwucGFyZW50ICYmIHZhbHVlLm5hbWUgPT0gdmFsLm5hbWUpew0KICAgICAgaWYoIXZhbHVlWyJsZXZlbDIiXSl2YWx1ZVsibGV2ZWwyIl0gPSB2YWxbImxldmVsMiJdOw0KICAgICAgaWYoIXZhbHVlWyJsZXZlbDMiXSl2YWx1ZVsibGV2ZWwzIl0gPSB2YWxbImxldmVsMyJdOw0KICAgICAgICB9DQogICAgICAgIGVsc2UgaWYodmFsdWUucGFyZW50ID09IHZhbC5uYW1lKXsNCiAgICAgIGlmKCF2YWx1ZVsibGV2ZWwyIl0pdmFsdWVbImxldmVsMiJdID0gdmFsWyJsZXZlbDIiXTsNCiAgICAgIGlmKCF2YWx1ZVsibGV2ZWwzIl0pdmFsdWVbImxldmVsMyJdID0gdmFsWyJsZXZlbDMiXTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gdmFsdWU7DQogICAgICB9KQ0KICAgIH0NCiAgICB9LA0KICAgIGFzeW5jIGZpbGxMZWRnZXJEYXRhKGRhdGEpIHsNCiAgICAgIGNvbnN0IGFsbFRhZ0hlYWRlcnMgPSBKU09OLnBhcnNlKA0KICAgICAgICBKU09OLnN0cmluZ2lmeSh0aGlzLiRzdG9yZS5nZXR0ZXJzLnRhZ0hlYWRlcnMpDQogICAgICApOw0KICAgICAgZGF0YS5mb3JFYWNoKCh4KSA9PiB7DQogICAgICAgIHhbInNlbGVjdGlvbiJdID0gZmFsc2U7DQogICAgICAgIGlmIChwYXJzZUludCh4WyJiYWxhbmNlIl0pIDwgMCkgew0KICAgICAgICAgIHhbImRyY3IiXSA9ICJDciI7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgeFsiZHJjciJdID0gIkRyIjsNCiAgICAgICAgfQ0KDQogICAgICAgIGxldCBsZXZlbDEgPSBbXTsNCg0KICAgICAgICB2YXIgdGFnRmlsdGVyID0gYWxsVGFnSGVhZGVycy5maWx0ZXIoKHJvdykgPT4gcm93LmxldmVsMSA9PSB4LmxldmVsMSk7DQogICAgICAgIGlmICh0YWdGaWx0ZXIubGVuZ3RoID09IDApIHsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgbGV2ZWwxLnB1c2godGFnRmlsdGVyWzBdLmxldmVsMSk7DQogICAgICAgICAgdGhpcy50ZW1wbGV2ZWwxQXJyeWF5LnB1c2goew0KICAgICAgICAgICAgbGVkZ2VyaWQ6IHgubGVkZ2VyaWQsDQogICAgICAgICAgICBsZXZlbDE6IHRoaXMubGV2ZWwxTmFtZXMsDQogICAgICAgICAgfSk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAobGV2ZWwxLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICBsZXQgbGV2ZWwyID0gW107DQogICAgICAgICAgdGhpcy50ZW1wbGV2ZWwxQXJyeWF5LnB1c2goeyBsZWRnZXJpZDogeC5sZWRnZXJpZCwgbGV2ZWwxOiBsZXZlbDEgfSk7DQogICAgICAgICAgdmFyIHRhZzJGaWx0ZXIgPSB0YWdGaWx0ZXIuZmlsdGVyKChyb3cpID0+IHJvdy5sZXZlbDEgPT0geC5sZXZlbDEpOw0KICAgICAgICAgIGlmICh0YWcyRmlsdGVyLmxlbmd0aCAhPSAwKSB7DQogICAgICAgICAgICB0YWcyRmlsdGVyWzBdLmxldmVsMi5mb3JFYWNoKChlbGVtZW50KSA9PiB7DQogICAgICAgICAgICAgIGxldmVsMi5wdXNoKGVsZW1lbnQubGV2ZWwybmFtZSk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIGlmIChsZXZlbDIubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgICBsZXQgbGV2ZWwzID0gW107DQogICAgICAgICAgICAgIHRoaXMudGVtcGxldmVsMkFycnlheS5wdXNoKHsNCiAgICAgICAgICAgICAgICBsZWRnZXJpZDogeC5sZWRnZXJpZCwNCiAgICAgICAgICAgICAgICBsZXZlbDI6IGxldmVsMiwNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgIHZhciB0YWczRmlsdGVyID0gdGFnMkZpbHRlclswXS5sZXZlbDIuZmlsdGVyKA0KICAgICAgICAgICAgICAgIChyb3cpID0+IHJvdy5sZXZlbDJuYW1lID09IHgubGV2ZWwyDQogICAgICAgICAgICAgICk7DQogICAgICAgICAgICAgIGlmICh0YWczRmlsdGVyLmxlbmd0aCAhPSAwKSB7DQogICAgICAgICAgICAgICAgdGFnM0ZpbHRlclswXS5sZXZlbDMuZm9yRWFjaCgoZWxlbWVudCkgPT4gew0KICAgICAgICAgICAgICAgICAgbGV2ZWwzLnB1c2goZWxlbWVudCk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgaWYgKGxldmVsMy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICAgICAgdGhpcy50ZW1wbGV2ZWwzQXJyeWF5LnB1c2goew0KICAgICAgICAgICAgICAgICAgbGVkZ2VyaWQ6IHgubGVkZ2VyaWQsDQogICAgICAgICAgICAgICAgICBsZXZlbDM6IGxldmVsMywNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCiAgICBhc3luYyBhcHBseUxldmVsMUJ1bGtUYWdzKCkgew0KICAgICAgdGhpcy5yb3dEYXRhID0gdGhpcy5yb3dEYXRhLm1hcCgodmFsKSA9PiB7DQogICAgICAgIGlmICh2YWwuc2VsZWN0ZWQgPT0gdHJ1ZSkgew0KICAgICAgICAgIHZhbFsibGV2ZWwxIl0gPSB0aGlzLmRpYWxvZ0wxVmFsdWU7DQogICAgICAgICAgdmFsWyJsZXZlbDIiXSA9IHRoaXMuZGlhbG9nTDJWYWx1ZTsNCiAgICAgICAgICB2YWxbImxldmVsMyJdID0gIiI7DQogICAgICAgICAgdmFsWyJsZXZlbDJPcHRpb25zIl0gPSBbXTsNCiAgICAgICAgICB2YWwubGV2ZWwzT3B0aW9ucyA9IFtdOw0KICAgICAgICAgIHZhbC5sZXZlbDJPcHRpb25zID0gdGhpcy5sMk9wdGlvbnNbdmFsWyJsZXZlbDEiXV07DQogICAgICAgICAgaWYgKHZhbC5sZXZlbDJPcHRpb25zKQ0KICAgICAgICAgICAgdmFsLmxldmVsM09wdGlvbnMgPSB0aGlzLmwzT3B0aW9uc1t2YWxbImxldmVsMSJdXVt2YWxbImxldmVsMiJdXTsNCiAgICAgICAgICANCiAgICAgICAgICBsZXQgaW5kZXggPSB0aGlzLiRfLmZpbmRMYXN0SW5kZXgodGhpcy5vcmdpbmFsVGFnZ2luZ3RyZWVEYXRhLCB7DQogICAgICAgICAgICBuYW1lOiB2YWwubmFtZSwNCiAgICAgICAgICAgIHBhcmVudDogdmFsLnBhcmVudCwNCiAgICAgICAgICB9KTsNCiAgICAgICAgICBpZih0aGlzLm9yZ2luYWxUYWdnaW5ndHJlZURhdGFbaW5kZXhdKXsNCiAgICAgICAgICB0aGlzLm9yZ2luYWxUYWdnaW5ndHJlZURhdGFbaW5kZXhdWyJsZXZlbDEiXSA9IHZhbFsibGV2ZWwxIl07DQogICAgICAgICAgdGhpcy5vcmdpbmFsVGFnZ2luZ3RyZWVEYXRhW2luZGV4XVsibGV2ZWwyIl0gPSB2YWxbImxldmVsMiJdOw0KICAgICAgICAgIHRoaXMub3JnaW5hbFRhZ2dpbmd0cmVlRGF0YVtpbmRleF1bImxldmVsMyJdID0gdmFsWyJsZXZlbDMiXTsNCiAgICAgICAgICB9DQogICAgICAgICAgdmFyIHJvd05vZGUgPSB0aGlzLmdyaWRBcGkuZ2V0Um93Tm9kZSh2YWwucGFyZW50K3ZhbC5uYW1lKTsNCiAgICAgICAgICByb3dOb2RlLnNldERhdGFWYWx1ZSgibGV2ZWwxIiwgdmFsWyJsZXZlbDEiXSk7DQogICAgICAgICAgcm93Tm9kZS5zZXREYXRhVmFsdWUoImxldmVsMiIsIHZhbFsibGV2ZWwyIl0pOw0KICAgICAgICAgIHJvd05vZGUuc2V0RGF0YVZhbHVlKCJsZXZlbDMiLCB2YWxbImxldmVsMyJdKTsNCiAgICAgICAgICB0aGlzLnVwZGF0ZVVuc2F2ZWRWYWx1ZXModmFsLnBhcmVudCx2YWwubmFtZSxpbmRleCk7ICAgDQogICAgICAgICAgdmFsLnNlbGVjdGVkID0gZmFsc2U7ICAgICAgIA0KICAgICAgICB9DQogICAgICAgIHJldHVybiB2YWw7DQogICAgICB9KTsNCiAgICAgIHRoaXMuY2hlY2tCb3hWYWx1ZSA9IGZhbHNlOw0KICAgICAgdGhpcy5idWxrVGFnTGV2ZWwxRW5hYmxlZCA9IGZhbHNlOw0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["TaggingDisplay.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAykBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TaggingDisplay.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <v-container style=\"display: block\" fluid class=\"whhite darken-5\">\r\n    <v-row class=\"companyHeader companyHeaderNew\">\r\n      <v-col cols=\"3\" style=\"padding: 0px\">\r\n        <p\r\n          style=\"\r\n            margin-bottom: 0px;\r\n            width: 100%;\r\n            font-size: 14px;\r\n            text-align: start;margin-left: 14px;\r\n          \"\r\n        >\r\n          {{fina?fina[\"company_name\"]:''}}\r\n          <span\r\n            style=\"\r\n              padding: 0px 5px;\r\n              font-weight: 600;\r\n              font-size: 14px;\r\n              color: #828282bd;\r\n            \"\r\n          >\r\n            <v-icon color=\"#676767\" style=\"font-size: 14px\" dark>mdi-chevron-right</v-icon>\r\n          </span>\r\n          Tagging\r\n        </p>\r\n      </v-col>\r\n      <v-col\r\n        cols=\"6\"\r\n        style=\"\r\n          padding-bottom: 0px;\r\n          padding-top: 0px;\r\n          font-size: 14px;\r\n          font-weight: 600;\r\n        \"\r\n      >\r\n        <p style=\"margin-bottom: 0px\">\r\n          {{ totaltaggedLedger }} of {{ totalLedger }} Ledgers Successfully\r\n          Autotagged\r\n        </p>\r\n      </v-col>\r\n      <!-- <v-col cols=\"3\" style=\"height:30px;padding-bottom:0px;padding-top:0px\">\r\n          <v-select\r\n          height=\"20\"\r\n          style=\"width:50%;\"\r\n        dense\r\n        label=\"Export\"\r\n       outlined\r\n        v-model=\"selectedImportLevel\"\r\n     :items=\"['PDF','Tally']\"                 \r\n                     \r\n   \r\n  ></v-select>\r\n    </v-col> -->\r\n      <v-col\r\n        cols=\"3\"\r\n        style=\"\r\n          height: 20px;\r\n          padding-bottom: 0px;\r\n          padding-top: 0px;\r\n          padding-right: 0px;\r\n          margin-top: -10px;\r\n          justify-content: flex-end;\r\n          display: flex;\r\n        \"\r\n      >\r\n        <v-menu bottom offset-y=\"true\">\r\n          <template v-slot:activator=\"{ on }\">\r\n            <v-btn\r\n              class=\"textColor\"\r\n              style=\"\r\n                border: 0.5px solid #c7c6c6;\r\n                box-sizing: border-box;\r\n                border-radius: 4px;\r\n                max-height: 30px;\r\n                min-width: 95px;\r\n                max-width: 95px;\r\n                background-color: #0000;\r\n                box-shadow: none;\r\n                font-size: 14px;\r\n                text-transform: capitalize;\r\n              \"\r\n              dark\r\n              v-on=\"on\"\r\n            >\r\n              &nbsp; Export &nbsp;\r\n              <v-icon color=\"grey\" style=\"font-size: 20px\" dark\r\n                >mdi-chevron-down</v-icon\r\n              >\r\n              &nbsp;\r\n            </v-btn>\r\n          </template>\r\n\r\n          <v-list>\r\n            <v-list-item\r\n              v-for=\"(item, index) in [{ title: 'Excel' }, { title: 'PDF' }]\"\r\n              :key=\"index\"\r\n              @click=\"() => handleExport(index)\"\r\n            >\r\n              <v-list-item-title>{{ item.title }}</v-list-item-title>\r\n            </v-list-item>\r\n          </v-list>\r\n        </v-menu>\r\n      </v-col>\r\n    </v-row>\r\n\r\n    <hr\r\n      style=\"\r\n        margin-top: 10px;\r\n        margin-left: -13px;\r\n        width: 103%;\r\n        margin-bottom: 10px;\r\n      \"\r\n    />\r\n<v-dialog v-model=\"editLedger\" content-class=\"editDialogStyle\" width=\"25vw\" >\r\n      <v-card style=\"width:100%;height:100%\">\r\n    <v-card-title class=\"text-h5 white darken-2\">\r\n          <div>\r\n            <v-row>\r\n              <v-col cols=\"12\">\r\n                <h5\r\n                  class=\"headingPopup header\"\r\n                  style=\"color: #03a9f4; font-size: 20px\"\r\n                >\r\n                  Edit Ledgers\r\n                </h5>\r\n              </v-col>\r\n            </v-row>\r\n          </div>\r\n        </v-card-title>\r\n        <hr class=\"alertDivider\" />\r\n        <v-card-text style=\"height:70%;\">\r\n        <v-row>\r\n          <v-text-field autocomplete=\"off\" \r\n            v-model=\"editLedgerName.oldValue\"\r\n            label=\"Old Ledger Name\"\r\n            disabled\r\n            style=\"margin-top:16px\"\r\n            outlined\r\n            hide-details\r\n          ></v-text-field>\r\n        </v-row>\r\n        <v-row>\r\n          <v-text-field autocomplete=\"off\" \r\n            v-model=\"editLedgerName.newValue\"\r\n            label=\"New Ledger Name\"\r\n            style=\"margin-top:27px\"\r\n            outlined\r\n            hide-details\r\n          ></v-text-field>\r\n        </v-row>\r\n        </v-card-text>\r\n        <v-card-actions class=\"actionStyle\">\r\n          <v-btn\r\n            class=\"ma-2\"\r\n            style=\"\r\n              padding: 2px 0px;width:30%;\r\n              background-color: #03a9f4 !important;\r\n              color: white;\r\n            \"\r\n            color=\"#03a9f4\"\r\n            @click=\"updateLedgerName\"\r\n          >\r\n            Update\r\n          </v-btn>\r\n          <v-btn\r\n            class=\"ma-2\"\r\n            style=\"\r\n              padding: 2px 0px;width:30%;\r\n              background-color: #03a9f4 !important;\r\n              color: white;\r\n            \"\r\n            color=\"#03a9f4\"\r\n            @click=\"closeEditDialog\"\r\n          >\r\n            Close\r\n          </v-btn>\r\n        </v-card-actions>\r\n    </v-card>\r\n</v-dialog>\r\n    <v-dialog v-model=\"bulkTagLevel1Enabled\" v-bind:width=\"dialogWidth\">\r\n      <v-card>\r\n        <v-card-title class=\"text-h5 white darken-2\">\r\n          <div>\r\n            <v-row>\r\n              <v-col cols=\"12\">\r\n                <h5\r\n                  class=\"headingPopup\"\r\n                  style=\"color: #03a9f4; font-size: 20px\"\r\n                >\r\n                  {{ isDialogMode == 1 ? \"Info\" : \"Bulk Tagging\" }}\r\n                </h5>\r\n              </v-col>\r\n            </v-row>\r\n          </div>\r\n        </v-card-title>\r\n        <hr class=\"alertDivider\" />\r\n\r\n        <v-card-text\r\n          v-bind:class=\"{\r\n            alertStyle: isDialogMode === 1,\r\n            bluk1Dia: isDialogMode != 1,\r\n          }\"\r\n        >\r\n          <v-form novalidate=\"true\" ref=\"tallyForm\">\r\n            <v-row no-gutters>\r\n              <v-col cols=\"12\" v-if=\"isDialogMode == 1\">\r\n                <p style=\"font-size: 16px; margin: 0px\">{{ alertMeassage }}</p>\r\n              </v-col>\r\n              <v-col\r\n                cols=\"12\"\r\n                v-if=\"isDialogMode == 2\"\r\n                style=\"display: flex; justify-content: center\"\r\n              >\r\n                <v-autocomplete\r\n                  style=\"max-width: 75%\"\r\n                  hide-details\r\n                  single-line\r\n                  v-model=\"dialogL1Value\"\r\n                  :items=\"l1Options\"\r\n                  outlined\r\n                  dense\r\n                  @change=\"ledgerDialogl1Changed\"\r\n                  item-text=\"name\"\r\n                  item-value=\"name\"\r\n                  placeholder=\"Level One- Tagging List\"\r\n                >\r\n                  <template v-slot:selection=\"data\">\r\n                    {{ data.item.name }}\r\n                  </template>\r\n                  <template v-slot:item=\"data\">\r\n                    {{ data.item.name }}\r\n                  </template>\r\n                </v-autocomplete>\r\n              </v-col>\r\n\r\n              <v-col\r\n                v-if=\"isDialogMode == 3\"\r\n                style=\"display: flex; justify-content: center; width: 50%\"\r\n              >\r\n                <v-autocomplete\r\n                  style=\"max-width: 75%\"\r\n                  hide-details\r\n                  single-line\r\n                  v-model=\"dialogL1Value\"\r\n                  :items=\"l1Options\"\r\n                  outlined\r\n                  dense\r\n                  @change=\"ledgerDialogl1Changed\"\r\n                  item-text=\"name\"\r\n                  item-value=\"name\"\r\n                  placeholder=\"Level One- Tagging List\"\r\n                >\r\n                  <template v-slot:selection=\"data\">\r\n                    {{ data.item.name }}\r\n                  </template>\r\n                  <template v-slot:item=\"data\">\r\n                    {{ data.item.name }}\r\n                  </template>\r\n                </v-autocomplete>\r\n              </v-col>\r\n              <v-col\r\n                v-if=\"isDialogMode == 3\"\r\n                style=\"display: flex; justify-content: center; width: 50%\"\r\n              >\r\n                <v-autocomplete\r\n                  style=\"max-width: 75%\"\r\n                  hide-details\r\n                  single-line\r\n                  v-model=\"dialogL2Value\"\r\n                  :items=\"l2\"\r\n                  outlined\r\n                  dense\r\n                  placeholder=\"Level Two- Tagging List\"\r\n                  @change=\"ledgerDialogl2Changed\"\r\n                  item-text=\"name\"\r\n                  item-value=\"name\"\r\n                >\r\n                  <template v-slot:selection=\"data\">\r\n                    {{ data.item.name }}\r\n                  </template>\r\n                  <template v-slot:item=\"data\">\r\n                    {{ data.item.name }}\r\n                  </template>\r\n                </v-autocomplete>\r\n              </v-col>\r\n            </v-row>\r\n          </v-form>\r\n        </v-card-text>\r\n        <v-card-actions class=\"actionStyle\">\r\n          <v-btn\r\n            v-if=\"isDialogMode == 1 && !isDiffBulck\"\r\n            class=\"ma-2\"\r\n            color=\"#03a9f4\"\r\n            style=\"\r\n              padding-top: 2px;\r\n              background-color: #03a9f4 !important;\r\n              color: white;\r\n            \"\r\n            @click=\"closeDialog\"\r\n          >\r\n            Ok\r\n          </v-btn>\r\n          <v-btn\r\n            v-if=\"isDialogMode == 1 && isDiffBulck\"\r\n            class=\"ma-2\"\r\n            color=\"#03a9f4\"\r\n            style=\"\r\n              padding-top: 2px;\r\n              background-color: #03a9f4 !important;\r\n              color: white;\r\n            \"\r\n            @click=\"() => bulkTagLevel(3)\"\r\n          >\r\n            Yes\r\n          </v-btn>\r\n          <v-btn\r\n            v-if=\"isDialogMode == 1 && isDiffBulck\"\r\n            class=\"ma-2\"\r\n            color=\"#03a9f4\"\r\n            style=\"\r\n              padding-top: 2px;\r\n              background-color: #03a9f4 !important;\r\n              color: white;\r\n            \"\r\n            @click=\"closeDialog\"\r\n          >\r\n            No\r\n          </v-btn>\r\n          <v-btn\r\n            v-if=\"isDialogMode != 1\"\r\n            class=\"ma-2\"\r\n            style=\"\r\n              padding-top: 2px;\r\n              background-color: #03a9f4 !important;\r\n              color: white;\r\n            \"\r\n            color=\"#03a9f4\"\r\n            :disabled=\"\r\n              isDialogMode == 3\r\n                ? !dialogL2Value || !dialogL1Value\r\n                : !dialogL1Value\r\n            \"\r\n            @click=\"applyLevel1BulkTags\"\r\n          >\r\n            Apply All\r\n          </v-btn>\r\n        </v-card-actions>\r\n      </v-card>\r\n    </v-dialog>\r\n\r\n    <v-row style=\"justify-content: space-between\">\r\n      <v-col\r\n        cols=\"5\"\r\n        style=\"\r\n          padding: 0px;\r\n          height: 40px;\r\n          display: flex;\r\n          align-items: center;\r\n          margin-left: 23px;\r\n        \"\r\n      >\r\n        <v-col style=\"max-width: 6vw; padding: 0px\">\r\n          <p style=\"font-size: 14px\" class=\"ma-1\">Tagging &nbsp; :</p>\r\n        </v-col>\r\n        <v-col cols=\"2\" style=\"padding: 0px\">\r\n          <v-menu offset-y bottom>\r\n            <template v-slot:activator=\"{ on }\">\r\n              <v-btn\r\n                dark\r\n                v-on=\"on\"\r\n                class=\"noHover\"\r\n                style=\"\r\n                  height: auto !important;\r\n                  background-color: #fff;\r\n                  box-shadow: none;\r\n                  font-size: 14px;\r\n                  padding: 0px;\r\n                  color: #494949;\r\n                  text-transform: capitalize;\r\n                \"\r\n              >\r\n                {{ selectedImportLevel }}\r\n                <v-icon dark color=\"grey\" style=\"font-size: 20px\"\r\n                  >mdi-chevron-down</v-icon\r\n                >\r\n              </v-btn>\r\n            </template>\r\n            <v-list\r\n              style=\"\r\n                display: flex;\r\n                flex-direction: column;\r\n                padding: 10px;\r\n                text-align: start;\r\n              \"\r\n            >\r\n              <v-list-tile\r\n                style=\"padding: 3px; cursor: pointer; font-size: 14px\"\r\n                class=\"onHover\"\r\n                v-for=\"(item, index) in [\r\n                  { title: 'Closing Balance' },\r\n                  { title: 'Opening Balance' },\r\n                ]\"\r\n                :key=\"index\"\r\n                @click=\"preventTypeChange\"\r\n              >\r\n                <v-list-tile-title>{{ item.title }}</v-list-tile-title>\r\n              </v-list-tile>\r\n            </v-list>\r\n          </v-menu>\r\n        </v-col>\r\n      </v-col>\r\n      <v-col\r\n        cols=\"6\"\r\n        style=\"\r\n          padding: 0px;\r\n          height: 40px;\r\n          display: flex;\r\n          justify-content: end;\r\n          padding-right: 16.5px;\r\n        \"\r\n      >\r\n      <v-col cols=\"2\" style=\"padding: 0px;display: flex;justify-content: end;\" v-if=\"selectedImportLevel == 'Closing Balance'\">\r\n        <aeComponent @aeSuccessCallback=\"aeSuccessCallback\" @aeFailedCallback=\"aeFailedCallback\"/>        \r\n      </v-col>\r\n        <v-col cols=\"4\" style=\"padding: 0px\">\r\n          <v-chip-group @change=\"viewChange\" mandatory>\r\n            <v-chip :value=\"true\">Groups</v-chip>\r\n            <v-chip :value=\"false\">Ledgers</v-chip>\r\n          </v-chip-group>\r\n        </v-col>\r\n        <v-col\r\n          cols=\"5\"\r\n          style=\"padding: 0px; display: flex; align-items: flex-end\"\r\n          class=\"searchStyleP\"\r\n        >\r\n          <v-text-field autocomplete=\"off\" \r\n            height=\"30px\"\r\n            class=\"searchStyle\"\r\n            hide-details\r\n            append-icon=\"mdi-magnify\"\r\n            @input=\"filterTableByledger\"\r\n            id=\"filter-input\"\r\n            placeholder=\"Search here\"\r\n            outlined\r\n            dense\r\n          ></v-text-field>\r\n        </v-col>\r\n      </v-col>\r\n    </v-row>\r\n\r\n\r\n    <v-row style=\"margin-top: 20px; display: flex; justify-content: center\">\r\n    <v-card v-bind:class=\"{ledgerViweTbHg:!groupingSelected}\" class=\"cardStyle\" style=\"min-height: 60vh; margin: 6px; width:97.5%\">\r\n    <ag-grid-vue \r\n    style=\"width: 100%; height: 100%;\"\r\n                class=\"ag-theme-material\"\r\n                id=\"myGrid\"\r\n        :columnDefs=\"columnDefs\"\r\n        :rowData=\"rowData\"\r\n        :context=\"context\"\r\n        @grid-ready=\"onGridReady\"\r\n        :defaultColDef=\"defaultColDef\"\r\n        :getRowNodeId= \"getRowNodeId\"\r\n        :pagination=\"false\"> \r\n    </ag-grid-vue>  \r\n    </v-card>\r\n</v-row>\r\n\r\n    <v-row\r\n      style=\"margin-top: 0px\"\r\n      v-if=\"isParentValidCheck && groupingSelected\"\r\n    >\r\n      <v-col style=\"max-width: 7%; padding-bottom: 0px\"></v-col>\r\n      <v-col\r\n        style=\"max-width: 15%; min-width: 15%; padding-bottom: 0px\"\r\n        v-for=\"(item, index) in parentDisplayValues\"\r\n        :key=\"index\"\r\n      >\r\n        <span>\r\n          <v-icon\r\n            color=\"#18B745\"\r\n            style=\"font-size: 20px; display: none\"\r\n            dark\r\n            v-bind:class=\"{\r\n              displayValid: parentDisplayErrors.indexOf(item) == -1,\r\n            }\"\r\n            >mdi-check-circle-outline</v-icon\r\n          >\r\n        </span>\r\n        <span>\r\n          <v-icon\r\n            color=\"#FF9537\"\r\n            style=\"font-size: 20px; display: none\"\r\n            v-bind:class=\"{\r\n              displayValid: parentDisplayErrors.indexOf(item) != -1,\r\n            }\"\r\n            dark\r\n            >mdi-close-circle-outline</v-icon\r\n          >\r\n        </span>\r\n      </v-col>\r\n    </v-row>\r\n    <v-row style=\"margin-top: 20px; margin-bottom: 0px\" v-if=\"groupingSelected\">\r\n      <v-col style=\"max-width:7%;height30px;padding:0px\">\r\n        <span>\r\n          <v-icon\r\n            color=\"grey\"\r\n            style=\"font-size: 25px!important\"\r\n            @click=\"moveParent(1)\"\r\n            v-bind:class=\"{\r\n              cursorPointer:\r\n                possibleParents[0] &&\r\n                possibleParents[0].name != parentDisplayValues[0],\r\n            }\"\r\n            :disabled=\"\r\n              (possibleParents[0] &&\r\n                possibleParents[0].name == parentDisplayValues[0]) ||\r\n              (changedPossinleParents[0] &&\r\n                changedPossinleParents[0].name == parentDisplayValues[0])\r\n            \"\r\n            dark\r\n            >mdi-menu-left</v-icon\r\n          >\r\n        </span>\r\n        <span>\r\n          <v-icon\r\n            color=\"grey\"\r\n            style=\"font-size: 25px !important\"\r\n            @click=\"moveParent(2)\"\r\n            v-bind:class=\"{\r\n              cursorPointer:\r\n                possibleParents[possibleParents.length - 1] &&\r\n                possibleParents[possibleParents.length - 1].name ==\r\n                  parentDisplayValues[4],\r\n            }\"\r\n            :disabled=\"\r\n              (possibleParents[possibleParents.length - 1] &&\r\n                possibleParents[possibleParents.length - 1].name ==\r\n                  parentDisplayValues[4]) ||\r\n              (changedPossinleParents[changedPossinleParents.length - 1] &&\r\n                changedPossinleParents[changedPossinleParents.length - 1]\r\n                  .name == parentDisplayValues[4])\r\n            \"\r\n            dark\r\n            >mdi-menu-right</v-icon\r\n          >\r\n        </span>\r\n      </v-col>\r\n      <v-col\r\n        style=\"padding: 2.5px;display:flex;align-items:center;justify-content:center;text-transform: capitalize;max-width:15%;min-width:15%;border: 1px solid #d3d3d3;height30px;cursor: pointer;\"\r\n        v-for=\"(item, index) in parentDisplayValues\"\r\n        v-bind:class=\"{ selectBackgroundStyle: item == selectedParent }\"\r\n        :key=\"index\"\r\n        @click=\"handleSelectParent(index)\"\r\n        >{{ item }}</v-col\r\n      >\r\n      <v-col style=\"max-width:10%;height30px;padding:0px\"\r\n        >{{ possibleParents.length - parentDisplayValues.length }} more\r\n      </v-col>\r\n    </v-row>\r\n\r\n    <v-row\r\n      style=\"margin-top: 15px\"\r\n      v-bind:class=\"{ saveMargin: isParentValidCheck && groupingSelected }\"\r\n    >\r\n      <v-col cols=\"12\" style=\"padding: 0px\">\r\n        <v-btn\r\n          color=\"#03a9f4\"\r\n          style=\"color: white; height: 25px !important; margin-right: 20px\"\r\n          @click=\"saveAllLedgers\"\r\n        >\r\n          Save\r\n        </v-btn>\r\n        <v-btn\r\n          style=\"color: white; height: 25px !important\"\r\n          color=\"#03a9f4\"\r\n          @click=\"validateLedgers\"\r\n        >\r\n          Validate\r\n        </v-btn>\r\n      </v-col>\r\n    </v-row>\r\n  </v-container>\r\n</template>\r\n<script>\r\nimport store from '../store'\r\n// import { debounce } from \"debounce\";\r\nimport jsPDF from \"jspdf\";\r\nimport \"jspdf-autotable\";\r\nvar numeral = require(\"numeral\");\r\nimport Vue from \"vue\";\r\nVue.filter(\"formatNumber\", function (value) {\r\n  return numeral(value).format(\"0,0\"); // displaying other groupings/separators is possible, look at the docs\r\n});\r\nimport \"ag-grid-community/dist/styles/ag-grid.css\";\r\nimport \"ag-grid-community/dist/styles/ag-theme-material.css\";\r\n// import DropdownCellRenderer from \"./dropdownCellRenderer\"\r\nimport L1Component from \"./taggingL1Component.vue\";import L1HederComponent from \"./taggingL1HeaderComponent.vue\";\r\nimport L2Component from \"./taggingL2Component.vue\";import L2HederComponent from \"./taggingL2HeaderComponent.vue\";\r\nimport L3Component from \"./taggingL3Component.vue\";import L3HederComponent from \"./taggingL3HeaderComponent.vue\";\r\nimport NameComponent from \"./taggingNameComponent.vue\";import NameHederComponent from \"./taggingNameHeaderComponent.vue\";\r\nimport AcitionComponent from \"./taggingActionComponent.vue\";import DrCrComponent from \"./taggingDrCrComponent.vue\";\r\nimport AeComponent from \"./AeComponent.vue\";\r\nimport SelectionComponent from \"./taggingSelectionComponent.vue\";\r\nimport {AgGridVue} from 'ag-grid-vue';\r\nexport default {\r\n  name: \"TaggingHome\",\r\n  components:{\r\n    /* eslint-disable vue/no-unused-components */\r\n    'ag-grid-vue':AgGridVue,'l1HederComponent':L1HederComponent,'l2HederComponent':L2HederComponent,'l3HederComponent':L3HederComponent,\r\n    'l1Component':L1Component,\"l2Component\":L2Component,\"l3Component\":L3Component,\"nameComponent\":NameComponent,\"nameHederComponent\":NameHederComponent,\r\n    \"acitionComponent\":AcitionComponent,\"drCrComponent\":DrCrComponent,\"selectionComponent\":SelectionComponent,\"aeComponent\":AeComponent\r\n  }, \r\n  beforeMount() {        \r\n    this.columnDefs=JSON.parse(JSON.stringify(this.allColumnDefs));\r\n    },\r\n  data() {\r\n    return {\r\n      constantlyChecking:null,\r\n      editLedgerName:{oldValue:\"\",newValue:\"\"},\r\n      editLedger:false,\r\n      isParentDetailsAvailable:[],\r\n      isAllDataGot:false,\r\n      gridApi: null,\r\n            columnApi: null,\r\n            defaultColDef: {\r\n                editable: false,\r\n                sortable: false,\r\n                flex: 1,\r\n                filter: false,\r\n                resizable: true,\r\n            },\r\n            context: {\r\n          componentParent: this\r\n        },\r\n      columnDefs: [],\r\n      allColumnDefs:[\r\n    {\r\n      headerName: \"ACTION\",\r\n      field: \"action\",\r\n      cellRenderer: \"acitionComponent\",\r\n      maxWidth: 110\r\n    },\r\n\r\n    {\r\n      field: \"name\",\r\n      cellRenderer: \"nameComponent\",\r\n      headerComponent:\"nameHederComponent\",\r\n      resizable: true,\r\n    },\r\n    {\r\n      headerName: \"AMOUNT\",\r\n      field: \"balance\",\r\n      maxWidth: 150\r\n    },\r\n    {\r\n      headerName: \"Dr/Cr\",\r\n      field: \"drcr\",\r\n      cellRenderer: \"drCrComponent\",\r\n      maxWidth: 100\r\n    },\r\n    {\r\n      headerName: \"SELECTION\",\r\n      field: \"selection\",\r\n      cellRenderer: \"selectionComponent\",\r\n      maxWidth: 140\r\n    },\r\n    {\r\n      headerName: \"Level 1\",\r\n      field: \"level1\",\r\n      cellRenderer: \"l1Component\",\r\n      headerComponent:\"l1HederComponent\",\r\n      hide:false,\r\n      maxWidth: 350\r\n    },\r\n    {\r\n      headerName: \"Level 2\",\r\n      field: \"level2\",\r\n      cellRenderer: \"l2Component\",\r\n      headerComponent:\"l2HederComponent\",\r\n      hide:false,\r\n      maxWidth: 350\r\n    },{\r\n      headerName: \"Level 3\",\r\n      field: \"level3\",\r\n      cellRenderer: \"l3Component\",\r\n      headerComponent:\"l3HederComponent\",\r\n      hide:true,\r\n      maxWidth: 350\r\n    }\r\n  ],\r\n      rowData: null,\r\n      changedPossinleParents: [],\r\n      tableHeight: \"61.8vh\",\r\n      l1FilterOption: [],\r\n      parentChecked: {},\r\n      childChecked: {},\r\n      parentDisplayErrors: [],\r\n      parentDisplayValues: [],\r\n      isParentValidCheck: false,\r\n      selectedParent: \"\",\r\n      isHeadergroupOpen: true,\r\n      isRowGroupOpen: [],\r\n      isCollapsedParent: [],\r\n      level1filter: null,\r\n      level2filter: null,\r\n      level3filter: null,\r\n      unSavedValue: [],\r\n      totalLedger: 0,\r\n      totaltaggedLedger: 0,\r\n      excelArray: [],\r\n      dialogL1Value: \"\",\r\n      dialogL2Value: \"\",\r\n      alertMeassage: \"\",\r\n      isDiffBulck: false,\r\n      dialogWidth: \"70vw\",\r\n      isDialogMode: 1,\r\n      level2BulkValues: [],\r\n      bulkTagLevel2Enabled: false,\r\n      bulkTagLevel1Enabled: false,\r\n      bulkTagSelectedLevel2: \"\",\r\n      level1Names: [],\r\n      checkbox: false,\r\n      timeout: null,\r\n      l1: [],\r\n      l2: [],\r\n      l3: [],\r\n      l1Value: [],\r\n      date: \"\",\r\n      filterOn: [],\r\n      selectedGroup: \"\",\r\n      groupingSelected: true,\r\n      tableFilter: \"\",\r\n      selectedAllItems: false,\r\n      showLevel1: true,\r\n      showLevel2: true,\r\n      showLevel3: false,\r\n      tabSelection: 0,\r\n      possibleParents: [],\r\n      selectedImportLevel: \"Closing Balance\",\r\n      tempSelect: [],\r\n      templevel1Arryay: [],\r\n      templevel2Arryay: [],\r\n      templevel3Arryay: [],\r\n      tempTreelevel1Arryay: [],\r\n      tempTreelevel2Arryay: [],\r\n      tempTreelevel3Arryay: [],\r\n\r\n      selectedYear: \"Current Year\",\r\n      selectedCompany: \"VKC\",\r\n      showXMLDialogue: false,\r\n\r\n      dataImported: false,\r\n      tagSelected: false,\r\n      selectedTag: \"\",\r\n      fields: [\r\n        {\r\n          key: \"action\",\r\n          sortable: false,\r\n        },\r\n\r\n        {\r\n          key: \"name\",\r\n          sortable: false,\r\n          thStyle: { width: \"25vw\" },\r\n          tdStyle: { width: \"25vw\" },\r\n        },\r\n        {\r\n          label: \"AMOUNT\",\r\n          key: \"balance\",\r\n          sortable: false,\r\n          thStyle: { width: \"6vw\" },\r\n          tdStyle: { width: \"6vw\" },\r\n        },\r\n        {\r\n          label: \"Dr/Cr\",\r\n          key: \"drcr\",\r\n          sortable: false,\r\n          thStyle: { width: \"5vw\" },\r\n          tdStyle: { width: \"5vw\" },\r\n        },\r\n        {\r\n          label: \"Selection\",\r\n          key: \"selection\",\r\n          sortable: false,\r\n          thStyle: { width: \"3vw\" },\r\n          tdStyle: { width: \"3vw\" },\r\n        },\r\n        {\r\n          label: \"Level 1\",\r\n          key: \"level1\",\r\n          sortable: false,\r\n          thStyle: { width: \"25vw\" },\r\n          tdStyle: { width: \"25vw\" },\r\n        },\r\n        {\r\n          label: \"Level 2\",\r\n          key: \"level2\",\r\n          sortable: false,\r\n          thStyle: { width: \"25vw\" },\r\n          tdStyle: { width: \"25vw\" },\r\n        },\r\n      ],\r\n\r\n      showDatatable: false,\r\n      orginalTaggingtreeData: [],\r\n      taggingTreeData: [],\r\n      filteredTaggingTreeData: [],\r\n      checkBoxValue: false,\r\n      l1Options: [],\r\n      l2Options: {}, \r\n      l3Options: {},\r\n    };\r\n  },\r\n  async mounted() {\r\n    this.getLedgerDetails();\r\n    this.reportingPeriodId = sessionStorage.getItem(\"reportId\");\r\n  },\r\n  methods: {\r\n    closeEditDialog(){\r\n      this.editLedger =false;\r\n    },\r\n    openEditDialog(val,data){ console.log(val,data)\r\n      this.editLedgerName.oldValue = val;\r\n      this.editLedgerName[\"data\"]=data;\r\n      this.editLedger =true;\r\n    },\r\n    async updateLedgerName(){\r\n      console.log(this.editLedgerName)\r\n      var res = await this.$apiService.put(`/ledgerDetails/editData`,{\"data\":{\"ledgerid\":this.editLedgerName.data.ledgerid,name:this.editLedgerName.newValue}});\r\n      if (res && res.status === 200) {\r\n        this.unSavedValue = [];\r\n        this.isDialogMode = 1;\r\n        this.dialogWidth = \"35vw\";\r\n        this.alertMeassage = \"Ledgers are Updated successfully.\";\r\n        this.editLedger=false;\r\n        //update\r\n        let orgIndex = this.$_.findLastIndex(this.orginalTaggingtreeData, {\r\n        name: this.editLedgerName.oldValue,\r\n        parent: this.editLedgerName.data.parent,\r\n      });\r\n      var rowNode = this.gridApi.getRowNode(this.editLedgerName.data.parent+this.editLedgerName.oldValue);\r\n      rowNode.setDataValue(\"name\", this.editLedgerName.newValue);\r\n      if (orgIndex != -1) this.orginalTaggingtreeData[orgIndex][\"name\"] = this.editLedgerName.newValue; \r\n        setTimeout(() => {\r\n          this.bulkTagLevel1Enabled = true;\r\n        }, 0);\r\n      }\r\n      if (res.data.status === \"error\") {\r\n        this.isDialogMode = 1;\r\n        this.dialogWidth = \"35vw\";\r\n        this.alertMeassage = \"Ledgers are not Update successfully.\";\r\n        this.editLedger=false;\r\n        setTimeout(() => {\r\n          this.bulkTagLevel1Enabled = true;\r\n        }, 0);\r\n      }\r\n    },\r\n    async aeSuccessCallback(addEntryData){\r\n      var selectedLedgersIndex =[];\r\n      addEntryData.forEach(async (val,idx)=>{\r\n        if(!val.notYetSaved) {   \r\n        let orgIndex = this.$_.findLastIndex(this.orginalTaggingtreeData, {\r\n            ledgerid: val.ledger\r\n          });\r\n          selectedLedgersIndex.push([orgIndex,idx]);\r\n        }\r\n      })\r\n        this.unSavedValue = [];\r\n        this.isDialogMode = 1;\r\n        this.dialogWidth = \"35vw\";\r\n        this.alertMeassage = \"Ledgers are Updated successfully.\";\r\n        console.log(this.orginalTaggingtreeData,selectedLedgersIndex,addEntryData,this.rowData,\"check\")\r\n        //update\r\n        selectedLedgersIndex.forEach((val)=>{\r\n          if(addEntryData[val[1]].type == \"Dr\")\r\n          this.orginalTaggingtreeData[val[0]][\"balance\"] = Number(this.orginalTaggingtreeData[val[0]][\"balance\"]) - Number(addEntryData[val[1]].amount);\r\n          else\r\n          this.orginalTaggingtreeData[val[0]][\"balance\"] = Number(this.orginalTaggingtreeData[val[0]][\"balance\"]) +  Number(addEntryData[val[1]].amount);\r\n        })\r\n        addEntryData.forEach(val=>{\r\n          let orgIndex = this.$_.findLastIndex(this.rowData, {\r\n            ledgerid: val.ledger\r\n          });  \r\n          if(orgIndex!=-1){\r\n            if(val.type == \"Dr\")\r\n          this.rowData[orgIndex][\"balance\"] = Number(this.rowData[orgIndex][\"balance\"]) - Number(val.amount);\r\n          else\r\n          this.rowData[orgIndex][\"balance\"] = Number(this.rowData[orgIndex][\"balance\"]) + Number(val.amount);\r\n          }         \r\n        })\r\n        addEntryData.forEach(async (val)=>{\r\n        if(val.notYetSaved) {\r\n            var res = await this.$apiService.get(`/ledgerDetails/getLedgerDetailsByName?reportingperioddataid=${Number(this.reportingPeriodId)}&name=${val.notYetSaved.name}`);\r\n      \r\n            if (res && res.status === 200 && res.data && res.data.data && res.data.data.length) { \r\n              console.log(res.data,\"data\")\r\n              let val = res.data.data[0];\r\n                val[\"level1\"] = val[\"level1\"] && val[\"level1\"]!=\"0\" ? val[\"level1\"].trim() : \"\";\r\n                val[\"level2\"] = val[\"level2\"] && val[\"level1\"]!=\"0\" ? val[\"level2\"].trim() : \"\";\r\n                val[\"level3\"] = val[\"level3\"] && val[\"level1\"]!=\"0\" ? val[\"level3\"].trim() : \"\";\r\n                val[\"drcr\"] = val[\"drcr\"]?val[\"drcr\"]:\"Dr\";\r\n                val.level2Options = this.l2Options[val[\"level1\"]];\r\n                if (val.level2Options)\r\n                  val.level3Options = this.l3Options[val[\"level1\"]][val[\"level2\"]];\r\n              this.orginalTaggingtreeData.push(val);\r\n              if(this.rowData[0].groupname == val.groupname)\r\n              this.rowData.push(val);\r\n            }    \r\n        }\r\n        })\r\n        this.gridApi.setRowData(this.rowData);\r\n        setTimeout(() => {\r\n          this.bulkTagLevel1Enabled = true;\r\n        }, 0);\r\n    },\r\n    aeFailedCallback(){\r\n      this.isDialogMode = 1;\r\n      this.dialogWidth = \"35vw\";\r\n      this.alertMeassage = \"Ledgers are not Updated successfully.\";\r\n      setTimeout(() => {\r\n          this.bulkTagLevel1Enabled = true;\r\n        }, 0);\r\n    },            \r\n    updateSelection(e,val){\r\n      console.log(e,val,\"e\",this.rowData,this.orginalTaggingtreeData);\r\n      // let index = this.$_.findLastIndex(this.rowData, {\r\n      //   name: val.name,\r\n      //   parent: val.parent,\r\n      // });\r\n      // this.sampleRowData = JSON.parse(JSON.stringify(this.rowData))\r\n      // this.rowData[index][\"selected\"] = e;\r\n      this.rowData = this.rowData.map(value=>{\r\n        if(this.groupingSelected){\r\n          if(value.name == val.name && value.parent == val.parent) value[\"selected\"] = e;\r\n        }\r\n        else{\r\n          if( value.isParentName ){\r\n            if(value.name == val.name) value[\"selected\"] = e;\r\n          }\r\n          else{\r\n            if(value.parent == val.name) value[\"selected\"] = e;\r\n          }\r\n        }\r\n        return value;\r\n      })\r\n      // var rowNode = this.gridApi.getRowNode(val.parent+val.name);\r\n      // console.log(rowNode,\"rowNode\")\r\n      // rowNode.setDataValue(\"selection\", e);\r\n      },\r\n    getRowNodeId(data){\r\n    return data.parent+data.name;},\r\n    onGridReady(params) {\r\n            this.gridApi = params.api;\r\n            this.gridApi.sizeColumnsToFit()\r\n            this.gridColumnApi = params.columnApi;\r\n    },\r\n    filterLevel1Options(e) {\r\n      this.l1FilterOption = JSON.parse(JSON.stringify(this.l1Options)).filter((val) => {\r\n        var regex = new RegExp(e, \"ig\");\r\n        if (regex.test(val.name)) return true;\r\n        else return false;\r\n      });\r\n    },\r\n    handleParentFil(item) {\r\n      if (this.parentChecked[item.header])\r\n        this.parentChecked[item.header] = false;\r\n      else this.parentChecked[item.header] = true;\r\n      this.l1FilterOption.forEach((val) => {\r\n        if (val.group == item.header) {\r\n          if (this.parentChecked[item.header]) {\r\n            this.childChecked[val.name] = true;\r\n          } else this.childChecked[val.name] = false;\r\n        }\r\n      });\r\n      //filter the table\r\n      var check = Object.values(this.childChecked).filter((val) => val);\r\n      var resultData = [];\r\n      if (check.length) {\r\n        resultData = JSON.parse(JSON.stringify(this.ledgerDataCopy)).filter(\r\n          (val) => { console.log(val,\"val\",this.childChecked)\r\n            if (!this.groupingSelected && val.isParentName) return true;\r\n            if (this.childChecked[val.level1]) return true;\r\n            else return false;\r\n          }\r\n        );\r\n\r\n        if (!this.groupingSelected)\r\n          resultData = resultData.filter((val, idx, arr) => {\r\n            if (arr[idx + 1] && val.isParentName && arr[idx + 1].isParentName)\r\n              return false;\r\n            else return true;\r\n          });\r\n        console.log(resultData, resultData[resultData.length - 1],this.ledgerDataCopy);\r\n        if (resultData[resultData.length - 1].isParentName) resultData.pop();\r\n        this.rowData = resultData;\r\n      } else {\r\n        this.rowData = JSON.parse(JSON.stringify(this.ledgerDataCopy))\r\n      }\r\n    },\r\n    handleChildFil(item) {\r\n      if (this.childChecked[item.name]) {\r\n        this.childChecked[item.name] = false;\r\n        if (this.parentChecked[item.group])\r\n          this.parentChecked[item.group] = false;\r\n      } else this.childChecked[item.name] = true;\r\n      //filter table\r\n      var check = Object.values(this.childChecked).filter((val) => val);\r\n      var resultData = [];\r\n      if (check.length) {\r\n        resultData = JSON.parse(JSON.stringify(this.ledgerDataCopy)).filter(\r\n          (val) => {\r\n            if (!this.groupingSelected && val.isParentName) return true;\r\n            if (this.childChecked[val.level1]) return true;\r\n            else return false;\r\n          }\r\n        );\r\n\r\n        if (!this.groupingSelected)\r\n          resultData = resultData.filter((val, idx, arr) => {\r\n            if (arr[idx + 1] && val.isParentName && arr[idx + 1].isParentName)\r\n              return false;\r\n            else return true;\r\n          });\r\n        console.log(resultData, resultData[resultData.length - 1]);\r\n        if (resultData[resultData.length - 1].isParentName) resultData.pop();\r\n        this.gridApi.setRowData(resultData);\r\n      } else {\r\n        this.gridApi.setRowData(this.ledgerDataCopy);\r\n      }\r\n    },\r\n    updateUnsavedValues(parent,name,orgIndex){\r\n      let unsaveIndex = this.$_.findLastIndex(this.unSavedValue, {\r\n        name: name,\r\n        parent: parent,\r\n      });\r\n      if (unsaveIndex != -1)\r\n        this.unSavedValue[unsaveIndex] = this.$_.pick(this.orginalTaggingtreeData[orgIndex],\"ledgerid\", \"name\", \"taggingheader\", \"level1\", \"level2\", \"level3\", \"balance\", \"isclosingbal\", \"groupname\", \"parent\", \"reportingperioddataid\", \"drcr\");\r\n      else this.unSavedValue.push(this.$_.pick(this.orginalTaggingtreeData[orgIndex],\"ledgerid\", \"name\", \"taggingheader\", \"level1\", \"level2\", \"level3\", \"isclosingbal\", \"balance\", \"groupname\", \"parent\", \"reportingperioddataid\", \"drcr\"));\r\n    },\r\n    drcrChange(parent, name, value) {\r\n      let orgIndex = this.$_.findLastIndex(this.orginalTaggingtreeData, {\r\n        name: name,\r\n        parent: parent,\r\n      });\r\n      var rowNode = this.gridApi.getRowNode(parent+name);\r\n      rowNode.setDataValue(\"drcr\", value);\r\n      if (orgIndex != -1) this.orginalTaggingtreeData[orgIndex][\"drcr\"] = value; \r\n      this.updateUnsavedValues(parent, name,orgIndex);     \r\n    },\r\n    validateLedgers() {\r\n      console.log(this.groupingSelected,\"groupingSelected\")\r\n      if (this.groupingSelected) {\r\n        var invalidparents = [];\r\n        if (this.showLevel2 && this.showLevel3) {\r\n          this.orginalTaggingtreeData.map((val) => { \r\n            if (!val.level1 || !val.level2 || !val.level3) {\r\n              invalidparents.push(val.parent);\r\n            }\r\n          });\r\n        } else if (this.showLevel1 && !this.showLevel2 && !this.showLevel3) {\r\n          this.orginalTaggingtreeData.map((val) => {\r\n            if (!val.level1) {\r\n              invalidparents.push(val.parent);\r\n            }\r\n          });\r\n        } else {\r\n          this.orginalTaggingtreeData.map((val) => {\r\n            if (!val.level1 || !val.level2) {\r\n              invalidparents.push(val.parent);\r\n            }\r\n          });\r\n        }\r\n        invalidparents = this.$_.uniq(invalidparents);\r\n        this.parentDisplayErrors = invalidparents;\r\n        var changedPossinleParents = [];\r\n        this.parentDisplayValues = [];\r\n        this.possibleParents.forEach((val) => {\r\n          if (invalidparents.indexOf(val.name) != -1)\r\n            changedPossinleParents.unshift({ name: val.name });\r\n          else changedPossinleParents.push({ name: val.name });\r\n        });\r\n        this.possibleParents = changedPossinleParents;\r\n        changedPossinleParents.forEach((val, idx) => {\r\n          if (idx < 5) {\r\n            this.parentDisplayValues.push(val.name);\r\n          }\r\n        });\r\n        this.changedPossinleParents = changedPossinleParents;\r\n        this.isParentValidCheck = true;\r\n        this.handleSelectParent(0)\r\n      } else {\r\n        if (this.showLevel2 && this.showLevel3) {\r\n          this.handleTagged(0, 3);\r\n        } else if (this.showLevel1 && !this.showLevel2 && !this.showLevel3) {\r\n          this.handleTagged(0, 1);\r\n        } else {\r\n          this.handleTagged(0, 2);\r\n        }\r\n      }\r\n    },\r\n    async handleSelectParent(idx) {\r\n      this.selectedParent = this.parentDisplayValues[idx];\r\n      console.log(this.isParentDetailsAvailable,this.selectedParent,this.isAllDataGot,idx )\r\n      if(this.isAllDataGot || this.isParentDetailsAvailable.indexOf(this.selectedParent)!=-1){\r\n        console.log(this.orginalTaggingtreeData,\"this.orginalTaggingtreeData\")\r\n        let resultData = this.orginalTaggingtreeData.filter(\r\n          (val) => val.parent == this.selectedParent\r\n        );\r\n        this.rowData = JSON.parse(JSON.stringify(resultData));\r\n        this.gridApi.setRowData(resultData);\r\n      }\r\n      else{\r\n        //get ledger details by reportingreperiodid ,parent name and balance type\r\n      var res = await this.$apiService.post(\"/ledgerDetails/get\", {\r\n        reportingperioddataid: Number(this.reportingPeriodId),\r\n        parentName: this.selectedParent,\r\n        isClosingBalance: true,\r\n      });\r\n      if (res && res.status === 200) {\r\n        this.isParentDetailsAvailable.push(this.selectedParent);\r\n        res.data.data = JSON.parse(res.data.data).map((val) => {\r\n          val[\"level1\"] = val[\"level1\"] ? val[\"level1\"].trim() : \"\";\r\n          val[\"level2\"] = val[\"level2\"] ? val[\"level2\"].trim() : \"\";\r\n          val[\"level3\"] = val[\"level3\"] ? val[\"level3\"].trim() : \"\";\r\n          val[\"drcr\"] = val[\"drcr\"]?val[\"drcr\"]:\"Dr\";\r\n          val.level2Options = this.l2Options[val[\"level1\"]];\r\n          if (val.level2Options)\r\n            val.level3Options = this.l3Options[val[\"level1\"]][val[\"level2\"]];\r\n          return val;\r\n        });\r\n        this.rowData = JSON.parse(JSON.stringify(res.data.data));\r\n        this.gridApi.setRowData(this.rowData);\r\n        this.orginalTaggingtreeData = this.orginalTaggingtreeData.concat(JSON.parse(JSON.stringify(res.data.data)));\r\n      }\r\n      }      \r\n    },\r\n    moveParent(idx) {\r\n      if (idx == 1) {\r\n        this.parentDisplayValues.pop();\r\n        let index = this.$_.findLastIndex(this.possibleParents, {\r\n          name: this.parentDisplayValues[0],\r\n        });\r\n        this.parentDisplayValues.unshift(this.possibleParents[index - 1].name);\r\n      } else {\r\n        this.parentDisplayValues.shift();\r\n        let index = this.$_.findLastIndex(this.possibleParents, {\r\n          name: this.parentDisplayValues[3],\r\n        });\r\n        this.parentDisplayValues.push(this.possibleParents[index + 1].name);\r\n      }\r\n    },\r\n    headerGroupHandel(idx) {\r\n      var resultData = [];\r\n      if (idx == 1) {\r\n        this.isHeadergroupOpen = false;\r\n        this.isCollapsedParent = [];\r\n        for (let key in this.isRowGroupOpen) {\r\n          this.isCollapsedParent.push(key);\r\n          this.isRowGroupOpen[key] = false;\r\n        }\r\n        resultData = JSON.parse(JSON.stringify(this.ledgerDataCopy)).filter(\r\n          (val) => {\r\n            if (val.parent) {\r\n              return false;\r\n            } else return true;\r\n          }\r\n        );\r\n        this.gridApi.setRowData(resultData)\r\n      } else {\r\n        this.isHeadergroupOpen = true;\r\n        this.isCollapsedParent = [];\r\n        for (let key in this.isRowGroupOpen) {\r\n          this.isRowGroupOpen[key] = true;\r\n        }\r\n        let resultSData = this.$_.sortBy(\r\n          JSON.parse(JSON.stringify(this.ledgerDataCopy)),\r\n          function (val) {\r\n            return val.indexForSort;\r\n          }\r\n        );\r\n        this.gridApi.setRowData(resultSData)\r\n      }\r\n    },\r\n    rowGroupHandler(name, idx) {\r\n      if (idx == 1) {\r\n        this.isCollapsedParent.push(name);\r\n        this.isRowGroupOpen[name] = false;\r\n      } else {\r\n        this.isCollapsedParent = this.isCollapsedParent.filter(\r\n          (val) => val != name\r\n        );\r\n        this.isRowGroupOpen[name] = true;\r\n      }\r\n      var resultData = [];\r\n      resultData = JSON.parse(JSON.stringify(this.ledgerDataCopy)).filter(\r\n        (val) => {\r\n          if (val.parent && this.isCollapsedParent.indexOf(val.parent) != -1)\r\n            return false;\r\n          else return true;\r\n        }\r\n      );\r\n      this.gridApi.setRowData(resultData)\r\n      // this.rowData = JSON.parse(JSON.stringify(resultData))\r\n    },\r\n    handleTagged(val, level) {\r\n      var resultData = [];\r\n      if (level == 1) {\r\n        console.log(this.rowData,this.level1filter)\r\n        if (this.level1filter == val) this.level1filter = null;\r\n        else this.level1filter = val;\r\n        if (this.level1filter == 0) {\r\n          resultData = JSON.parse(\r\n            JSON.stringify(\r\n              this.rowData\r\n            )\r\n          ).filter((val) => {\r\n            if (!this.groupingSelected && val.isParentName) return true;\r\n            if (\r\n              val.level1 != \"0\" &&\r\n              val.level1 &&\r\n              !/no level/i.test(val.level1)\r\n            )\r\n              return false;\r\n            else return true;\r\n          });\r\n        } else if (this.level1filter == 1) {\r\n          resultData = JSON.parse(\r\n            JSON.stringify(\r\n              this.rowData\r\n            )\r\n          ).filter((val) => {\r\n            if (!this.groupingSelected && val.isParentName) return true;\r\n            if (\r\n              val.level1 != \"0\" &&\r\n              val.level1 &&\r\n              !/no level/i.test(val.level1)\r\n            )\r\n              return true;\r\n            else return false;\r\n          });\r\n        } else {\r\n          resultData = JSON.parse(\r\n            JSON.stringify(\r\n              this.rowData\r\n            )\r\n          )\r\n        }\r\n      } else if (level == 2) {\r\n        if (this.level2filter == val) this.level2filter = null;\r\n        else this.level2filter = val;\r\n        if (this.level2filter == 0) {\r\n          resultData = JSON.parse(\r\n            JSON.stringify(\r\n              this.rowData\r\n            )\r\n          ).filter((val) => {\r\n            if (!this.groupingSelected && val.isParentName) return true;\r\n            if (\r\n              val.level2 != \"0\" &&\r\n              val.level2 &&\r\n              !/no level/i.test(val.level2) &&\r\n              val.level1 != \"0\" &&\r\n              val.level1 &&\r\n              !/no level/i.test(val.level1)\r\n            )\r\n              return false;\r\n            else return true;\r\n          });\r\n        } else if (this.level2filter == 1) {\r\n          resultData = JSON.parse(\r\n            JSON.stringify(\r\n              this.rowData\r\n            )\r\n          ).filter((val) => {\r\n            if (!this.groupingSelected && val.isParentName) return true;\r\n            if (\r\n              val.level2 != \"0\" &&\r\n              val.level2 &&\r\n              !/no level/i.test(val.level2) &&\r\n              val.level1 != \"0\" &&\r\n              val.level1 &&\r\n              !/no level/i.test(val.level1)\r\n            )\r\n              return true;\r\n            else return false;\r\n          });\r\n        } else {\r\n          resultData = JSON.parse(\r\n            JSON.stringify(\r\n              this.rowData\r\n            )\r\n          )\r\n        }\r\n      } else {\r\n        if (this.level3filter == val) this.level3filter = null;\r\n        else this.level3filter = val;\r\n        if (this.level3filter == 0) {\r\n          resultData = JSON.parse(\r\n            JSON.stringify(\r\n              this.rowData\r\n            )\r\n          ).filter((val) => {\r\n            if (!this.groupingSelected && val.isParentName) return true;\r\n            if (\r\n              val.level3 != \"0\" &&\r\n              val.level3 &&\r\n              !/no level/i.test(val.level3) &&\r\n              val.level2 != \"0\" &&\r\n              val.level2 &&\r\n              !/no level/i.test(val.level2) &&\r\n              val.level1 != \"0\" &&\r\n              val.level1 &&\r\n              !/no level/i.test(val.level1)\r\n            )\r\n              return false;\r\n             else return true;\r\n          });\r\n        } else if (this.level3filter == 1) {\r\n          resultData = JSON.parse(\r\n            JSON.stringify(\r\n              this.rowData\r\n            )\r\n          ).filter((val) => {\r\n            if (!this.groupingSelected && val.isParentName) return true;\r\n            if (\r\n              val.level3 != \"0\" &&\r\n              val.level3 &&\r\n              !/no level/i.test(val.level3) &&\r\n              val.level2 != \"0\" &&\r\n              val.level2 &&\r\n              !/no level/i.test(val.level2) &&\r\n              val.level1 != \"0\" &&\r\n              val.level1 &&\r\n              !/no level/i.test(val.level1)\r\n            )\r\n              return true;\r\n             else return false;\r\n          });\r\n        } else {\r\n          resultData = JSON.parse(\r\n            JSON.stringify(\r\n              this.rowData\r\n            )\r\n          )\r\n        }\r\n      }\r\n      if (!this.groupingSelected)\r\n        resultData = resultData.filter((val, idx, arr) => {\r\n          if (arr[idx + 1] && val.isParentName && arr[idx + 1].isParentName)\r\n            return false;\r\n          else if (this.selectedParent) {\r\n            if (this.selectedParent == val.parent) return true;\r\n            else return false;\r\n          } else return true;\r\n        });\r\n        this.gridApi.setRowData(resultData);\r\n    },\r\n    preventTypeChange(e) {\r\n      if (this.unSavedValue.length) {\r\n        this.isDialogMode = 1;\r\n        this.dialogWidth = \"35vw\";\r\n        this.alertMeassage =\r\n          \"Please Save the changes before changing the Balance Type\";\r\n        setTimeout(() => {\r\n          this.bulkTagLevel1Enabled = true;\r\n        }, 0);\r\n        return;\r\n      } else {\r\n        let val = e.target.innerText;\r\n        this.selectedImportLevel = val;\r\n        this.getFullLedgerDetails();\r\n      // this.gridApi.refreshCells();\r\n      }\r\n    },\r\n    downloadCSV(data) {\r\n      var csv = this.$papa.unparse(data);\r\n\r\n      var csvData = new Blob([csv], { type: \"text/csv;charset=utf-8;\" });\r\n      var csvURL = null;\r\n      if (navigator.msSaveBlob) {\r\n        csvURL = navigator.msSaveBlob(csvData, \"ledgerDetails.csv\");\r\n      } else {\r\n        csvURL = window.URL.createObjectURL(csvData);\r\n      }\r\n\r\n      var tempLink = document.createElement(\"a\");\r\n      tempLink.href = csvURL;\r\n      tempLink.setAttribute(\"download\", \"ledgerDetails.csv\");\r\n      tempLink.click();\r\n    },\r\n    async handleExport(idx) {\r\n      var res = null;\r\n        if(!this.isAllDataGot){\r\n        res = await this.$apiService.post(\"/ledgerDetails/get\", {\r\n          reportingperioddataid: Number(this.reportingPeriodId),\r\n          parentName: \"ALL\",\r\n          isClosingBalance: this.selectedImportLevel == \"Closing Balance\",\r\n        });\r\n        this.orginalTaggingtreeData = JSON.parse(res.data.data);\r\n        }\r\n      if (this.isAllDataGot || (res && res.status === 200)) {\r\n        this.isAllDataGot = true;\r\n        var pdfData = this.orginalTaggingtreeData.map((val) => {\r\n          if (val.isParentName)\r\n            return [\r\n              { content: val.name, colSpan: 6, styles: { fontStyle: \"bold\" } },\r\n            ];\r\n          else\r\n            return [\r\n              val.name,numeral(val[\"balance\"]).format(\"0,0\"),\r\n              // this.selectedImportLevel == \"Closing Balance\"\r\n              //   ? numeral(val[\"balance\"]).format(\"0,0\")\r\n              //   : numeral(val[\"balance\"]).format(\"0,0\"),\r\n              val[\"drcr\"] ? val[\"drcr\"] : \"Dr\",\r\n              val.level1,\r\n              val.level2,\r\n              val.level3,\r\n            ];\r\n        });\r\n        if (idx == 1) {\r\n          this.generatePdf(\r\n            {\r\n              theme: \"grid\",\r\n              // body: [\r\n              // [{ content: 'Text',sample:'gh', colSpan: 2, styles: { halign: 'center' } }],\r\n              body: pdfData,\r\n              // ],\r\n              head: [\r\n                [\r\n                  \"Name Of Ledgers\",\r\n                  \"Amount\",\r\n                  \"Dr/Cr\",\r\n                  \"LEVEL 1\",\r\n                  \"LEVEL 2\",\r\n                  \"LEVEL 3\",\r\n                ],\r\n              ],\r\n              tableWidth: \"auto\",\r\n              styles: { fontSize: \"7.5\" },\r\n            },\r\n            \"ledgerDetails\"\r\n          );\r\n        } else {\r\n          this.excelArray = this.orginalTaggingtreeData.map((val) => {\r\n            return {\r\n              \"Name Of Ledger\": val.name,\r\n              Amount:numeral(val[\"balance\"]).format(\"0,0\"),\r\n                // this.selectedImportLevel == \"Closing Balance\"\r\n                //   ? numeral(val[\"balance\"]).format(\"0,0\")\r\n                //   : numeral(val[\"balance\"]).format(\"0,0\"),\r\n              \"Dr/Cr\": val[\"drcr\"] ? val[\"drcr\"] : \"Dr\",\r\n              \"LEVEL 1\": val.level1,\r\n              \"LEVEL 2\": val.level2,\r\n              \"LEVEL 3\": val.level3,\r\n            };\r\n          });\r\n          this.downloadCSV(this.excelArray);\r\n        }\r\n      }\r\n    },\r\n    generatePdf(config, name) {\r\n      const doc = new jsPDF();\r\n      doc.autoTable(config);\r\n      doc.save(name + \".pdf\");\r\n    },\r\n    handleAllLedgers() {\r\n      this.checkBoxValue = !this.checkBoxValue;\r\n      this.rowData = this.rowData.map((x) => {\r\n        x.selected = this.checkBoxValue;\r\n        return x;\r\n      });\r\n    },\r\n    ledgerDialogl1Changed(e) {\r\n      this.dialogL1Value = e;\r\n      if (this.isDialogMode == 3) {\r\n        this.dialogL2Value = \"\";\r\n        this.l2 = [];\r\n        if (this.l2Options[e]) this.l2 = this.l2Options[e];\r\n      }\r\n    },\r\n    ledgerDialogl2Changed(e) {\r\n      this.dialogL2Value = e;\r\n    },\r\n    closeDialog() {\r\n      this.bulkTagLevel1Enabled = false;\r\n    },\r\n    filterTableByledger(e) { \r\n      var resultData = [];\r\n      this.orginalTaggingtreeData.forEach((val) => {\r\n        if (e) {          \r\n          var regex = new RegExp(e, \"i\");\r\n          if (\r\n            regex.test(val.name) &&\r\n            (this.selectedParent ? this.selectedParent == val.parent : true)\r\n          )\r\n            resultData.push(val);\r\n        } else if(this.selectedParent == val.parent) resultData.push(val);\r\n      });\r\n      this.gridApi.setRowData(resultData)\r\n    },\r\n    async getFullLedgerDetails(){\r\n      store.commit('SET_IS_LOADING',true);  \r\n      //get ledger details by reportingreperiodid ,parent name and balance type\r\n          var res = await this.$apiService.post(\"/ledgerDetails/get\", {\r\n            reportingperioddataid: Number(this.reportingPeriodId),\r\n            parentName: \"ALL\",\r\n            isClosingBalance: this.selectedImportLevel == \"Closing Balance\",\r\n          });\r\n          if (res && res.status === 200) {\r\n            res.data.data = JSON.parse(res.data.data).map((val) => {\r\n              val[\"level1\"] = val[\"level1\"] && val[\"level1\"]!=\"0\" ? val[\"level1\"].trim() : \"\";\r\n              val[\"level2\"] = val[\"level2\"] && val[\"level1\"]!=\"0\" ? val[\"level2\"].trim() : \"\";\r\n              val[\"level3\"] = val[\"level3\"] && val[\"level1\"]!=\"0\" ? val[\"level3\"].trim() : \"\";\r\n              val[\"drcr\"] = val[\"drcr\"]?val[\"drcr\"]:\"Dr\";\r\n\r\n              val.level2Options = this.l2Options[val[\"level1\"]];\r\n              if (val.level2Options)\r\n                val.level3Options = this.l3Options[val[\"level1\"]][val[\"level2\"]];\r\n              return val;\r\n            });\r\n            var index = this.parentDisplayValues.indexOf(this.selectedParent);\r\n            this.orginalTaggingtreeData = JSON.parse(JSON.stringify(res.data.data));\r\n            this.isAllDataGot = true;\r\n            this.handleSelectParent(index);\r\n            // console.log(res.data.data,\"res.data.data\")\r\n            // this.rowData = JSON.parse(JSON.stringify(res.data.data));\r\n            \r\n          }\r\n          store.commit('SET_IS_LOADING',true); \r\n              //get tagging dashoard value\r\n          var res1 = await this.$apiService.get(`ledger/taggingdashvalue?reportingPeriodId=${sessionStorage.getItem(\"reportId\")}&level=${sessionStorage.getItem(\"taggingLevel\")}`);\r\n          if(res1&&res1.status === 200) {  \r\n            this.totalLedger = res1.data.data.closingBalance.ledger.total;\r\n            this.totaltaggedLedger = res1.data.data.closingBalance.ledger.tagged;\r\n          } \r\n    },\r\n    async getLedgerDetails() {\r\n      store.commit('SET_IS_LOADING',true); \r\n      this.fina = JSON.parse(sessionStorage.getItem(\"fina\"));\r\n      var companyId = JSON.parse(sessionStorage.getItem(\"fina\")).company_id;      \r\n      // get l1 l2 l3 options by company type\r\n      var levelsOptionsRes = await this.$apiService.post(\"/taggingtree\", {\r\n        companyId: companyId,\r\n      });\r\n      store.commit('SET_IS_LOADING',true);       \r\n      var options = JSON.parse(levelsOptionsRes.data.data);\r\n      this.l1Options = options.l1.data;\r\n      this.l2Options = options.l2;\r\n      this.l3Options = options.l3;\r\n      this.l1FilterOption = JSON.parse(JSON.stringify(this.l1Options));\r\n      //gorup wise tagging concept\r\n      var total = 0;\r\n      var parentname = [];\r\n      var loopCount = 0;\r\n      this.possibleParents=[];\r\n      var firstLedgerGot = false; \r\n      setTimeout(() => {\r\n        store.commit('SET_IS_LOADING',true);\r\n      }, 100);\r\n       store.commit('SET_IS_LOADING',true);     \r\n      this.constantlyChecking = setInterval(async() => {\r\n        var parentRes;\r\n        if(!firstLedgerGot){\r\n        //get all parents name for this reportingperiod id\r\n        parentRes = await this.$apiService.post(\"/ledgerDetails/getParents\", {\r\n          reportingperioddataid: Number(this.reportingPeriodId)\r\n        });\r\n        \r\n        store.commit('SET_IS_LOADING',true); \r\n        }\r\n        else{\r\n          await fetch(\"http://localhost:8080/ledgerDetails/getParents\",{method:\"POST\",headers:{\r\n            'Content-Type': 'application/json'\r\n            },body:JSON.stringify({reportingperioddataid: Number(this.reportingPeriodId)})\r\n          }).then(res=>res.json()).then(res=>{parentRes={\"data\":res}});\r\n          \r\n        }\r\n        console.log(parentRes,\"parentRes\")\r\n        if (parentRes) {\r\n          if(!total) total = parentRes.data.data.totalgroup;\r\n          console.log(parentRes.data.data.groupcompleted,\"parentRes.data.data.groupcompleted\")\r\n          parentname[loopCount] = parentRes.data.data.groupcompleted;\r\n          parentname[loopCount].forEach((val,idx)=>{\r\n            if(val != 'Profit & Loss A/c' && idx>this.possibleParents.length-1)\r\n              this.possibleParents.push({\"name\":val})\r\n          })\r\n          \r\n          if(this.parentDisplayValues.length<=5)this.parentDisplayValues = this.possibleParents.map(val=>val.name).slice(0, 5);\r\n          if(!this.selectedParent)this.selectedParent = this.parentDisplayValues[0];\r\n          if(!this.selectedParent)this.isParentDetailsAvailable.push(this.selectedParent);\r\n          console.log(firstLedgerGot ,this.possibleParents[0] )\r\n          if(!firstLedgerGot && this.possibleParents[0]){\r\n                firstLedgerGot = true;\r\n                //get ledger details by reportingreperiodid ,parent name and balance type\r\n                var res = await this.$apiService.post(\"/ledgerDetails/get\", {\r\n                  reportingperioddataid: Number(this.reportingPeriodId),\r\n                  parentName: this.parentDisplayValues[0],\r\n                  isClosingBalance: true,\r\n                });\r\n                if (res && res.status === 200) {\r\n                  res.data.data = JSON.parse(res.data.data).map((val) => {\r\n                    val[\"level1\"] = val[\"level1\"] && val[\"level1\"]!=\"0\" ? val[\"level1\"].trim() : \"\";\r\n                    val[\"level2\"] = val[\"level2\"] && val[\"level1\"]!=\"0\" ? val[\"level2\"].trim() : \"\";\r\n                    val[\"level3\"] = val[\"level3\"] && val[\"level1\"]!=\"0\" ? val[\"level3\"].trim() : \"\";\r\n                    val[\"drcr\"] = val[\"drcr\"]?val[\"drcr\"]:\"Dr\";\r\n                    val.level2Options = this.l2Options[val[\"level1\"]];\r\n                    if (val.level2Options)\r\n                      val.level3Options = this.l3Options[val[\"level1\"]][val[\"level2\"]];\r\n                    return val;\r\n                  });\r\n                  this.rowData = JSON.parse(JSON.stringify(res.data.data));\r\n                  this.orginalTaggingtreeData = JSON.parse(JSON.stringify(res.data.data));\r\n                }\r\n          }\r\n          if(total <= parentRes.data.data.groupcompleted.length) {  \r\n            this.clearIntervalFn();          \r\n            this.getFullLedgerDetails()\r\n      //             //get total ledger count for this reportingperiod id\r\n      // var totalRes = await this.$apiService.post(\r\n      //   \"/ledgerDetails/getTotalLedgerCount\",\r\n      //   { reportingperioddataid: reportingPeriodId }\r\n      // );\r\n      // if (totalRes && totalRes.status === 200) {\r\n      //   this.totalLedger = totalRes.data.data[0].exact_count;\r\n      // }\r\n    //get tagging dashoard value\r\n        var res1 = await this.$apiService.get(`ledger/taggingdashvalue?reportingPeriodId=${sessionStorage.getItem(\"reportId\")}&level=${sessionStorage.getItem(\"taggingLevel\")}`);\r\n            if(res1&&res1.status === 200) {  \r\n              this.totalLedger = res1.data.data.closingBalance.ledger.total;\r\n              this.totaltaggedLedger = res1.data.data.closingBalance.ledger.tagged;\r\n            }\r\n\r\n          }\r\n          loopCount++;\r\n        } \r\n        else{\r\n           clearInterval(this.constantlyChecking);\r\n        }       \r\n        }, 3000);\r\n    },\r\n    clearIntervalFn(){\r\n      clearInterval(this.constantlyChecking)\r\n    },\r\n    async viewChange(e) {\r\n      this.groupingSelected = e;\r\n      if (e) {\r\n        this.tableHeight = \"61.8vh\";\r\n          // this.gridApi.setRowData(JSON.parse(JSON.stringify(this.orginalTaggingtreeData)))\r\n          this.rowData = JSON.parse(JSON.stringify(this.orginalTaggingtreeData)).filter(val=>this.selectedParent == val.parent);\r\n      } else {\r\n        this.isRowGroupOpen = [];\r\n        this.tableHeight = \"68vh\";\r\n        var res = null;\r\n        if(!this.isAllDataGot){\r\n        res = await this.$apiService.post(\"/ledgerDetails/get\", {\r\n          reportingperioddataid: Number(this.reportingPeriodId),\r\n          parentName: \"ALL\",\r\n          isClosingBalance: this.selectedImportLevel == \"Closing Balance\",\r\n        });\r\n        this.orginalTaggingtreeData = JSON.parse(JSON.stringify(res))\r\n        }\r\n        else{\r\n          res = JSON.parse(JSON.stringify(this.orginalTaggingtreeData));\r\n        }\r\n        if (this.isAllDataGot || (res && res.status === 200)) {\r\n          this.isAllDataGot = true;\r\n          let dataCopy = JSON.parse(JSON.stringify(this.orginalTaggingtreeData));\r\n          let resultData = [];\r\n          var temp1 = this.$_.groupBy(dataCopy, (val) => val.parent);\r\n          var indexForSort = 0;\r\n          for (let key in temp1) {\r\n            this.isRowGroupOpen[key] = true;\r\n            resultData.push({\r\n              parent:key,\r\n              name: key,\r\n              isParentName: true,\r\n              indexForSort: indexForSort++,\r\n            });\r\n            temp1[key] = temp1[key].map((val) => {\r\n              val[\"level1\"] = val[\"level1\"] ? val[\"level1\"].trim() : \"\";\r\n          val[\"level2\"] = val[\"level2\"] ? val[\"level2\"].trim() : \"\";\r\n          val[\"level3\"] = val[\"level3\"] ? val[\"level3\"].trim() : \"\";\r\n          val[\"drcr\"] = val[\"drcr\"]?val[\"drcr\"]:\"Dr\";\r\n\r\n          val.level2Options = this.l2Options[val[\"level1\"]];\r\n          if (val.level2Options)\r\n            val.level3Options = this.l3Options[val[\"level1\"]][val[\"level2\"]];\r\n              val[\"indexForSort\"] = indexForSort++;\r\n              return val;\r\n            });\r\n            resultData = resultData.concat(temp1[key]);\r\n          }\r\n          this.rowData = JSON.parse(JSON.stringify(resultData));\r\n          // this.gridApi.setRowData(JSON.parse(JSON.stringify(resultData)))\r\n          this.ledgerDataCopy = resultData;\r\n        }\r\n      }\r\n    },\r\n    bulkTagLevel(val) {\r\n      this.dialogL1Value = \"\";\r\n      this.dialogL2Value = \"\";\r\n      let selected = [];\r\n      selected = this.rowData.filter((x) => x.selected == true);\r\n      if (selected.length < 1) {\r\n        this.isDialogMode = 1;\r\n        this.dialogWidth = \"35vw\";\r\n        this.alertMeassage =\r\n          \"Please Select atlest one Ledger to do Bulk tagging.\";\r\n      } else {\r\n        this.isDialogMode = val;\r\n        if (val == 2) this.dialogWidth = \"35vw\";\r\n        else {\r\n          let isSame = true;\r\n          for (let i = 1; i < selected.length; i++) {\r\n            if (selected[i].level1 != selected[i - 1].level1) {\r\n              isSame = false;\r\n              break;\r\n            }\r\n          }\r\n          if (isSame || this.isDiffBulck) {\r\n            this.dialogWidth = \"50vw\";\r\n            this.isDiffBulck = false;\r\n          } else {\r\n            this.isDiffBulck = !isSame;\r\n            this.isDialogMode = 1;\r\n            this.dialogWidth = \"35vw\";\r\n            this.alertMeassage =\r\n              \"Selected Ledgers has different L1 values,Do you want to Continue?\";\r\n          }\r\n        }\r\n      }\r\n      this.bulkTagLevel1Enabled = true;\r\n    },\r\n    hideLevel3Fields() {\r\n      let modifiedColumn = JSON.parse(JSON.stringify(this.allColumnDefs));\r\n      modifiedColumn[7].hide =true;\r\n      this.columnDefs= modifiedColumn;\r\n      this.showLevel3 = false;\r\n    },\r\n    hideLevel2Fields() {\r\n      let modifiedColumn = JSON.parse(JSON.stringify(this.allColumnDefs));\r\n      modifiedColumn[6].hide =true;\r\n      this.columnDefs= modifiedColumn;\r\n      this.showLevel2 = false;\r\n      this.showLevel3 = false;\r\n    },\r\n    showLevel2Fields() {\r\n      this.showLevel2 = true;\r\n      this.columnDefs= JSON.parse(JSON.stringify(this.allColumnDefs));\r\n    },\r\n    showLevel3Fields() {      \r\n      this.showLevel3 = true;\r\n      let modifiedColumn = JSON.parse(JSON.stringify(this.allColumnDefs));\r\n      modifiedColumn[7].hide =false;\r\n      this.columnDefs= modifiedColumn;\r\n    },\r\n    async saveAllLedgers() { \r\n      var res = await this.$apiService.put(`/ledgerDetails`,{\"data\":JSON.stringify(this.unSavedValue)});\r\n      if (res && res.status === 200) {\r\n        this.unSavedValue = [];\r\n        this.isDialogMode = 1;\r\n        this.dialogWidth = \"35vw\";\r\n        this.alertMeassage = \"Ledgers are saved successfully.\";\r\n        setTimeout(() => {\r\n          this.bulkTagLevel1Enabled = true;\r\n        }, 0);\r\n      }\r\n      if (res.data.status === \"error\") {\r\n        this.isDialogMode = 1;\r\n        this.dialogWidth = \"35vw\";\r\n        this.alertMeassage = \"Ledgers are not saved successfully.\";\r\n        setTimeout(() => {\r\n          this.bulkTagLevel1Enabled = true;\r\n        }, 0);\r\n      }\r\n    },\r\n    ledgerLevel1Changed(val) {\r\n      val[\"level2Options\"] = this.l2Options[val[\"level1\"]]\r\n        ? this.l2Options[val[\"level1\"]]\r\n        : [];\r\n      val[\"level3Options\"] = [];\r\n      val[\"level2\"] = \"\";\r\n      val[\"level3\"] = \"\";\r\n      val[\"level1\"] = val[\"level1\"] ? val[\"level1\"].trim() : \"\";\r\n      if(this.groupingSelected || !val.isParentName){\r\n        let index = this.$_.findLastIndex(this.orginalTaggingtreeData, {\r\n          name: val.name,\r\n          parent: val.parent,\r\n        });\r\n        if(this.orginalTaggingtreeData[index]){\r\n        this.orginalTaggingtreeData[index][\"level1\"] = val[\"level1\"];\r\n        this.orginalTaggingtreeData[index][\"level2\"] = val[\"level2\"];\r\n        this.orginalTaggingtreeData[index][\"level3\"] = val[\"level3\"];\r\n        }      \r\n        var rowNode = this.gridApi.getRowNode(val.parent+val.name);\r\n        rowNode.setDataValue(\"level1\", val[\"level1\"]);\r\n        this.updateUnsavedValues(val.parent,val.name,index); \r\n      }\r\n      else{\r\n        this.orginalTaggingtreeData = this.orginalTaggingtreeData.map(value=>{\r\n          if(val.isParentName && value.parent == val.parent && value.name == val.name){\r\n        if(!value[\"level1\"])value[\"level1\"] = val[\"level1\"];\r\n        if(!value[\"level2\"])value[\"level2\"] = val[\"level2\"];\r\n        if(!value[\"level3\"])value[\"level3\"] = val[\"level3\"];\r\n          }\r\n          else if(value.parent == val.name){\r\n        if(!value[\"level1\"])value[\"level1\"] = val[\"level1\"];\r\n        if(!value[\"level2\"])value[\"level2\"] = val[\"level2\"];\r\n        if(!value[\"level3\"])value[\"level3\"] = val[\"level3\"];\r\n          }\r\n          return value;\r\n        });\r\n        this.rowData = this.rowData.map(value=>{\r\n          if(val.isParentName && value.parent == val.parent && value.name == val.name){\r\n        if(!value[\"level1\"])value[\"level1\"] = val[\"level1\"];\r\n        if(!value[\"level2\"])value[\"level2\"] = val[\"level2\"];\r\n        if(!value[\"level3\"])value[\"level3\"] = val[\"level3\"];\r\n          }\r\n          else if(value.parent == val.name){\r\n        if(!value[\"level1\"])value[\"level1\"] = val[\"level1\"];\r\n        if(!value[\"level2\"])value[\"level2\"] = val[\"level2\"];\r\n        if(!value[\"level3\"])value[\"level3\"] = val[\"level3\"];\r\n          }\r\n          return value;\r\n        })\r\n      }\r\n    },\r\n    BulkTagOneChanged(value) {\r\n      let level2 = [];\r\n      this.allTagHeaders = JSON.parse(\r\n        JSON.stringify(this.$store.getters.tagHeaders)\r\n      );\r\n      var tagFilter = this.allTagHeaders.filter((x) => x.level1 == value);\r\n      if (tagFilter.length == 0) return;\r\n\r\n      if (tagFilter.length != 0) {\r\n        tagFilter[0].level2.forEach((element) => {\r\n          level2.push(element.level2name);\r\n        });\r\n      }\r\n      if (level2.length > 0) {\r\n        this.level2BulkValues = level2;\r\n      } else {\r\n        this.level2BulkValues = [];\r\n      }\r\n      this.bulkTagSelectedLevel2 = \"\";\r\n    },\r\n    ledgerLevel3Changed(val) {\r\n      val[\"level3\"] = val[\"level3\"] ? val[\"level3\"].trim() : \"\";\r\n      if(this.groupingSelected || !val.isParentName){\r\n      let index = this.$_.findLastIndex(this.orginalTaggingtreeData, {\r\n        name: val.name,\r\n        parent: val.parent,\r\n      });\r\n      this.orginalTaggingtreeData[index][\"level3\"] = val[\"level3\"];\r\n      var rowNode = this.gridApi.getRowNode(val.parent+val.name);\r\n      rowNode.setDataValue(\"level3\", val[\"level3\"]);\r\n      this.updateUnsavedValues(val.parent,val.name,index); \r\n      }\r\n      else{\r\n      this.orginalTaggingtreeData = this.orginalTaggingtreeData.map(value=>{\r\n        if(val.isParentName && value.parent == val.parent && value.name == val.name){\r\n      if(!value[\"level3\"])value[\"level3\"] = val[\"level3\"];\r\n        }\r\n        else if(value.parent == val.name){\r\n      if(!value[\"level3\"])value[\"level3\"] = val[\"level3\"];\r\n        }\r\n        return value;\r\n      });\r\n      this.rowData = this.rowData.map(value=>{\r\n        if(val.isParentName && value.parent == val.parent && value.name == val.name){\r\n      if(!value[\"level3\"])value[\"level3\"] = val[\"level3\"];\r\n        }\r\n        else if(value.parent == val.name){\r\n      if(!value[\"level3\"])value[\"level3\"] = val[\"level3\"];\r\n        }\r\n        return value;\r\n      })\r\n    }\r\n    },\r\n    ledgerLevel2Changed(val) {\r\n      val[\"level2\"] = val[\"level2\"] ? val[\"level2\"].trim() : \"\";\r\n      val[\"level3\"] = \"\";\r\n      val[\"level3Options\"] = [];\r\n      if (\r\n        this.l3Options[val[\"level1\"]] &&\r\n        this.l3Options[val[\"level1\"]][val[\"level2\"]]\r\n      )\r\n      val[\"level3Options\"] = this.l3Options[val[\"level1\"]][val[\"level2\"]];\r\n      if(this.groupingSelected || !val.isParentName){\r\n      let index = this.$_.findLastIndex(this.orginalTaggingtreeData, {\r\n        name: val.name,\r\n        parent: val.parent,\r\n      });\r\n      this.orginalTaggingtreeData[index][\"level2\"] = val[\"level2\"];\r\n      this.orginalTaggingtreeData[index][\"level3\"] = val[\"level3\"];\r\n      var rowNode = this.gridApi.getRowNode(val.parent+val.name);\r\n      rowNode.setDataValue(\"level2\", val[\"level2\"]);\r\n      this.updateUnsavedValues(val.parent,val.name,index); \r\n      }\r\n      else{\r\n      this.orginalTaggingtreeData = this.orginalTaggingtreeData.map(value=>{\r\n        if(val.isParentName && value.parent == val.parent && value.name == val.name){\r\n      if(!value[\"level2\"])value[\"level2\"] = val[\"level2\"];\r\n      if(!value[\"level3\"])value[\"level3\"] = val[\"level3\"];\r\n        }\r\n        else if(value.parent == val.name){\r\n      if(!value[\"level2\"])value[\"level2\"] = val[\"level2\"];\r\n      if(!value[\"level3\"])value[\"level3\"] = val[\"level3\"];\r\n        }\r\n        return value;\r\n      });\r\n      this.rowData = this.rowData.map(value=>{\r\n        if(val.isParentName && value.parent == val.parent && value.name == val.name){\r\n      if(!value[\"level2\"])value[\"level2\"] = val[\"level2\"];\r\n      if(!value[\"level3\"])value[\"level3\"] = val[\"level3\"];\r\n        }\r\n        else if(value.parent == val.name){\r\n      if(!value[\"level2\"])value[\"level2\"] = val[\"level2\"];\r\n      if(!value[\"level3\"])value[\"level3\"] = val[\"level3\"];\r\n        }\r\n        return value;\r\n      })\r\n    }\r\n    },\r\n    async fillLedgerData(data) {\r\n      const allTagHeaders = JSON.parse(\r\n        JSON.stringify(this.$store.getters.tagHeaders)\r\n      );\r\n      data.forEach((x) => {\r\n        x[\"selection\"] = false;\r\n        if (parseInt(x[\"balance\"]) < 0) {\r\n          x[\"drcr\"] = \"Cr\";\r\n        } else {\r\n          x[\"drcr\"] = \"Dr\";\r\n        }\r\n\r\n        let level1 = [];\r\n\r\n        var tagFilter = allTagHeaders.filter((row) => row.level1 == x.level1);\r\n        if (tagFilter.length == 0) {\r\n          return;\r\n        } else {\r\n          level1.push(tagFilter[0].level1);\r\n          this.templevel1Arryay.push({\r\n            ledgerid: x.ledgerid,\r\n            level1: this.level1Names,\r\n          });\r\n        }\r\n\r\n        if (level1.length > 0) {\r\n          let level2 = [];\r\n          this.templevel1Arryay.push({ ledgerid: x.ledgerid, level1: level1 });\r\n          var tag2Filter = tagFilter.filter((row) => row.level1 == x.level1);\r\n          if (tag2Filter.length != 0) {\r\n            tag2Filter[0].level2.forEach((element) => {\r\n              level2.push(element.level2name);\r\n            });\r\n            if (level2.length > 0) {\r\n              let level3 = [];\r\n              this.templevel2Arryay.push({\r\n                ledgerid: x.ledgerid,\r\n                level2: level2,\r\n              });\r\n              var tag3Filter = tag2Filter[0].level2.filter(\r\n                (row) => row.level2name == x.level2\r\n              );\r\n              if (tag3Filter.length != 0) {\r\n                tag3Filter[0].level3.forEach((element) => {\r\n                  level3.push(element);\r\n                });\r\n              }\r\n              if (level3.length > 0) {\r\n                this.templevel3Arryay.push({\r\n                  ledgerid: x.ledgerid,\r\n                  level3: level3,\r\n                });\r\n              }\r\n            }\r\n          }\r\n        }\r\n      });\r\n    },\r\n    async applyLevel1BulkTags() {\r\n      this.rowData = this.rowData.map((val) => {\r\n        if (val.selected == true) {\r\n          val[\"level1\"] = this.dialogL1Value;\r\n          val[\"level2\"] = this.dialogL2Value;\r\n          val[\"level3\"] = \"\";\r\n          val[\"level2Options\"] = [];\r\n          val.level3Options = [];\r\n          val.level2Options = this.l2Options[val[\"level1\"]];\r\n          if (val.level2Options)\r\n            val.level3Options = this.l3Options[val[\"level1\"]][val[\"level2\"]];\r\n          \r\n          let index = this.$_.findLastIndex(this.orginalTaggingtreeData, {\r\n            name: val.name,\r\n            parent: val.parent,\r\n          });\r\n          if(this.orginalTaggingtreeData[index]){\r\n          this.orginalTaggingtreeData[index][\"level1\"] = val[\"level1\"];\r\n          this.orginalTaggingtreeData[index][\"level2\"] = val[\"level2\"];\r\n          this.orginalTaggingtreeData[index][\"level3\"] = val[\"level3\"];\r\n          }\r\n          var rowNode = this.gridApi.getRowNode(val.parent+val.name);\r\n          rowNode.setDataValue(\"level1\", val[\"level1\"]);\r\n          rowNode.setDataValue(\"level2\", val[\"level2\"]);\r\n          rowNode.setDataValue(\"level3\", val[\"level3\"]);\r\n          this.updateUnsavedValues(val.parent,val.name,index);   \r\n          val.selected = false;       \r\n        }\r\n        return val;\r\n      });\r\n      this.checkBoxValue = false;\r\n      this.bulkTagLevel1Enabled = false;\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped  >\r\n@import \"../assets/css/tagging.css\";\r\n/* @import \"../node_modules/ag-grid-community/dist/styles/ag-grid.css\"; */\r\n  /* @import \"../node_modules/ag-grid-community/dist/styles/ag-theme-alpine.css\"; */\r\n.tdNameClass {\r\n  max-width: 150px;\r\n}\r\n</style>\r\n<style  scoped>\r\n\r\n/deep/ .v-select > .v-input__control{\r\n  min-height: 38px;\r\n}\r\n/* to remove the box shadow of drop down in AE dialog */\r\n/deep/ .v-select > .v-input__control > .v-input__slot{\r\n  box-shadow: none !important;\r\n}\r\n\r\n/deep/ .header{\r\n  font-size: 17px !important;\r\n    font-weight: 600 !important;\r\n    letter-spacing: 1px !important;\r\n}\r\n\r\n/deep/ .primaryColor{\r\n  color:#03a9f4 !important;\r\n}\r\n* {\r\n  /* font-family: \"Be Vietnam\" !important; */\r\n  font-family: Be Vietnam, Helvetica, Arial, sans-serif !important;\r\n  font-size: 14px !important;\r\n}\r\n/* ::v-deep/ .table > tbody > tr > td { */\r\n/deep/ .table > tbody > tr > td {\r\n  /* height: 10px !important;\r\n  max-width: 300px; */\r\n  text-transform: capitalize;\r\n  font-size: 14px;\r\n}\r\n\r\n/deep/ thead {\r\n  border-bottom: 4px solid #03a9f4;\r\n}\r\n/deep/ .table > tbody > tr > th {\r\n  /* height: 10px !important;\r\n  max-width: 300px; */\r\n  font-size: 14px;\r\n}\r\n\r\ndiv {\r\n  font-size: 14px;\r\n}\r\n/deep/ .table {\r\n  width: auto;\r\n  border-collapse: collapse;\r\n}\r\n/deep/.v-list-item {\r\n  cursor: pointer;\r\n}\r\n\r\n.textColor {\r\n  color: #494949 !important;\r\n}\r\n/deep/ p {\r\n  color: #494949;\r\n}\r\n.vertical-center {\r\n  align-items: center;\r\n}\r\n[role=\"columnheader\"] {\r\n  border: 1px solid black;\r\n  background: rgba(48, 96, 144, 0.2);\r\n  /* CSS goes here */\r\n}\r\n.formRow {\r\n  padding: 5px;\r\n  margin: 2px;\r\n}\r\n.btnRow {\r\n  display: flex;\r\n  /* width: 100px; */\r\n  min-width: 2.5vw;\r\n}\r\n/deep/ th > .text-dark {\r\n  padding: 0px;\r\n  display: flex;\r\n  justify-content: space-evenly;\r\n}\r\n.text-dark {\r\n  margin-bottom: 10px;\r\n  margin-top: 10px;\r\n  padding-bottom: 10px;\r\n  font-size: 14px;\r\n}\r\n/deep/.v-select__slot {\r\n  font-size: 14px !important;\r\n}\r\n.upTab {\r\n  margin: 5px;\r\n  border: 1px solid black;\r\n}\r\n.companyHeader {\r\n  margin-top: 10px;\r\n  font-size: 18px;\r\n}\r\n.uploadBtn {\r\n  margin: 0px;\r\n  padding: 0px;\r\n}\r\n.text-left {\r\n  text-align: left;\r\n}\r\n\r\n.table-borderless {\r\n  overflow-y: auto;\r\n}\r\n.table-borderless > tbody > tr > td,\r\n.table-borderless > tbody > tr > th,\r\n.table-borderless > tfoot > tr > td,\r\n.table-borderless > tfoot > tr > th,\r\n.table-borderless > thead > tr > td,\r\n.table-borderless > thead > tr > th {\r\n  border: none;\r\n  text-align: left;\r\n  float: left;\r\n  /* height: 10px !important; */\r\n}\r\n.LabelText {\r\n  text-decoration: bold;\r\n  font-size: 18px;\r\n  margin-top: 10px;\r\n}\r\n.main-wrapper {\r\n  float: left;\r\n  align-items: left;\r\n  display: block;\r\n  font-size: 14px;\r\n  font-weight: 540;\r\n  width: 100%;\r\n}\r\n.tableMainTdClass {\r\n  max-width: 150px !important;\r\n}\r\n.buttonDiv {\r\n  align-items: flex-end;\r\n}\r\n.maxCol {\r\n  max-width: 250px;\r\n}\r\n.test {\r\n  border-width: 2px !important;\r\n  border-color: #cdcdcd !important;\r\n  height: 100%;\r\n}\r\n\r\nbody,\r\n.container,\r\nhtml {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.blueUline {\r\n  width: 100%;\r\n  text-align: start;\r\n}\r\n.loginText {\r\n  font-size: 21px;\r\n  font-weight: 300;\r\n  /* line-height: 75px; */\r\n  /* margin-top:10px; */\r\n\r\n  color: rgb(0, 107, 106);\r\n  text-decoration: \"none\";\r\n  font-family: \"Roboto\";\r\n  text-align: left;\r\n  letter-spacing: 0.2;\r\n  margin-left: 15px;\r\n}\r\n\r\n.companyHeaderNew {\r\n  margin: 5px !important;\r\n  margin-top: 0px !important;\r\n  font-size: 15px !important;\r\n  max-height: 52px !important;\r\n  justify-content: flex-start;\r\n  align-items: center !important;\r\n}\r\n\r\n.tabelHeader {\r\n  color: red !important;\r\n}\r\n\r\n.btSty {\r\n  height: 10px;\r\n}\r\n\r\n.childStyle {\r\n  margin-left: 20px;\r\n}\r\n\r\n.parentStyle {\r\n  font-weight: 600;\r\n}\r\n\r\n.bluk1Dia {\r\n  height: 40vh;\r\n  font-size: 16px;\r\n}\r\n\r\n.alertStyle {\r\n  height: auto;\r\n  padding-bottom: 0px;\r\n  font-size: 16px;\r\n}\r\n.alertDivider {\r\n  height: 2px;\r\n  background-color: #03a9f4;\r\n  color: #03a9f4;\r\n  border: 1px solid;\r\n  margin-bottom: 24px;\r\n}\r\n.actionStyle {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n/deep/ .v-subheader {\r\n  font-size: 14px !important;\r\n  font-weight: 600 !important;\r\n  margin-left: 8px !important;\r\n}\r\n.cursorPointer {\r\n  cursor: pointer;\r\n}\r\n\r\n.selectBackgroundStyle {\r\n  color: white;\r\n  background-color: #03a9f4;\r\n}\r\n\r\n/deep/ .v-chip-group .v-chip--active {\r\n  color: white !important;\r\n  background-color: #03a9f4 !important;\r\n}\r\n\r\n.displayValid {\r\n  display: flex !important;\r\n}\r\n\r\n.filterChildStyle {\r\n  margin-left: 10px;\r\n  color: grey;\r\n}\r\n\r\n.whiteBg {\r\n  background-color: white;\r\n}\r\n\r\n.hrstyle {\r\n  width: 110%;\r\n  position: relative;\r\n  height: 4px;\r\n  background-color: #03a9f4;\r\n  margin: 5px 0px;\r\n  left: -10px;\r\n  border: 1px solid #03a9f4;\r\n}\r\n\r\n/deep/ button {\r\n  font-size: 12px;\r\n}\r\n\r\n/deep/ .noHover .v-btn__content {\r\n  background-color: #fff !important;\r\n}\r\n\r\n/deep/.v-list-item {\r\n  min-height: 35px !important;\r\n  font-size: 14px !important;\r\n  text-align: start;\r\n}\r\n\r\n.onHover:hover {\r\n  background-color: #f5f4f47d;\r\n}\r\n/deep/ .v-list-item__title {\r\n  font-size: 14px !important;\r\n}\r\n\r\n/deep/ .v-btn__content {\r\n  letter-spacing: normal !important;\r\n}\r\n\r\n/deep/.searchStyleP\r\n  > .v-text-field--outlined.v-input--dense.v-text-field--outlined\r\n  > .v-input__control\r\n  > .v-input__slot {\r\n  min-height: 32px !important;\r\n}\r\n\r\n/deep/ .searchStyle .v-input__append-inner {\r\n  margin-top: 4.5px !important;\r\n}\r\n\r\n/deep/ input {\r\n  font-size: 14px !important;\r\n}\r\n\r\n /deep/ .v-text-field--outlined.v-input--is-focused fieldset,\r\n.v-text-field--outlined.v-input--has-state fieldset {\r\n  border: 1px solid grey !important;\r\n}\r\n\r\n/deep/\r\n  .ag-cell >.main-wrapper>.v-text-field--outlined.v-input--dense.v-text-field--single-line\r\n  > .v-input__control\r\n  > .v-input__slot,\r\n.ag-cell >.main-wrapper>.v-text-field--outlined.v-input--dense.v-text-field--outlined\r\n  > .v-input__control\r\n  > .v-input__slot {\r\n  min-height: 32px !important;\r\n  margin-top: 5px !important;\r\n  width: 100%;\r\n}\r\n\r\n/deep/.ag-theme-material .ag-ltr .ag-cell {\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n/deep/.v-sheet.v-list {\r\n  font-size: 14px !important;\r\n  max-width: 22vw;\r\n}\r\n\r\n/deep/.v-list.v-sheet {\r\n  font-size: 14px !important;\r\n  max-width: 22vw;\r\n}\r\n\r\n/deep/.v-autocomplete__content.v-menu__content .v-select-list {\r\n  font-size: 14px !important;\r\n  background-color: #fff;\r\n}\r\n\r\n/deep/.v-list {\r\n  max-width: 22vw !important;\r\n}\r\n\r\n.col {\r\n  font-size: 14px !important;\r\n}\r\n\r\n.saveMargin {\r\n  margin-top: 5px !important;\r\n}\r\n\r\n.parentLedgerType {\r\n  display: flex !important;\r\n}\r\n.parentLedgerWidth {\r\n  max-width: 85% !important;\r\n  min-width: 85% !important;\r\n  min-height: 37px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.childLedgerWidth {\r\n  max-width: 85% !important;\r\n}\r\n\r\n.ledgerViweTbHg {\r\n  min-height: 69.5vh !important;\r\n}\r\n\r\n/deep/ .v-input .v-label {\r\n  font-size: 14px !important;\r\n}\r\n\r\n/deep/\r\n  #app\r\n  > div.v-menu__content.theme--light.menuable__content__active.v-autocomplete__content {\r\n  max-width: 22vw !important;\r\n  background-color: #fff;\r\n\r\n}\r\n\r\n/deep/ .v-menu__content {\r\n    background-color: #fff;\r\n}\r\n\r\n.cardStyle{\r\n  border: 1px solid white ;\r\n  box-shadow: 0 3px 10px rgb(0 0 0 / 0.2);\r\n}\r\n/deep/ .ag-theme-material .ag-row{\r\n  border: 0px !important;\r\n  font-size: 14px !important;\r\n  text-align: start;\r\n}\r\n\r\n/deep/ .ag-theme-material .ag-header-row{\r\nborder-bottom: 5px solid #03a9f4 !important;\r\ntext-transform: capitalize;\r\nfont-size: 14px !important;\r\ntext-align: start;\r\n}\r\n\r\n/deep/ .aeDialogStyle{\r\n  height:75vh !important;\r\n}\r\n/deep/ .aeAddDialogStyle{\r\n  height:70vh !important;\r\n  }\r\n\r\n  /deep/ .commentStyle{\r\n    height:100px !important;\r\n  }\r\n  \r\n  /deep/.commentStyle>div>div{\r\n    display: block;\r\n  }\r\n</style>\r\n\r\n"]}]}