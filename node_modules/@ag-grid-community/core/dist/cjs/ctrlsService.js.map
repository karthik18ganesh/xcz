{"version":3,"sources":["../../src/ts/ctrlsService.ts"],"names":[],"mappings":"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","file":"ctrlsService.js","sourcesContent":["import { GridCtrl } from \"./gridComp/gridCtrl\";\nimport { Bean } from \"./context/context\";\nimport { GridBodyCtrl } from \"./gridBodyComp/gridBodyCtrl\";\nimport { RowContainerCtrl } from \"./gridBodyComp/rowContainer/rowContainerCtrl\";\nimport { HeaderRootComp } from \"./headerRendering/headerRootComp\";\nimport { FakeHScrollCtrl } from \"./gridBodyComp/fakeHScrollCtrl\";\nimport { BeanStub } from \"./context/beanStub\";\n\n// for all controllers that are singletons, they can register here so other parts\n// of the application can access them.\n\ninterface ReadyParams {\n    gridCtrl: GridCtrl;\n    gridBodyCtrl: GridBodyCtrl;\n\n    centerRowContainerCtrl: RowContainerCtrl;\n    leftRowContainerCtrl: RowContainerCtrl;\n    rightRowContainerCtrl: RowContainerCtrl;\n\n    bottomCenterRowContainerCtrl: RowContainerCtrl;\n    bottomLeftRowContainerCtrl: RowContainerCtrl;\n    bottomRightRowContainerCtrl: RowContainerCtrl;\n\n    topCenterRowContainerCtrl: RowContainerCtrl;\n    topLeftRowContainerCtrl: RowContainerCtrl;\n    topRightRowContainerCtrl: RowContainerCtrl;\n\n    fakeHScrollCtrl: FakeHScrollCtrl;\n    headerRootComp: HeaderRootComp;\n}\n\n@Bean('ctrlsService')\nexport class CtrlsService extends BeanStub {\n\n    private gridCtrl: GridCtrl;\n    private gridBodyCtrl: GridBodyCtrl;\n\n    private centerRowContainerCtrl: RowContainerCtrl;\n    private leftRowContainerCtrl: RowContainerCtrl;\n    private rightRowContainerCtrl: RowContainerCtrl;\n\n    private bottomCenterRowContainerCtrl: RowContainerCtrl;\n    private bottomLeftRowContainerCtrl: RowContainerCtrl;\n    private bottomRightRowContainerCtrl: RowContainerCtrl;\n\n    private topCenterRowContainerCtrl: RowContainerCtrl;\n    private topLeftRowContainerCtrl: RowContainerCtrl;\n    private topRightRowContainerCtrl: RowContainerCtrl;\n\n    private fakeHScrollCtrl: FakeHScrollCtrl;\n\n    private headerRootComp: HeaderRootComp;\n\n    private ready = false;\n    private readyCallbacks: ((p: ReadyParams) => void)[] = [];\n\n    private checkReady(): void {\n        this.ready =\n            this.gridCtrl != null\n            && this.gridBodyCtrl != null\n\n            && this.centerRowContainerCtrl != null\n            && this.leftRowContainerCtrl != null\n            && this.rightRowContainerCtrl != null\n\n            && this.bottomCenterRowContainerCtrl != null\n            && this.bottomLeftRowContainerCtrl != null\n            && this.bottomRightRowContainerCtrl != null\n\n            && this.topCenterRowContainerCtrl != null\n            && this.topLeftRowContainerCtrl != null\n            && this.topRightRowContainerCtrl != null\n\n            && this.fakeHScrollCtrl != null\n            && this.headerRootComp != null;\n\n        if (this.ready) {\n            const p = this.createReadyParams();\n            this.readyCallbacks.forEach(c => c(p));\n            this.readyCallbacks.length = 0;\n        }\n    }\n\n    public whenReady(callback: (p: ReadyParams) => void): void {\n        if (this.ready) {\n            callback(this.createReadyParams());\n        } else {\n            this.readyCallbacks.push(callback);\n        }\n    }\n\n    private createReadyParams(): ReadyParams {\n        return {\n            centerRowContainerCtrl: this.centerRowContainerCtrl,\n            leftRowContainerCtrl: this.leftRowContainerCtrl,\n            rightRowContainerCtrl: this.rightRowContainerCtrl,\n\n            bottomCenterRowContainerCtrl: this.bottomCenterRowContainerCtrl,\n            bottomLeftRowContainerCtrl: this.bottomLeftRowContainerCtrl,\n            bottomRightRowContainerCtrl: this.bottomRightRowContainerCtrl,\n\n            topCenterRowContainerCtrl: this.topCenterRowContainerCtrl,\n            topLeftRowContainerCtrl: this.topLeftRowContainerCtrl,\n            topRightRowContainerCtrl: this.topRightRowContainerCtrl,\n\n            fakeHScrollCtrl: this.fakeHScrollCtrl,\n            gridBodyCtrl: this.gridBodyCtrl,\n            gridCtrl: this.gridCtrl,\n            headerRootComp: this.headerRootComp,\n        };\n    }\n\n    public registerFakeHScrollCtrl(con: FakeHScrollCtrl): void {\n        this.fakeHScrollCtrl = con;\n        this.checkReady();\n    }\n\n    public registerHeaderRootComp(headerRootComp: HeaderRootComp): void {\n        this.headerRootComp = headerRootComp;\n        this.checkReady();\n    }\n\n    public registerCenterRowContainerCtrl(con: RowContainerCtrl): void {\n        this.centerRowContainerCtrl = con;\n        this.checkReady();\n    }\n\n    public registerLeftRowContainerCtrl(con: RowContainerCtrl): void {\n        this.leftRowContainerCtrl = con;\n        this.checkReady();\n    }\n\n    public registerRightRowContainerCtrl(con: RowContainerCtrl): void {\n        this.rightRowContainerCtrl = con;\n        this.checkReady();\n    }\n\n    public registerTopCenterRowContainerCtrl(con: RowContainerCtrl): void {\n        this.topCenterRowContainerCtrl = con;\n        this.checkReady();\n    }\n\n    public registerTopLeftRowContainerCon(con: RowContainerCtrl): void {\n        this.topLeftRowContainerCtrl = con;\n        this.checkReady();\n    }\n\n    public registerTopRightRowContainerCtrl(con: RowContainerCtrl): void {\n        this.topRightRowContainerCtrl = con;\n        this.checkReady();\n    }\n\n    public registerBottomCenterRowContainerCtrl(con: RowContainerCtrl): void {\n        this.bottomCenterRowContainerCtrl = con;\n        this.checkReady();\n    }\n\n    public registerBottomLeftRowContainerCtrl(con: RowContainerCtrl): void {\n        this.bottomLeftRowContainerCtrl = con;\n        this.checkReady();\n    }\n\n    public registerBottomRightRowContainerCtrl(con: RowContainerCtrl): void {\n        this.bottomRightRowContainerCtrl = con;\n        this.checkReady();\n    }\n\n    public registerGridBodyCtrl(con: GridBodyCtrl): void {\n        this.gridBodyCtrl = con;\n        this.checkReady();\n    }\n\n    public registerGridCtrl(con: GridCtrl): void {\n        this.gridCtrl = con;\n        this.checkReady();\n    }\n\n    public getFakeHScrollCtrl(): FakeHScrollCtrl {\n        return this.fakeHScrollCtrl;\n    }\n\n    public getHeaderRootComp(): HeaderRootComp {\n        return this.headerRootComp;\n    }\n\n    public getGridCtrl(): GridCtrl {\n        return this.gridCtrl;\n    }\n\n    public getCenterRowContainerCtrl(): RowContainerCtrl {\n        return this.centerRowContainerCtrl;\n    }\n\n    public getTopCenterRowContainerCtrl(): RowContainerCtrl {\n        return this.topCenterRowContainerCtrl;\n    }\n\n    public getBottomCenterRowContainerCtrl(): RowContainerCtrl {\n        return this.bottomCenterRowContainerCtrl;\n    }\n\n    public getGridBodyCtrl(): GridBodyCtrl {\n        return this.gridBodyCtrl;\n    }\n}"]}